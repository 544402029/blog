# JavaScript è®¾è®¡æ¨¡å¼æ ¸â¼¼åŸç†ä¸åº”â½¤å®è·µ

## è®¾è®¡æ¨¡å¼çš„é“ä¸æœ¯
### SOLIDè®¾è®¡åŸåˆ™

> "SOLID" æ˜¯ç”±ç½—ä¼¯ç‰¹Â·CÂ·é©¬ä¸åœ¨ 21 ä¸–çºªæ—©æœŸå¼•å…¥çš„è®°å¿†æœ¯é¦–å­—æ¯ç¼©ç•¥å­—ï¼ŒæŒ‡ä»£äº†é¢å‘å¯¹è±¡ç¼–ç¨‹å’Œé¢å‘å¯¹è±¡è®¾è®¡çš„äº”ä¸ªåŸºæœ¬åŸåˆ™ã€‚

è®¾è®¡åŸåˆ™æ˜¯è®¾è®¡æ¨¡å¼çš„æŒ‡å¯¼ç†è®ºï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬è§„é¿ä¸è‰¯çš„è½¯ä»¶è®¾è®¡ã€‚SOLID æŒ‡ä»£çš„äº”ä¸ªåŸºæœ¬åŸåˆ™åˆ†åˆ«æ˜¯ï¼š

- å•ä¸€åŠŸèƒ½åŸåˆ™ï¼ˆSingle Responsibility Principleï¼‰
- å¼€æ”¾å°é—­åŸåˆ™ï¼ˆOpened Closed Principleï¼‰
- é‡Œå¼æ›¿æ¢åŸåˆ™ï¼ˆLiskov Substitution Principleï¼‰
- æ¥å£éš”ç¦»åŸåˆ™ï¼ˆInterface Segregation Principleï¼‰
- ä¾èµ–åè½¬åŸåˆ™ï¼ˆDependency Inversion Principleï¼‰

åœ¨ JavaScript è®¾è®¡æ¨¡å¼ä¸­ï¼Œä¸»è¦ç”¨åˆ°çš„è®¾è®¡æ¨¡å¼åŸºæœ¬éƒ½å›´ç»•â€œå•ä¸€åŠŸèƒ½â€å’Œâ€œå¼€æ”¾å°é—­â€è¿™ä¸¤ä¸ªåŸåˆ™æ¥å±•å¼€ã€‚

### è®¾è®¡æ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³â€”â€”å°è£…å˜åŒ–

åœ¨å®é™…å¼€å‘ä¸­ï¼Œä¸å‘ç”Ÿå˜åŒ–çš„ä»£ç å¯ä»¥è¯´æ˜¯ä¸å­˜åœ¨çš„ã€‚æˆ‘ä»¬èƒ½åšçš„åªæœ‰å°†è¿™ä¸ªå˜åŒ–é€ æˆçš„å½±å“**æœ€å°åŒ– â€”â€” å°†å˜ä¸ä¸å˜åˆ†ç¦»ï¼Œç¡®ä¿å˜åŒ–çš„éƒ¨åˆ†çµæ´»ã€ä¸å˜çš„éƒ¨åˆ†ç¨³å®šã€‚**

### è®¾è®¡æ¨¡å¼çš„æœ¯

![23ç§è®¾è®¡æ¨¡å¼](https://gitee.com/l544402029/res/raw/master/å°ä¹¦åŒ /1625208546140.png)

## åˆ›å»ºå‹ï¼šå·¥å‚æ¨¡å¼Â·ç®€å•å·¥å‚â€”â€”åŒºåˆ†â€œå˜ä¸ä¸å˜â€

åœ¨åˆ›å»ºä¸€ä¸ªuserè¿‡ç¨‹ä¸­ï¼Œè°å˜äº†ï¼Œè°ä¸å˜ï¼Ÿ

å¾ˆæ˜æ˜¾ï¼Œå˜çš„æ˜¯æ¯ä¸ªuserçš„å§“åã€å¹´é¾„ã€å·¥ç§è¿™äº›å€¼ï¼Œè¿™æ˜¯ç”¨æˆ·çš„ä¸ªæ€§ï¼Œä¸å˜çš„æ˜¯æ¯ä¸ªå‘˜å·¥éƒ½å…·å¤‡å§“åã€å¹´é¾„ã€å·¥ç§è¿™äº›å±æ€§ï¼Œè¿™æ˜¯ç”¨æˆ·çš„å…±æ€§ã€‚

```js
function User(name , age, career, work) {
    this.name = name
    this.age = age
    this.career = career 
    this.work = work
}

function Factory(name, age, career) {
    let work
    switch(career) {
        case 'coder':
            work =  ['å†™ä»£ç ','å†™ç³»åˆ†', 'ä¿®Bug'] 
            break
        case 'product manager':
            work = ['è®¢ä¼šè®®å®¤', 'å†™PRD', 'å‚¬æ›´']
            break
        case 'boss':
            work = ['å–èŒ¶', 'çœ‹æŠ¥', 'è§å®¢æˆ·']
        case 'xxx':
            // å…¶å®ƒå·¥ç§çš„èŒè´£åˆ†é…
            ...
            
    return new User(name, age, career, work)
}
```

å·¥å‚æ¨¡å¼çš„ç®€å•ä¹‹å¤„ï¼Œåœ¨äºå®ƒçš„æ¦‚å¿µç›¸å¯¹å¥½ç†è§£ï¼šå°†åˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹å•ç‹¬å°è£…ï¼Œè¿™æ ·çš„æ“ä½œå°±æ˜¯å·¥å‚æ¨¡å¼ã€‚åŒæ—¶å®ƒçš„åº”ç”¨åœºæ™¯ä¹Ÿéå¸¸å®¹æ˜“è¯†åˆ«ï¼šæœ‰æ„é€ å‡½æ•°çš„åœ°æ–¹ï¼Œæˆ‘ä»¬å°±åº”è¯¥æƒ³åˆ°ç®€å•å·¥å‚ï¼›åœ¨å†™äº†å¤§é‡æ„é€ å‡½æ•°ã€è°ƒç”¨äº†å¤§é‡çš„ newã€è‡ªè§‰éå¸¸ä¸çˆ½çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°±åº”è¯¥æ€è€ƒæ˜¯ä¸æ˜¯å¯ä»¥æå‡ºå·¥å‚æ¨¡å¼é‡æ„æˆ‘ä»¬çš„ä»£ç äº†ã€‚

## åˆ›å»ºå‹ï¼šå·¥å‚æ¨¡å¼Â·æŠ½è±¡å·¥å‚â€”â€”ç†è§£â€œå¼€æ”¾å°é—­â€

**å¼€æ”¾å°é—­åŸåˆ™**çš„å†…å®¹ï¼šå¯¹æ‹“å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å°é—­ã€‚è¯´å¾—æ›´å‡†ç¡®ç‚¹ï¼Œè½¯ä»¶å®ä½“ï¼ˆç±»ã€æ¨¡å—ã€å‡½æ•°ï¼‰å¯ä»¥æ‰©å±•ï¼Œä½†æ˜¯ä¸å¯ä¿®æ”¹ã€‚

**æŠ½è±¡å·¥å‚æ¨¡å¼**

å¤§å®¶çŸ¥é“ä¸€éƒ¨æ™ºèƒ½æ‰‹æœºçš„åŸºæœ¬ç»„æˆæ˜¯æ“ä½œç³»ç»Ÿï¼ˆOperating Systemï¼Œæˆ‘ä»¬ä¸‹é¢ç¼©å†™ä½œ OSï¼‰å’Œç¡¬ä»¶ï¼ˆHardWareï¼‰ç»„æˆã€‚æ‰€ä»¥è¯´å¦‚æœæˆ‘è¦å¼€ä¸€ä¸ªå±±å¯¨æ‰‹æœºå·¥å‚ï¼Œé‚£æˆ‘è¿™ä¸ªå·¥å‚é‡Œå¿…é¡»æ˜¯æ—¢å‡†å¤‡å¥½äº†æ“ä½œç³»ç»Ÿï¼Œä¹Ÿå‡†å¤‡å¥½äº†ç¡¬ä»¶ï¼Œæ‰èƒ½å®ç°æ‰‹æœºçš„é‡äº§ã€‚è€ƒè™‘åˆ°æ“ä½œç³»ç»Ÿå’Œç¡¬ä»¶è¿™ä¸¤æ ·ä¸œè¥¿èƒŒåä¹Ÿå­˜åœ¨ä¸åŒçš„å‚å•†ï¼Œè€Œæˆ‘ç°åœ¨å¹¶ä¸çŸ¥é“æˆ‘ä¸‹ä¸€ä¸ªç”Ÿäº§çº¿åˆ°åº•å…·ä½“æƒ³ç”Ÿäº§ä¸€å°ä»€ä¹ˆæ ·çš„æ‰‹æœºï¼Œæˆ‘åªçŸ¥é“æ‰‹æœºå¿…é¡»æœ‰è¿™ä¸¤éƒ¨åˆ†ç»„æˆï¼Œæ‰€ä»¥æˆ‘å…ˆæ¥ä¸€ä¸ªæŠ½è±¡ç±»æ¥çº¦å®šä½è¿™å°æ‰‹æœºçš„åŸºæœ¬ç»„æˆï¼š

```js
class MobilePhoneFactory {
    // æä¾›æ“ä½œç³»ç»Ÿçš„æ¥å£
    createOS(){
        throw new Error("æŠ½è±¡å·¥å‚æ–¹æ³•ä¸å…è®¸ç›´æ¥è°ƒç”¨ï¼Œä½ éœ€è¦å°†æˆ‘é‡å†™ï¼");
    }
    // æä¾›ç¡¬ä»¶çš„æ¥å£
    createHardWare(){
        throw new Error("æŠ½è±¡å·¥å‚æ–¹æ³•ä¸å…è®¸ç›´æ¥è°ƒç”¨ï¼Œä½ éœ€è¦å°†æˆ‘é‡å†™ï¼");
    }
}
```

æ¥¼ä¸Šè¿™ä¸ªç±»ï¼Œé™¤äº†çº¦å®šæ‰‹æœºæµæ°´çº¿çš„é€šç”¨èƒ½åŠ›ä¹‹å¤–ï¼Œå•¥ä¹Ÿä¸å¹²ã€‚å¦‚æœä½ å°è¯•è®©å®ƒå¹²ç‚¹å•¥ï¼Œæ¯”å¦‚ new ä¸€ä¸ª MobilePhoneFactory å®ä¾‹ï¼Œå¹¶å°è¯•è°ƒç”¨å®ƒçš„å®ä¾‹æ–¹æ³•ã€‚å®ƒè¿˜ä¼šç»™ä½ æŠ¥é”™ï¼Œæé†’ä½ â€œæˆ‘ä¸æ˜¯è®©ä½ æ‹¿å»newä¸€ä¸ªå®ä¾‹çš„ï¼Œæˆ‘å°±æ˜¯ä¸ªå®šè§„çŸ©çš„â€ã€‚åœ¨æŠ½è±¡å·¥å‚æ¨¡å¼é‡Œï¼Œæ¥¼ä¸Šè¿™ä¸ªç±»å°±æ˜¯æˆ‘ä»¬é£Ÿç‰©é“¾é¡¶ç«¯æœ€å¤§çš„ Bossâ€”â€”AbstractFactoryï¼ˆæŠ½è±¡å·¥å‚ï¼‰ã€‚

æŠ½è±¡å·¥å‚ä¸å¹²æ´»ï¼Œå…·ä½“å·¥å‚ï¼ˆConcreteFactoryï¼‰æ¥å¹²æ´»ï¼å½“æˆ‘ä»¬æ˜ç¡®äº†ç”Ÿäº§æ–¹æ¡ˆï¼Œæ˜ç¡®æŸä¸€æ¡æ‰‹æœºç”Ÿäº§æµæ°´çº¿å…·ä½“è¦ç”Ÿäº§ä»€ä¹ˆæ ·çš„æ‰‹æœºäº†ä¹‹åï¼Œå°±å¯ä»¥åŒ–æŠ½è±¡ä¸ºå…·ä½“ï¼Œæ¯”å¦‚æˆ‘ç°åœ¨æƒ³è¦ä¸€ä¸ªä¸“é—¨ç”Ÿäº§ Android ç³»ç»Ÿ + é«˜é€šç¡¬ä»¶çš„æ‰‹æœºçš„ç”Ÿäº§çº¿ï¼Œæˆ‘ç»™è¿™ç±»æ‰‹æœºå‹å·èµ·åå« FakeStarï¼Œé‚£æˆ‘å°±å¯ä»¥ä¸º FakeStar å®šåˆ¶ä¸€ä¸ªå…·ä½“å·¥å‚ï¼š

```js
// å…·ä½“å·¥å‚ç»§æ‰¿è‡ªæŠ½è±¡å·¥å‚
class FakeStarFactory extends MobilePhoneFactory {
    createOS() {
        // æä¾›å®‰å“ç³»ç»Ÿå®ä¾‹
        return new AndroidOS()
    }
    createHardWare() {
        // æä¾›é«˜é€šç¡¬ä»¶å®ä¾‹
        return new QualcommHardWare()
    }
}
```

è¿™é‡Œæˆ‘ä»¬åœ¨æä¾›å®‰å“ç³»ç»Ÿçš„æ—¶å€™ï¼Œè°ƒç”¨äº†ä¸¤ä¸ªæ„é€ å‡½æ•°ï¼šAndroidOS å’Œ QualcommHardWareï¼Œå®ƒä»¬åˆ†åˆ«ç”¨äºç”Ÿæˆå…·ä½“çš„æ“ä½œç³»ç»Ÿå’Œç¡¬ä»¶å®ä¾‹ã€‚åƒè¿™ç§è¢«æˆ‘ä»¬æ‹¿æ¥ç”¨äº new å‡ºå…·ä½“å¯¹è±¡çš„ç±»ï¼Œå«åšå…·ä½“äº§å“ç±»ï¼ˆConcreteProductï¼‰ã€‚å…·ä½“äº§å“ç±»å¾€å¾€ä¸ä¼šå­¤ç«‹å­˜åœ¨ï¼Œä¸åŒçš„å…·ä½“äº§å“ç±»å¾€å¾€æœ‰ç€å…±åŒçš„åŠŸèƒ½ï¼Œæ¯”å¦‚å®‰å“ç³»ç»Ÿç±»å’Œè‹¹æœç³»ç»Ÿç±»ï¼Œå®ƒä»¬éƒ½æ˜¯æ“ä½œç³»ç»Ÿï¼Œéƒ½æœ‰ç€å¯ä»¥æ“æ§æ‰‹æœºç¡¬ä»¶ç³»ç»Ÿè¿™æ ·ä¸€ä¸ªæœ€åŸºæœ¬çš„åŠŸèƒ½ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªæŠ½è±¡äº§å“ï¼ˆAbstractProductï¼‰ç±»æ¥å£°æ˜è¿™ä¸€ç±»äº§å“åº”è¯¥å…·æœ‰çš„åŸºæœ¬åŠŸèƒ½ï¼ˆä¼—ï¼šä»€ä¹ˆæŠ½è±¡äº§å“ï¼Ÿï¼Ÿï¼Ÿè¦è¿™äº›ç©æ„å„¿å¹²å•¥ï¼Ÿè€å¤«å†™ä»£ç å°±æ˜¯ä¸€æŠŠæ¢­ï¼Œä¸ºå•¥ä¸è®©æˆ‘è€è€å®å®ä¸€ä¸ªä¸€ä¸ªå†™å…·ä½“ç±»ï¼Ÿï¼Ÿï¼Ÿå¤§å®¶ç¨å®‰å‹¿èºï¼Œå…ˆæŠŠä¾‹å­çœ‹å®Œï¼Œä¸‹æ–‡ä¼šæœ‰è§£é‡Šï¼‰


```js
// å®šä¹‰æ“ä½œç³»ç»Ÿè¿™ç±»äº§å“çš„æŠ½è±¡äº§å“ç±»
class OS {
    controlHardWare() {
        throw new Error('æŠ½è±¡äº§å“æ–¹æ³•ä¸å…è®¸ç›´æ¥è°ƒç”¨ï¼Œä½ éœ€è¦å°†æˆ‘é‡å†™ï¼');
    }
}

// å®šä¹‰å…·ä½“æ“ä½œç³»ç»Ÿçš„å…·ä½“äº§å“ç±»
class AndroidOS extends OS {
    controlHardWare() {
        console.log('æˆ‘ä¼šç”¨å®‰å“çš„æ–¹å¼å»æ“ä½œç¡¬ä»¶')
    }
}

class AppleOS extends OS {
    controlHardWare() {
        console.log('æˆ‘ä¼šç”¨ğŸçš„æ–¹å¼å»æ“ä½œç¡¬ä»¶')
    }
}
...
```

ç¡¬ä»¶ç±»äº§å“åŒç†ï¼š

```js
// å®šä¹‰æ‰‹æœºç¡¬ä»¶è¿™ç±»äº§å“çš„æŠ½è±¡äº§å“ç±»
class HardWare {
    // æ‰‹æœºç¡¬ä»¶çš„å…±æ€§æ–¹æ³•ï¼Œè¿™é‡Œæå–äº†â€œæ ¹æ®å‘½ä»¤è¿è½¬â€è¿™ä¸ªå…±æ€§
    operateByOrder() {
        throw new Error('æŠ½è±¡äº§å“æ–¹æ³•ä¸å…è®¸ç›´æ¥è°ƒç”¨ï¼Œä½ éœ€è¦å°†æˆ‘é‡å†™ï¼');
    }
}

// å®šä¹‰å…·ä½“ç¡¬ä»¶çš„å…·ä½“äº§å“ç±»
class QualcommHardWare extends HardWare {
    operateByOrder() {
        console.log('æˆ‘ä¼šç”¨é«˜é€šçš„æ–¹å¼å»è¿è½¬')
    }
}

class MiWare extends HardWare {
    operateByOrder() {
        console.log('æˆ‘ä¼šç”¨å°ç±³çš„æ–¹å¼å»è¿è½¬')
    }
}
...
```

å¥½äº†ï¼Œå¦‚æ­¤ä¸€æ¥ï¼Œå½“æˆ‘ä»¬éœ€è¦ç”Ÿäº§ä¸€å°FakeStaræ‰‹æœºæ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦è¿™æ ·åšï¼š
```js
// è¿™æ˜¯æˆ‘çš„æ‰‹æœº
const myPhone = new FakeStarFactory()
// è®©å®ƒæ‹¥æœ‰æ“ä½œç³»ç»Ÿ
const myOS = myPhone.createOS()
// è®©å®ƒæ‹¥æœ‰ç¡¬ä»¶
const myHardWare = myPhone.createHardWare()
// å¯åŠ¨æ“ä½œç³»ç»Ÿ(è¾“å‡ºâ€˜æˆ‘ä¼šç”¨å®‰å“çš„æ–¹å¼å»æ“ä½œç¡¬ä»¶â€™)
myOS.controlHardWare()
// å”¤é†’ç¡¬ä»¶(è¾“å‡ºâ€˜æˆ‘ä¼šç”¨é«˜é€šçš„æ–¹å¼å»è¿è½¬â€™)
myHardWare.operateByOrder()
```

å…³é”®çš„æ—¶åˆ»æ¥äº†â€”â€”å‡å¦‚æœ‰ä¸€å¤©ï¼ŒFakeStarè¿‡æ°”äº†ï¼Œæˆ‘ä»¬éœ€è¦äº§å‡ºä¸€æ¬¾æ–°æœºæŠ•å…¥å¸‚åœºï¼Œè¿™æ—¶å€™æ€ä¹ˆåŠï¼Ÿæˆ‘ä»¬æ˜¯ä¸æ˜¯ä¸éœ€è¦å¯¹æŠ½è±¡å·¥å‚MobilePhoneFactoryåšä»»ä½•ä¿®æ”¹ï¼Œåªéœ€è¦æ‹“å±•å®ƒçš„ç§ç±»ï¼š

```js
class newStarFactory extends MobilePhoneFactory {
    createOS() {
        // æ“ä½œç³»ç»Ÿå®ç°ä»£ç 
    }
    createHardWare() {
        // ç¡¬ä»¶å®ç°ä»£ç 
    }
}
```

è¿™ä¹ˆä¸ªæ“ä½œï¼Œå¯¹åŸæœ‰çš„ç³»ç»Ÿä¸ä¼šé€ æˆä»»ä½•æ½œåœ¨å½±å“ æ‰€è°“çš„â€œå¯¹æ‹“å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å°é—­â€å°±è¿™ä¹ˆåœ†æ»¡å®ç°äº†ã€‚å‰é¢æˆ‘ä»¬ä¹‹æ‰€ä»¥è¦å®ç°æŠ½è±¡äº§å“ç±»ï¼Œä¹Ÿæ˜¯åŒæ ·çš„é“ç†ã€‚

**æ€»ç»“**

å¤§å®¶ç°åœ¨å›å¤´å¯¹æ¯”ä¸€ä¸‹æŠ½è±¡å·¥å‚å’Œç®€å•å·¥å‚çš„æ€è·¯ï¼Œæ€è€ƒä¸€ä¸‹ï¼šå®ƒä»¬ä¹‹é—´æœ‰å“ªäº›å¼‚åŒï¼Ÿ

å®ƒä»¬çš„å…±åŒç‚¹ï¼Œåœ¨äºéƒ½å°è¯•å»åˆ†ç¦»ä¸€ä¸ªç³»ç»Ÿä¸­å˜ä¸ä¸å˜çš„éƒ¨åˆ†ã€‚å®ƒä»¬çš„ä¸åŒåœ¨äºåœºæ™¯çš„å¤æ‚åº¦ã€‚åœ¨ç®€å•å·¥å‚çš„ä½¿ç”¨åœºæ™¯é‡Œï¼Œå¤„ç†çš„å¯¹è±¡æ˜¯ç±»ï¼Œå¹¶ä¸”æ˜¯ä¸€äº›éå¸¸å¥½å¯¹ä»˜çš„ç±»â€”â€”å®ƒä»¬çš„å…±æ€§å®¹æ˜“æŠ½ç¦»ï¼ŒåŒæ—¶å› ä¸ºé€»è¾‘æœ¬èº«æ¯”è¾ƒç®€å•ï¼Œæ•…è€Œä¸è‹›æ±‚ä»£ç å¯æ‰©å±•æ€§ã€‚æŠ½è±¡å·¥å‚æœ¬è´¨ä¸Šå¤„ç†çš„å…¶å®ä¹Ÿæ˜¯ç±»ï¼Œä½†æ˜¯æ˜¯ä¸€å¸®éå¸¸æ£˜æ‰‹ã€ç¹æ‚çš„ç±»ï¼Œè¿™äº›ç±»ä¸­ä¸ä»…èƒ½åˆ’åˆ†å‡ºé—¨æ´¾ï¼Œè¿˜èƒ½åˆ’åˆ†å‡ºç­‰çº§ï¼ŒåŒæ—¶å­˜åœ¨ç€åƒå˜ä¸‡åŒ–çš„æ‰©å±•å¯èƒ½æ€§â€”â€”è¿™ä½¿å¾—æˆ‘ä»¬å¿…é¡»å¯¹å…±æ€§ä½œæ›´ç‰¹åˆ«çš„å¤„ç†ã€ä½¿ç”¨æŠ½è±¡ç±»å»é™ä½æ‰©å±•çš„æˆæœ¬ï¼ŒåŒæ—¶éœ€è¦å¯¹ç±»çš„æ€§è´¨ä½œåˆ’åˆ†ï¼Œäºæ˜¯æœ‰äº†è¿™æ ·çš„å››ä¸ªå…³é”®è§’è‰²ï¼š

- æŠ½è±¡å·¥å‚ï¼ˆæŠ½è±¡ç±»ï¼Œå®ƒä¸èƒ½è¢«ç”¨äºç”Ÿæˆå…·ä½“å®ä¾‹ï¼‰ï¼š ç”¨äºå£°æ˜æœ€ç»ˆç›®æ ‡äº§å“çš„å…±æ€§ã€‚åœ¨ä¸€ä¸ªç³»ç»Ÿé‡Œï¼ŒæŠ½è±¡å·¥å‚å¯ä»¥æœ‰å¤šä¸ªï¼ˆå¤§å®¶å¯ä»¥æƒ³è±¡æˆ‘ä»¬çš„æ‰‹æœºå‚åæ¥è¢«ä¸€ä¸ªæ›´å¤§çš„å‚æ”¶è´­äº†ï¼Œè¿™ä¸ªå‚é‡Œé™¤äº†æ‰‹æœºæŠ½è±¡ç±»ï¼Œè¿˜æœ‰å¹³æ¿ã€æ¸¸æˆæœºæŠ½è±¡ç±»ç­‰ç­‰ï¼‰ï¼Œæ¯ä¸€ä¸ªæŠ½è±¡å·¥å‚å¯¹åº”çš„è¿™ä¸€ç±»çš„äº§å“ï¼Œè¢«ç§°ä¸ºâ€œäº§å“æ—â€ã€‚
- å…·ä½“å·¥å‚ï¼ˆç”¨äºç”Ÿæˆäº§å“æ—é‡Œçš„ä¸€ä¸ªå…·ä½“çš„äº§å“ï¼‰ï¼š ç»§æ‰¿è‡ªæŠ½è±¡å·¥å‚ã€å®ç°äº†æŠ½è±¡å·¥å‚é‡Œå£°æ˜çš„é‚£äº›æ–¹æ³•ï¼Œç”¨äºåˆ›å»ºå…·ä½“çš„äº§å“çš„ç±»ã€‚
- æŠ½è±¡äº§å“ï¼ˆæŠ½è±¡ç±»ï¼Œå®ƒä¸èƒ½è¢«ç”¨äºç”Ÿæˆå…·ä½“å®ä¾‹ï¼‰ï¼š ä¸Šé¢æˆ‘ä»¬çœ‹åˆ°ï¼Œå…·ä½“å·¥å‚é‡Œå®ç°çš„æ¥å£ï¼Œä¼šä¾èµ–ä¸€äº›ç±»ï¼Œè¿™äº›ç±»å¯¹åº”åˆ°å„ç§å„æ ·çš„å…·ä½“çš„ç»†ç²’åº¦äº§å“ï¼ˆæ¯”å¦‚æ“ä½œç³»ç»Ÿã€ç¡¬ä»¶ç­‰ï¼‰ï¼Œè¿™äº›å…·ä½“äº§å“ç±»çš„å…±æ€§å„è‡ªæŠ½ç¦»ï¼Œä¾¿å¯¹åº”åˆ°äº†å„è‡ªçš„æŠ½è±¡äº§å“ç±»ã€‚
- å…·ä½“äº§å“ï¼ˆç”¨äºç”Ÿæˆäº§å“æ—é‡Œçš„ä¸€ä¸ªå…·ä½“çš„äº§å“æ‰€ä¾èµ–çš„æ›´ç»†ç²’åº¦çš„äº§å“ï¼‰ï¼š æ¯”å¦‚æˆ‘ä»¬ä¸Šæ–‡ä¸­å…·ä½“çš„ä¸€ç§æ“ä½œç³»ç»Ÿã€æˆ–å…·ä½“çš„ä¸€ç§ç¡¬ä»¶ç­‰ã€‚


æŠ½è±¡å·¥å‚æ¨¡å¼çš„å®šä¹‰ï¼Œæ˜¯å›´ç»•ä¸€ä¸ªè¶…çº§å·¥å‚åˆ›å»ºå…¶ä»–å·¥å‚ã€‚


## åˆ›å»ºå‹ï¼šå•ä¾‹æ¨¡å¼â€”â€”Vuexçš„æ•°æ®ç®¡ç†å“²å­¦

**ä¿è¯ä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹**ï¼Œè¿™æ ·çš„æ¨¡å¼å°±å«åšå•ä¾‹æ¨¡å¼ã€‚

**å•ä¾‹æ¨¡å¼çš„å®ç°æ€è·¯**

- é™æ€æ–¹æ³•ç‰ˆ

```js
class SingleDog {
    show() {
        console.log('æˆ‘æ˜¯ä¸€ä¸ªå•ä¾‹å¯¹è±¡')
    }
    static getInstance() {
        // åˆ¤æ–­æ˜¯å¦å·²ç»newè¿‡1ä¸ªå®ä¾‹
        if (!SingleDog.instance) {
            // è‹¥è¿™ä¸ªå”¯ä¸€çš„å®ä¾‹ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå…ˆåˆ›å»ºå®ƒ
            SingleDog.instance = new SingleDog()
        }
        // å¦‚æœè¿™ä¸ªå”¯ä¸€çš„å®ä¾‹å·²ç»å­˜åœ¨ï¼Œåˆ™ç›´æ¥è¿”å›
        return SingleDog.instance
    }
}

const s1 = SingleDog.getInstance()
const s2 = SingleDog.getInstance()

// true
s1 === s2
```

**é—­åŒ…ç‰ˆ**

```js
SingleDog.getInstance = (function() {
    // å®šä¹‰è‡ªç”±å˜é‡instanceï¼Œæ¨¡æ‹Ÿç§æœ‰å˜é‡
    let instance = null
    return function() {
        // åˆ¤æ–­è‡ªç”±å˜é‡æ˜¯å¦ä¸ºnull
        if(!instance) {
            // å¦‚æœä¸ºnullåˆ™newå‡ºå”¯ä¸€å®ä¾‹
            instance = new SingleDog()
        }
        return instance
    }
})()
```

## åˆ›å»ºå‹ï¼šå•ä¾‹æ¨¡å¼â€”â€”é¢è¯•çœŸé¢˜æ‰‹æŠŠæ‰‹æ•™å­¦

> å®ç°Storageï¼Œä½¿å¾—è¯¥å¯¹è±¡ä¸ºå•ä¾‹ï¼ŒåŸºäº localStorage è¿›è¡Œå°è£…ã€‚å®ç°æ–¹æ³• setItem(key,value) å’Œ getItem(key)ã€‚

æ€è·¯

æ‹¿åˆ°å•ä¾‹æ¨¡å¼ç›¸å…³çš„é¢è¯•é¢˜ï¼Œå¤§å®¶é¦–å…ˆè¦åšçš„æ˜¯å›å¿†æˆ‘ä»¬ä¸Šä¸ªå°èŠ‚çš„â€œåŸºæœ¬æ€è·¯â€éƒ¨åˆ†â€”â€”è‡³å°‘è¦è®°èµ·æ¥getInstanceæ–¹æ³•å’Œinstanceè¿™ä¸ªå˜é‡æ˜¯å¹²å•¥çš„ã€‚

å…·ä½“å®ç°ä¸Šï¼ŒæŠŠåˆ¤æ–­é€»è¾‘å†™å…¥é™æ€æ–¹æ³•æˆ–è€…æ„é€ å‡½æ•°é‡Œéƒ½æ²¡å…³ç³»ï¼Œæœ€å¥½èƒ½æŠŠé—­åŒ…çš„ç‰ˆæœ¬ä¹Ÿå†™å‡ºæ¥ï¼Œå¤šå¤šç›Šå–„ã€‚

**å®ç°ï¼šé™æ€æ–¹æ³•ç‰ˆ**
```js
// å®šä¹‰Storage
class Storage {
    static getInstance() {
        // åˆ¤æ–­æ˜¯å¦å·²ç»newè¿‡1ä¸ªå®ä¾‹
        if (!Storage.instance) {
            // è‹¥è¿™ä¸ªå”¯ä¸€çš„å®ä¾‹ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå…ˆåˆ›å»ºå®ƒ
            Storage.instance = new Storage()
        }
        // å¦‚æœè¿™ä¸ªå”¯ä¸€çš„å®ä¾‹å·²ç»å­˜åœ¨ï¼Œåˆ™ç›´æ¥è¿”å›
        return Storage.instance
    }
    getItem (key) {
        return localStorage.getItem(key)
    }
    setItem (key, value) {
        return localStorage.setItem(key, value)
    }
}

const storage1 = Storage.getInstance()
const storage2 = Storage.getInstance()

storage1.setItem('name', 'æé›·')
// æé›·
storage1.getItem('name')
// ä¹Ÿæ˜¯æé›·
storage2.getItem('name')

// è¿”å›true
storage1 === storage2
```

**å®ç°ï¼š é—­åŒ…ç‰ˆ**
```js
// å…ˆå®ç°ä¸€ä¸ªåŸºç¡€çš„StorageBaseç±»ï¼ŒæŠŠgetItemå’ŒsetItemæ–¹æ³•æ”¾åœ¨å®ƒçš„åŸå‹é“¾ä¸Š
function StorageBase () {}
StorageBase.prototype.getItem = function (key){
    return localStorage.getItem(key)
}
StorageBase.prototype.setItem = function (key, value) {
    return localStorage.setItem(key, value)
}

// ä»¥é—­åŒ…çš„å½¢å¼åˆ›å»ºä¸€ä¸ªå¼•ç”¨è‡ªç”±å˜é‡çš„æ„é€ å‡½æ•°
const Storage = (function(){
    let instance = null
    return function(){
        // åˆ¤æ–­è‡ªç”±å˜é‡æ˜¯å¦ä¸ºnull
        if(!instance) {
            // å¦‚æœä¸ºnullåˆ™newå‡ºå”¯ä¸€å®ä¾‹
            instance = new StorageBase()
        }
        return instance
    }
})()

// è¿™é‡Œå…¶å®ä¸ç”¨ new Storage çš„å½¢å¼è°ƒç”¨ï¼Œç›´æ¥ Storage() ä¹Ÿä¼šæœ‰ä¸€æ ·çš„æ•ˆæœ 
const storage1 = new Storage()
const storage2 = new Storage()

storage1.setItem('name', 'æé›·')
// æé›·
storage1.getItem('name')
// ä¹Ÿæ˜¯æé›·
storage2.getItem('name')

// è¿”å›true
storage1 === storage2
```

**å®ç°ä¸€ä¸ªå…¨å±€çš„æ¨¡æ€æ¡†**

æè¿°

> å®ç°ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„Modalå¼¹æ¡†


æ€è·¯ï¼š

è¿™é“é¢˜æ¯”è¾ƒç»å…¸ï¼ŒåŸºæœ¬ä¸Šæ‰€æœ‰è®²å•ä¾‹æ¨¡å¼çš„æ–‡ç« éƒ½ä¼šä»¥æ­¤ä¸ºä¾‹ï¼ŒåŒæ—¶å®ƒä¹Ÿæ˜¯æ—©æœŸå•ä¾‹æ¨¡å¼åœ¨å‰ç«¯é¢†åŸŸçš„æœ€é›†ä¸­ä½“ç°ã€‚

ä¸‡å˜ä¸ç¦»å…¶è¸ªï¼Œè®°ä½getInstanceæ–¹æ³•ã€è®°ä½instanceå˜é‡ã€è®°ä½é—­åŒ…å’Œé™æ€æ–¹æ³•ï¼Œè¿™ä¸ªé¢˜é™¤äº†è¦å¤šå†™ç‚¹ HTML å’Œ CSS ä¹‹å¤–ï¼Œå¯¹å¤§å®¶æ¥è¯´å®Œå…¨ä¸æˆé—®é¢˜ã€‚

**å®ç°**

å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š

```js
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>å•ä¾‹æ¨¡å¼å¼¹æ¡†</title>
</head>
<style>
    #modal {
        height: 200px;
        width: 200px;
        line-height: 200px;
        position: fixed;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        border: 1px solid black;
        text-align: center;
    }
</style>
<body>
	<button id='open'>æ‰“å¼€å¼¹æ¡†</button>
	<button id='close'>å…³é—­å¼¹æ¡†</button>
</body>
<script>
    // æ ¸å¿ƒé€»è¾‘ï¼Œè¿™é‡Œé‡‡ç”¨äº†é—­åŒ…æ€è·¯æ¥å®ç°å•ä¾‹æ¨¡å¼
    const Modal = (function() {
    	let modal = null
    	return function() {
            if(!modal) {
            	modal = document.createElement('div')
            	modal.innerHTML = 'æˆ‘æ˜¯ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„Modal'
            	modal.id = 'modal'
            	modal.style.display = 'none'
            	document.body.appendChild(modal)
            }
            return modal
    	}
    })()
    
    // ç‚¹å‡»æ‰“å¼€æŒ‰é’®å±•ç¤ºæ¨¡æ€æ¡†
    document.getElementById('open').addEventListener('click', function() {
        // æœªç‚¹å‡»åˆ™ä¸åˆ›å»ºmodalå®ä¾‹ï¼Œé¿å…ä¸å¿…è¦çš„å†…å­˜å ç”¨;æ­¤å¤„ä¸ç”¨ new Modal çš„å½¢å¼è°ƒç”¨ä¹Ÿå¯ä»¥ï¼Œå’Œ Storage åŒç†
    	const modal = new Modal()
    	modal.style.display = 'block'
    })
    
    // ç‚¹å‡»å…³é—­æŒ‰é’®éšè—æ¨¡æ€æ¡†
    document.getElementById('close').addEventListener('click', function() {
    	const modal = new Modal()
    	if(modal) {
    	    modal.style.display = 'none'
    	}
    })
</script>
</html>
```





# Javascript è®¾è®¡æ¨¡å¼ç³»ç»Ÿè®²è§£ä¸åº”ç”¨

## é¢å‘å¯¹è±¡
é¢å‘å¯¹è±¡ä¸‰è¦ç´ : ç»§æ‰¿ å°è£… å¤šæ€
