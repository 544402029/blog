<!DOCTYPE html>
<html lang="en-US" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.51" />
    <meta name="theme" content="VuePress Theme Hope" />
    <script>var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?87e6dfa24d2735e29aae05a54966e81f";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();</script><title>Node.jsä»é›¶å¼€å‘Web Serveråšå®¢é¡¹ç›® å‰ç«¯æ™‹å‡å…¨æ ˆå·¥ç¨‹å¸ˆå¿…å¤‡ | æ²§æµ·çš„é›¨å­£</title><meta name="description" content="è®°å½•æ—¥å¸¸æ‰€å¾—">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/blog/assets/style.e1dba4be.css">
    <link rel="modulepreload" href="/blog/assets/app.aa7e9e30.js"><link rel="modulepreload" href="/blog/assets/Node.jsä»é›¶å¼€å‘Web Serveråšå®¢é¡¹ç›® å‰ç«¯æ™‹å‡å…¨æ ˆå·¥ç¨‹å¸ˆå¿…å¤‡.html.1f639ef9.js"><link rel="modulepreload" href="/blog/assets/_plugin-vue_export-helper.cdc0426e.js"><link rel="modulepreload" href="/blog/assets/Node.jsä»é›¶å¼€å‘Web Serveråšå®¢é¡¹ç›® å‰ç«¯æ™‹å‡å…¨æ ˆå·¥ç¨‹å¸ˆå¿…å¤‡.html.421251b0.js"><link rel="prefetch" href="/blog/assets/index.html.03f42a18.js"><link rel="prefetch" href="/blog/assets/Koa2æ–°æµªåšå®¢.html.79d49ccb.js"><link rel="prefetch" href="/blog/assets/Node.js_KOA2 ä»0åˆ°1æ‰“é€ è¶…å¥½ç”¨Webæ¡†æ¶ä¸€æ­¥åˆ°ä½ æŒæ¡KOA2æœåŠ¡ç«¯å¼€å‘.html.afce3e65.js"><link rel="prefetch" href="/blog/assets/Vueå…¨å®¶æ¡¶_SSR_Koa2å…¨æ ˆå¼€å‘ç¾å›¢ç½‘.html.fc2b0d45.js"><link rel="prefetch" href="/blog/assets/vueä½¿ç”¨.html.ae47c623.js"><link rel="prefetch" href="/blog/assets/VUEé¡¹ç›®æ„å»ºä¸å¼€å‘å…¥é—¨.html.5b420c34.js"><link rel="prefetch" href="/blog/assets/å¾®ä¿¡å°ç¨‹åº.html.8b035fcd.js"><link rel="prefetch" href="/blog/assets/CSSå¸¸ç”¨ä»£ç ç‰‡æ®µ.html.50d80a72.js"><link rel="prefetch" href="/blog/assets/JSå¸¸ç”¨ä»£ç ç‰‡æ®µ.html.7ff37d85.js"><link rel="prefetch" href="/blog/assets/Git åŸç†è¯¦è§£åŠå®ç”¨æŒ‡å—.html.1d9a19ab.js"><link rel="prefetch" href="/blog/assets/Git.html.0dc9b5a8.js"><link rel="prefetch" href="/blog/assets/HTTPåè®®åŸç†_å®è·µ Webå¼€å‘å·¥ç¨‹å¸ˆå¿…å­¦.html.e8902f71.js"><link rel="prefetch" href="/blog/assets/JavaScript è®¾è®¡æ¨¡å¼æ ¸â¼¼åŸç†ä¸åº”â½¤å®è·µ.html.7dda8a61.js"><link rel="prefetch" href="/blog/assets/JavaScriptæ­£åˆ™è¿·ä½ ä¹¦.html.c969b56a.js"><link rel="prefetch" href="/blog/assets/linuxå‘½ä»¤.html.ea893578.js"><link rel="prefetch" href="/blog/assets/TypeScript å…¥é—¨å®æˆ˜ç¬”è®°.html.860cfb75.js"><link rel="prefetch" href="/blog/assets/TypeScript.html.95ef3162.js"><link rel="prefetch" href="/blog/assets/å‰å°_ä¸­å°é€šç”¨ææ•ˆè§£å†³æ–¹æ¡ˆ.html.aaddce35.js"><link rel="prefetch" href="/blog/assets/åå°é€šç”¨ææ•ˆè§£å†³æ–¹æ¡ˆ.html.ac5fe8de.js"><link rel="prefetch" href="/blog/assets/å›¾è§£HTTP.html.00602da8.js"><link rel="prefetch" href="/blog/assets/æ­£åˆ™è¡¨è¾¾å¼.html.7e4b1c0d.js"><link rel="prefetch" href="/blog/assets/æ·±å…¥ç†è§£ ES6.html.a8c51033.js"><link rel="prefetch" href="/blog/assets/è®¡ç®—æœºç½‘ç»œå¿…çŸ¥å¿…ä¼š.html.5dfe3ab9.js"><link rel="prefetch" href="/blog/assets/é‡å­¦å‰ç«¯.html.5a36eef1.js"><link rel="prefetch" href="/blog/assets/CSS.html.c6d43320.js"><link rel="prefetch" href="/blog/assets/HTML.html.20d4300f.js"><link rel="prefetch" href="/blog/assets/JavaScript.html.90a8cef2.js"><link rel="prefetch" href="/blog/assets/Node.js.html.7bda453d.js"><link rel="prefetch" href="/blog/assets/Vue.html.98d3f868.js"><link rel="prefetch" href="/blog/assets/Vue3.html.39daba74.js"><link rel="prefetch" href="/blog/assets/vueçš„diffç®—æ³•.html.4bf94362.js"><link rel="prefetch" href="/blog/assets/Webpack.html.188b3235.js"><link rel="prefetch" href="/blog/assets/å…¶å®ƒ.html.cfbdca30.js"><link rel="prefetch" href="/blog/assets/åŸºç¡€é¢è¯•é¢˜.html.20a16f1b.js"><link rel="prefetch" href="/blog/assets/ç¬”è¯•é¢˜.html.bf947a00.js"><link rel="prefetch" href="/blog/assets/é€šä¿¡ç±».html.dcc24034.js"><link rel="prefetch" href="/blog/assets/é¢è¯•çœŸé¢˜2022.html.e5e23099.js"><link rel="prefetch" href="/blog/assets/404.html.83136f9a.js"><link rel="prefetch" href="/blog/assets/index.html.8fbc165f.js"><link rel="prefetch" href="/blog/assets/Koa2æ–°æµªåšå®¢.html.e9445183.js"><link rel="prefetch" href="/blog/assets/Node.js_KOA2 ä»0åˆ°1æ‰“é€ è¶…å¥½ç”¨Webæ¡†æ¶ä¸€æ­¥åˆ°ä½ æŒæ¡KOA2æœåŠ¡ç«¯å¼€å‘.html.dc9a7788.js"><link rel="prefetch" href="/blog/assets/Vueå…¨å®¶æ¡¶_SSR_Koa2å…¨æ ˆå¼€å‘ç¾å›¢ç½‘.html.f93b06cd.js"><link rel="prefetch" href="/blog/assets/vueä½¿ç”¨.html.9d012aa6.js"><link rel="prefetch" href="/blog/assets/VUEé¡¹ç›®æ„å»ºä¸å¼€å‘å…¥é—¨.html.1bc068f4.js"><link rel="prefetch" href="/blog/assets/å¾®ä¿¡å°ç¨‹åº.html.28f4353c.js"><link rel="prefetch" href="/blog/assets/CSSå¸¸ç”¨ä»£ç ç‰‡æ®µ.html.fbfa9490.js"><link rel="prefetch" href="/blog/assets/JSå¸¸ç”¨ä»£ç ç‰‡æ®µ.html.087cc315.js"><link rel="prefetch" href="/blog/assets/Git åŸç†è¯¦è§£åŠå®ç”¨æŒ‡å—.html.7cd3f241.js"><link rel="prefetch" href="/blog/assets/Git.html.fc6f97e4.js"><link rel="prefetch" href="/blog/assets/HTTPåè®®åŸç†_å®è·µ Webå¼€å‘å·¥ç¨‹å¸ˆå¿…å­¦.html.a662fda3.js"><link rel="prefetch" href="/blog/assets/JavaScript è®¾è®¡æ¨¡å¼æ ¸â¼¼åŸç†ä¸åº”â½¤å®è·µ.html.5bc4a498.js"><link rel="prefetch" href="/blog/assets/JavaScriptæ­£åˆ™è¿·ä½ ä¹¦.html.db78eced.js"><link rel="prefetch" href="/blog/assets/linuxå‘½ä»¤.html.47f948ba.js"><link rel="prefetch" href="/blog/assets/TypeScript å…¥é—¨å®æˆ˜ç¬”è®°.html.6bde1539.js"><link rel="prefetch" href="/blog/assets/TypeScript.html.b479e7af.js"><link rel="prefetch" href="/blog/assets/å‰å°_ä¸­å°é€šç”¨ææ•ˆè§£å†³æ–¹æ¡ˆ.html.e70279b1.js"><link rel="prefetch" href="/blog/assets/åå°é€šç”¨ææ•ˆè§£å†³æ–¹æ¡ˆ.html.5aa7091c.js"><link rel="prefetch" href="/blog/assets/å›¾è§£HTTP.html.68f5161b.js"><link rel="prefetch" href="/blog/assets/æ­£åˆ™è¡¨è¾¾å¼.html.e557db68.js"><link rel="prefetch" href="/blog/assets/æ·±å…¥ç†è§£ ES6.html.364e4410.js"><link rel="prefetch" href="/blog/assets/è®¡ç®—æœºç½‘ç»œå¿…çŸ¥å¿…ä¼š.html.565306dd.js"><link rel="prefetch" href="/blog/assets/é‡å­¦å‰ç«¯.html.1bbd29b1.js"><link rel="prefetch" href="/blog/assets/CSS.html.85cc1062.js"><link rel="prefetch" href="/blog/assets/HTML.html.25cb5542.js"><link rel="prefetch" href="/blog/assets/JavaScript.html.17110933.js"><link rel="prefetch" href="/blog/assets/Node.js.html.c8b078d6.js"><link rel="prefetch" href="/blog/assets/Vue.html.8acef6e2.js"><link rel="prefetch" href="/blog/assets/Vue3.html.a6d34407.js"><link rel="prefetch" href="/blog/assets/vueçš„diffç®—æ³•.html.0d1e2998.js"><link rel="prefetch" href="/blog/assets/Webpack.html.bbe6fce2.js"><link rel="prefetch" href="/blog/assets/å…¶å®ƒ.html.c29bb570.js"><link rel="prefetch" href="/blog/assets/åŸºç¡€é¢è¯•é¢˜.html.b261506a.js"><link rel="prefetch" href="/blog/assets/ç¬”è¯•é¢˜.html.b20b1436.js"><link rel="prefetch" href="/blog/assets/é€šä¿¡ç±».html.7754765f.js"><link rel="prefetch" href="/blog/assets/é¢è¯•çœŸé¢˜2022.html.8d4168fc.js"><link rel="prefetch" href="/blog/assets/404.html.6d53c135.js"><link rel="prefetch" href="/blog/assets/giscus.15440425.js"><link rel="prefetch" href="/blog/assets/photoswipe.esm.382b1873.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><a href="/blog/" class="brand"><!----><!----><span class="site-name">æ²§æµ·çš„é›¨å­£</span></a><!----></div><div class="navbar-center"><!----><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/blog/%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93/%E9%9D%A2%E8%AF%95%E7%9C%9F%E9%A2%982022.html" class="nav-link" aria-label="é¢è¯•é¢˜åº“"><!---->é¢è¯•é¢˜åº“<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="å¸¸ç”¨ä»£ç ç‰‡æ®µ"><span class="title"><!---->å¸¸ç”¨ä»£ç ç‰‡æ®µ</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/blog/%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/CSS%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5.html" class="nav-link" aria-label="CSSå¸¸ç”¨ä»£ç ç‰‡æ®µ"><!---->CSSå¸¸ç”¨ä»£ç ç‰‡æ®µ<!----></a></li><li class="dropdown-item"><a href="/blog/%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/JS%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5.html" class="nav-link" aria-label="JSå¸¸ç”¨ä»£ç ç‰‡æ®µ"><!---->JSå¸¸ç”¨ä»£ç ç‰‡æ®µ<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="å‰ç«¯ç¬”è®°"><span class="title"><!---->å‰ç«¯ç¬”è®°</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/blog/%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AE%B0/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%20ES6.html" class="nav-link" aria-label="æ·±å…¥ç†è§£ES6"><!---->æ·±å…¥ç†è§£ES6<!----></a></li><li class="dropdown-item"><a href="/blog/%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AE%B0/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F.html" class="nav-link" aria-label="æ­£åˆ™è¡¨è¾¾å¼"><!---->æ­£åˆ™è¡¨è¾¾å¼<!----></a></li><li class="dropdown-item"><a href="/blog/%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AE%B0/JavaScript%E6%AD%A3%E5%88%99%E8%BF%B7%E4%BD%A0%E4%B9%A6.html" class="nav-link" aria-label="JavaScriptæ­£åˆ™è¿·ä½ ä¹¦"><!---->JavaScriptæ­£åˆ™è¿·ä½ ä¹¦<!----></a></li><li class="dropdown-item"><a href="/blog/%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AE%B0/JavaScript%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E6%A0%B8%E2%BC%BC%E5%8E%9F%E7%90%86%E4%B8%8E%E5%BA%94%E2%BD%A4%E5%AE%9E%E8%B7%B5.html" class="nav-link" aria-label="JavaScript è®¾è®¡æ¨¡å¼æ ¸â¼¼åŸç†ä¸åº”â½¤å®è·µ"><!---->JavaScript è®¾è®¡æ¨¡å¼æ ¸â¼¼åŸç†ä¸åº”â½¤å®è·µ<!----></a></li><li class="dropdown-item"><a href="/blog/%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AE%B0/TypeScript.html" class="nav-link" aria-label="TypeScript"><!---->TypeScript<!----></a></li><li class="dropdown-item"><a href="/blog/%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AE%B0/linux%E5%91%BD%E4%BB%A4.html" class="nav-link" aria-label="linuxå‘½ä»¤"><!---->linuxå‘½ä»¤<!----></a></li><li class="dropdown-item"><a href="/blog/%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AE%B0/HTTP%E5%8D%8F%E8%AE%AE%E5%8E%9F%E7%90%86+%E5%AE%9E%E8%B7%B5%20Web%E5%BC%80%E5%8F%91%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%AD%A6.html" class="nav-link" aria-label="HTTPåè®®åŸç†"><!---->HTTPåè®®åŸç†<!----></a></li><li class="dropdown-item"><a href="/blog/%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AE%B0/%E5%9B%BE%E8%A7%A3HTTP.html" class="nav-link" aria-label="å›¾è§£HTTP"><!---->å›¾è§£HTTP<!----></a></li><li class="dropdown-item"><a href="/blog/%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AE%B0/%E5%90%8E%E5%8F%B0%E9%80%9A%E7%94%A8%E6%8F%90%E6%95%88%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88.html" class="nav-link" aria-label="åå°é€šç”¨ææ•ˆè§£å†³æ–¹æ¡ˆ"><!---->åå°é€šç”¨ææ•ˆè§£å†³æ–¹æ¡ˆ<!----></a></li><li class="dropdown-item"><a href="/blog/%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AE%B0/Git.html" class="nav-link" aria-label="Git"><!---->Git<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Vue"><span class="title"><!---->Vue</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/blog/vue/vue%E4%BD%BF%E7%94%A8.html" class="nav-link" aria-label="Vueä½¿ç”¨"><!---->Vueä½¿ç”¨<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="å°ç¨‹åº"><span class="title"><!---->å°ç¨‹åº</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/blog/%E5%B0%8F%E7%A8%8B%E5%BA%8F/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F.html" class="nav-link" aria-label="å¾®ä¿¡å°ç¨‹åº"><!---->å¾®ä¿¡å°ç¨‹åº<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Node.js"><span class="title"><!---->Node.js</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html" class="router-link-active router-link-exact-active nav-link active" aria-label="Node.jsä»é›¶å¼€å‘Web Serveråšå®¢é¡¹ç›®"><!---->Node.jsä»é›¶å¼€å‘Web Serveråšå®¢é¡¹ç›®<!----></a></li><li class="dropdown-item"><a href="/blog/Node.js/Node.js+KOA2%20%E4%BB%8E0%E5%88%B01%E6%89%93%E9%80%A0%E8%B6%85%E5%A5%BD%E7%94%A8Web%E6%A1%86%E6%9E%B6%E4%B8%80%E6%AD%A5%E5%88%B0%E4%BD%8D%20%E6%8E%8C%E6%8F%A1KOA2%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%BC%80%E5%8F%91.html" class="nav-link" aria-label="Node.js+KOA2 ä»0åˆ°1æ‰“é€ è¶…å¥½ç”¨Webæ¡†æ¶ä¸€æ­¥åˆ°ä½"><!---->Node.js+KOA2 ä»0åˆ°1æ‰“é€ è¶…å¥½ç”¨Webæ¡†æ¶ä¸€æ­¥åˆ°ä½<!----></a></li><li class="dropdown-item"><a href="/blog/Node.js/Vue%E5%85%A8%E5%AE%B6%E6%A1%B6+SSR+Koa2%E5%85%A8%E6%A0%88%E5%BC%80%E5%8F%91%E7%BE%8E%E5%9B%A2%E7%BD%91.html" class="nav-link" aria-label="Vueå…¨å®¶æ¡¶+SSR+Koa2å…¨æ ˆå¼€å‘ç¾å›¢ç½‘"><!---->Vueå…¨å®¶æ¡¶+SSR+Koa2å…¨æ ˆå¼€å‘ç¾å›¢ç½‘<!----></a></li><li class="dropdown-item"><a href="/blog/Node.js/Koa2%E6%96%B0%E6%B5%AA%E5%8D%9A%E5%AE%A2.html" class="nav-link" aria-label="Koa2æ–°æµªåšå®¢"><!---->Koa2æ–°æµªåšå®¢<!----></a></li></ul></button></div></div></nav><!----></div><div class="navbar-right"><!----><!----><div class="nav-item"><a class="repo-link" href="https://gitee.com/l544402029/blog" target="_blank" rel="noopener noreferrer" aria-label="gitee"><svg xmlns="http://www.w3.org/2000/svg" class="icon gitee-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="gitee icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm242.97-533.34H482.39a23.7 23.7 0 0 0-23.7 23.7l-.03 59.28c0 13.08 10.59 23.7 23.7 23.7h165.96a23.7 23.7 0 0 1 23.7 23.7v11.85a71.1 71.1 0 0 1-71.1 71.1H375.71a23.7 23.7 0 0 1-23.7-23.7V423.11a71.1 71.1 0 0 1 71.1-71.1h331.8a23.7 23.7 0 0 0 23.7-23.7l.06-59.25a23.73 23.73 0 0 0-23.7-23.73H423.11a177.78 177.78 0 0 0-177.78 177.75v331.83c0 13.08 10.62 23.7 23.7 23.7h349.62a159.99 159.99 0 0 0 159.99-159.99V482.33a23.7 23.7 0 0 0-23.7-23.7z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon creative"></span><span class="title">é¢è¯•é¢˜åº“</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/blog/%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93/%E9%9D%A2%E8%AF%95%E7%9C%9F%E9%A2%982022.html" class="nav-link sidebar-link sidebar-page" aria-label="é¢è¯•çœŸé¢˜2022"><!---->é¢è¯•çœŸé¢˜2022<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93/%E9%80%9A%E4%BF%A1%E7%B1%BB.html" class="nav-link sidebar-link sidebar-page" aria-label="é€šä¿¡ç±»"><!---->é€šä¿¡ç±»<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93/HTML.html" class="nav-link sidebar-link sidebar-page" aria-label="HTML"><!---->HTML<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93/CSS.html" class="nav-link sidebar-link sidebar-page" aria-label="CSS"><!---->CSS<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93/JavaScript.html" class="nav-link sidebar-link sidebar-page" aria-label="JavaScript"><!---->JavaScript<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93/%E7%AC%94%E8%AF%95%E9%A2%98.html" class="nav-link sidebar-link sidebar-page" aria-label="ç¬”è¯•é¢˜"><!---->ç¬”è¯•é¢˜<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93/Vue.html" class="nav-link sidebar-link sidebar-page" aria-label="Vue"><!---->Vue<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93/Vue3.html" class="nav-link sidebar-link sidebar-page" aria-label="Vue3"><!---->Vue3<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93/Webpack.html" class="nav-link sidebar-link sidebar-page" aria-label="Webpack"><!---->Webpack<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93/Node.js.html" class="nav-link sidebar-link sidebar-page" aria-label="Node.js"><!---->Node.js<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93/%E5%85%B6%E5%AE%83.html" class="nav-link sidebar-link sidebar-page" aria-label="å…¶å®ƒ"><!---->å…¶å®ƒ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93/vue%E7%9A%84diff%E7%AE%97%E6%B3%95.html" class="nav-link sidebar-link sidebar-page" aria-label="vueçš„diffç®—æ³•"><!---->vueçš„diffç®—æ³•<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->Node.jsä»é›¶å¼€å‘Web Serveråšå®¢é¡¹ç›® å‰ç«¯æ™‹å‡å…¨æ ˆå·¥ç¨‹å¸ˆå¿…å¤‡</h1><div class="page-info"><!----><!----><span class="date-info" aria-label="Writing DateğŸ“…" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span>September 14, 2022</span><meta property="datePublished" content="2022-09-14T06:06:01.000Z"></span><!----><!----><span class="reading-time-info" aria-label="Reading TimeâŒ›" data-balloon-pos="down" localizeddate="September 14, 2022" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 15 min</span><meta property="timeRequired" content="PT15M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">On This Page</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#node-jsç”¨é€”" class="router-link-active router-link-exact-active toc-link level2">Node.jsç”¨é€”</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#node-jsä»‹ç»" class="router-link-active router-link-exact-active toc-link level2">Node.jsä»‹ç»</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#ä¸‹è½½-å®‰è£…" class="router-link-active router-link-exact-active toc-link level3">ä¸‹è½½ &amp; å®‰è£…</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#node-jså’Œjavascriptçš„åŒºåˆ«" class="router-link-active router-link-exact-active toc-link level3">Node.jså’ŒJavaScriptçš„åŒºåˆ«</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#common-js" class="router-link-active router-link-exact-active toc-link level3">common.js</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#å‰ç«¯ä¸serverç«¯çš„åŒºåˆ«" class="router-link-active router-link-exact-active toc-link level3">å‰ç«¯ä¸Serverç«¯çš„åŒºåˆ«</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#æŠ€æœ¯æ–¹æ¡ˆ" class="router-link-active router-link-exact-active toc-link level2">æŠ€æœ¯æ–¹æ¡ˆ</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#æ¥å£è®¾è®¡" class="router-link-active router-link-exact-active toc-link level3">æ¥å£è®¾è®¡</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#httpæ¦‚è¿°" class="router-link-active router-link-exact-active toc-link level2">httpæ¦‚è¿°</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#æ­å»ºå¼€å‘ç¯å¢ƒ" class="router-link-active router-link-exact-active toc-link level2">æ­å»ºå¼€å‘ç¯å¢ƒ</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#å®‰è£…nodemon" class="router-link-active router-link-exact-active toc-link level3">å®‰è£…nodemon</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#node-jsæ¨¡å—" class="router-link-active router-link-exact-active toc-link level2">Node.jsæ¨¡å—</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#è·å–query" class="router-link-active router-link-exact-active toc-link level3">è·å–query</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#æ–‡ä»¶æ“ä½œ" class="router-link-active router-link-exact-active toc-link level3">æ–‡ä»¶æ“ä½œ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#è·å–æ–‡ä»¶è·¯å¾„" class="router-link-active router-link-exact-active toc-link level3">è·å–æ–‡ä»¶è·¯å¾„</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#æ•°æ®åº“æ“ä½œ" class="router-link-active router-link-exact-active toc-link level2">æ•°æ®åº“æ“ä½œ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#æŸ¥çœ‹æ•°æ®åº“" class="router-link-active router-link-exact-active toc-link level2">æŸ¥çœ‹æ•°æ®åº“</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#ä½¿ç”¨æ•°æ®åº“" class="router-link-active router-link-exact-active toc-link level3">ä½¿ç”¨æ•°æ®åº“</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#node-jsæ“ä½œæ•°æ®åº“" class="router-link-active router-link-exact-active toc-link level2">Node.jsæ“ä½œæ•°æ®åº“</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#cookie" class="router-link-active router-link-exact-active toc-link level2">cookie</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#session" class="router-link-active router-link-exact-active toc-link level2">session</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#redis" class="router-link-active router-link-exact-active toc-link level2">redis</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#rediså®‰è£…" class="router-link-active router-link-exact-active toc-link level3">rediså®‰è£…</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#nignxä»£ç†-å’Œå‰ç«¯è”è°ƒ" class="router-link-active router-link-exact-active toc-link level2">nignxä»£ç†ï¼ˆå’Œå‰ç«¯è”è°ƒï¼‰</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#nignxä»‹ç»" class="router-link-active router-link-exact-active toc-link level3">nignxä»‹ç»</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#è´Ÿè½½å‡è¡¡" class="router-link-active router-link-exact-active toc-link level3">è´Ÿè½½å‡è¡¡</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#å®‰å…¨" class="router-link-active router-link-exact-active toc-link level2">å®‰å…¨</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#sqlæ³¨å…¥" class="router-link-active router-link-exact-active toc-link level3">sqlæ³¨å…¥</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#xssæ”»å‡»" class="router-link-active router-link-exact-active toc-link level3">xssæ”»å‡»</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#å¯†ç åŠ å¯†" class="router-link-active router-link-exact-active toc-link level3">å¯†ç åŠ å¯†</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#ç½‘ç«™è¿è¡Œæµç¨‹å›¾" class="router-link-active router-link-exact-active toc-link level3">ç½‘ç«™è¿è¡Œæµç¨‹å›¾</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#express" class="router-link-active router-link-exact-active toc-link level2">express</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#å®‰è£…" class="router-link-active router-link-exact-active toc-link level3">å®‰è£…</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#ç™»å½•" class="router-link-active router-link-exact-active toc-link level3">ç™»å½•</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#ä½¿ç”¨redis" class="router-link-active router-link-exact-active toc-link level3">ä½¿ç”¨redis</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#è®°å½•æ—¥å¿—" class="router-link-active router-link-exact-active toc-link level3">è®°å½•æ—¥å¿—</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#expressä¸­é—´ä»¶åŸç†" class="router-link-active router-link-exact-active toc-link level3">expressä¸­é—´ä»¶åŸç†</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#koa2" class="router-link-active router-link-exact-active toc-link level2">KOA2</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#async-awaitè¦ç‚¹" class="router-link-active router-link-exact-active toc-link level3">async/awaitè¦ç‚¹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#å®‰è£…-1" class="router-link-active router-link-exact-active toc-link level3">å®‰è£…</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#ç™»å½•-1" class="router-link-active router-link-exact-active toc-link level3">ç™»å½•</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#koa2è®°å½•æ—¥å¿—" class="router-link-active router-link-exact-active toc-link level3">koa2è®°å½•æ—¥å¿—</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#ä¸Šçº¿ä¸é…ç½®" class="router-link-active router-link-exact-active toc-link level2">ä¸Šçº¿ä¸é…ç½®</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Node.js/Node.js%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%8F%91Web%20Server%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%20%E5%89%8D%E7%AB%AF%E6%99%8B%E5%8D%87%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BF%85%E5%A4%87.html#pm2" class="router-link-active router-link-exact-active toc-link level3">pm2</a></li><!----><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="node-jsä»é›¶å¼€å‘web-serveråšå®¢é¡¹ç›®-å‰ç«¯æ™‹å‡å…¨æ ˆå·¥ç¨‹å¸ˆå¿…å¤‡" tabindex="-1"><a class="header-anchor" href="#node-jsä»é›¶å¼€å‘web-serveråšå®¢é¡¹ç›®-å‰ç«¯æ™‹å‡å…¨æ ˆå·¥ç¨‹å¸ˆå¿…å¤‡" aria-hidden="true">#</a> Node.jsä»é›¶å¼€å‘Web Serveråšå®¢é¡¹ç›® å‰ç«¯æ™‹å‡å…¨æ ˆå·¥ç¨‹å¸ˆå¿…å¤‡</h1><h2 id="node-jsç”¨é€”" tabindex="-1"><a class="header-anchor" href="#node-jsç”¨é€”" aria-hidden="true">#</a> Node.jsç”¨é€”</h2><p>Node.jsæ˜¯ä¸€ä¸ªJavaScriptçš„è¿è¡Œç¯å¢ƒã€‚å®ƒä¸€èˆ¬æœ‰ä¸¤ä¸ªç”¨é€”ï¼š</p><ol><li>è¿è¡Œåœ¨æœåŠ¡å™¨ï¼Œ ä½œä¸ºweb server</li><li>è¿è¡Œåœ¨æœ¬åœ°ï¼Œ ä½œä¸ºæ‰“åŒ…ã€æ„å»ºå·¥å…·ã€‚</li></ol><h2 id="node-jsä»‹ç»" tabindex="-1"><a class="header-anchor" href="#node-jsä»‹ç»" aria-hidden="true">#</a> Node.jsä»‹ç»</h2><h3 id="ä¸‹è½½-å®‰è£…" tabindex="-1"><a class="header-anchor" href="#ä¸‹è½½-å®‰è£…" aria-hidden="true">#</a> ä¸‹è½½ &amp; å®‰è£…</h3><h4 id="æ™®é€šå®‰è£…" tabindex="-1"><a class="header-anchor" href="#æ™®é€šå®‰è£…" aria-hidden="true">#</a> æ™®é€šå®‰è£…</h4><p>ç›´æ¥åœ¨å®˜ç½‘ä¸‹è½½å³å¯<a href="https://nodejs.org/en/" target="_blank" rel="noopener noreferrer">Node.jså®˜ç½‘<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h4 id="ä½¿ç”¨nvm" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨nvm" aria-hidden="true">#</a> ä½¿ç”¨nvm</h4><p>nvmï¼Œ node.jsç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼Œ å¯åˆ‡æ¢å¤šä¸ªnode.jsç‰ˆæœ¬</p><ul><li>mac os ä½¿ç”¨<code>brew install nvm</code>è¿›è¡Œå®‰è£…</li></ul><p>åœ¨<a href="https://brew.sh" target="_blank" rel="noopener noreferrer">brewå®˜ç½‘<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>å¤åˆ¶é¦–é¡µä»£ç ï¼Œ å»å‘½ä»¤è¡Œç²˜è´´è¿è¡Œã€‚å®‰è£…å®Œä¹‹åæ‰§è¡Œ<code>brew install nvm</code>ã€‚</p><ul><li>windows, github ä¸­æœç´¢nvm-windowsï¼Œ æœ‰ä¸‹è½½åœ°å€ã€‚</li></ul><h5 id="nvmå‘½ä»¤-å·¥ä½œä¸­å¸¸ç”¨" tabindex="-1"><a class="header-anchor" href="#nvmå‘½ä»¤-å·¥ä½œä¸­å¸¸ç”¨" aria-hidden="true">#</a> nvmå‘½ä»¤(å·¥ä½œä¸­å¸¸ç”¨)ï¼š</h5><p>nvm(node virsion menage) å¯ä»¥å®‰è£…å¤šä¸ªnodeï¼Œå¹¶åˆ‡æ¢</p><p><code>nvm list</code> æŸ¥çœ‹æ‰€æœ‰nodeç‰ˆæœ¬</p><p><code>nvm install v10.13.0</code> å®‰è£…æŒ‡å®šç‰ˆæœ¬</p><p><code>nvm use --delete-prefix 10.13.0</code> åˆ‡æ¢åˆ°æŒ‡å®šç‰ˆæœ¬</p><p>å¦‚æœæœ¬åœ°å®‰è£…äº†node éœ€è¦åˆ æ‰åé‡æ–°è£…nvm å†å®‰è£…nodeï¼Œè¿™æ ·æ‰èƒ½æ§åˆ¶å…¨éƒ¨ç‰ˆæœ¬ å¦åˆ™ä¼šæŠ¥é”™ï¼š node v--delete-prefix.0.0 (64-bit) is not installed.</p><h3 id="node-jså’Œjavascriptçš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#node-jså’Œjavascriptçš„åŒºåˆ«" aria-hidden="true">#</a> Node.jså’ŒJavaScriptçš„åŒºåˆ«</h3><p>é¦–å…ˆå†™JavaScriptå’ŒNode.jså¿…é¡»éµå®ˆECMAScriptè§„èŒƒã€‚</p><p>ECMAScriptå®šä¹‰äº†è¯­æ³•ï¼Œ ä¿å­˜å˜é‡å®šä¹‰ï¼Œ å¾ªç¯ï¼Œ åˆ¤æ–­ï¼Œ å‡½æ•°ï¼Œ åŸå‹å’ŒåŸå‹é“¾ï¼Œ ä½œç”¨åŸŸå’Œé—­åŒ…ï¼Œ å¼‚æ­¥ã€‚</p><p>ä½†æ˜¯ECMAScriptåªå®šä¹‰äº†è¯­æ³•ï¼Œä¸èƒ½è¿›è¡Œä»¥ä¸‹æ“ä½œï¼š</p><ul><li>ä¸èƒ½æ“ä½œDOMï¼Œ ä¸èƒ½ç›‘å¬äº‹ä»¶ï¼Œ ä¸èƒ½å‘é€ajaxè¯·æ±‚</li><li>ä¸èƒ½å¤„ç†httpè¯·æ±‚ï¼Œ ä¸èƒ½æ“ä½œæ–‡ä»¶</li><li>å³ï¼Œ åªæœ‰ECMAScriptï¼Œ å‡ ä¹åšä¸äº†ä»»ä½•å®é™…çš„é¡¹ç›®ã€‚</li></ul><h4 id="javascript" tabindex="-1"><a class="header-anchor" href="#javascript" aria-hidden="true">#</a> JavaScript</h4><p>ä½¿ç”¨äº†ECMAScriptè¯­æ³•è§„èŒƒï¼Œ å¤–åŠ Web APIï¼Œ ç¼ºä¸€ä¸å¯ã€‚WEB APIåŒ…æ‹¬DOMæ“ä½œï¼Œ BOMæ“ä½œï¼Œ äº‹ä»¶ç»‘å®šï¼Œ Ajaxç­‰ã€‚ ä¸¤è€…ç»“åˆï¼Œ å³å¯å®Œæˆ æµè§ˆå™¨ç«¯çš„ä»»ä½•æ“ä½œã€‚</p><h4 id="node-js" tabindex="-1"><a class="header-anchor" href="#node-js" aria-hidden="true">#</a> Node.js</h4><p>ä½¿ç”¨äº†ECMAScriptè¯­æ³•è§„èŒƒï¼Œ å¤–åŠ Node.js APIï¼Œ ç¼ºä¸€ä¸å¯ã€‚Node.js APIåŒ…æ‹¬http, å¤„ç†æ–‡ä»¶ç­‰ã€‚å…·ä½“å‚è€ƒ<a href="http://node.js.cn/api/" target="_blank" rel="noopener noreferrer">Node.js API <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ä¸¤è€…ç»“åˆï¼Œ å³å¯å®Œæˆ Serverç«¯çš„ä»»ä½•æ“ä½œã€‚</p><h3 id="common-js" tabindex="-1"><a class="header-anchor" href="#common-js" aria-hidden="true">#</a> common.js</h3><p>nodeåº”ç”¨ç”±æ¨¡å—ç»„æˆï¼Œé‡‡ç”¨çš„commonjsæ¨¡å—è§„èŒƒã€‚æ¯ä¸€ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œæ‹¥æœ‰è‡ªå·±ç‹¬ç«‹çš„ä½œç”¨åŸŸï¼Œå˜é‡ï¼Œä»¥åŠæ–¹æ³•ç­‰ï¼Œå¯¹å…¶ä»–çš„æ¨¡å—éƒ½ä¸å¯è§ã€‚CommonJSè§„èŒƒè§„å®šï¼Œæ¯ä¸ªæ¨¡å—å†…éƒ¨ï¼Œmoduleå˜é‡ä»£è¡¨å½“å‰æ¨¡å—ã€‚è¿™ä¸ªå˜é‡æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒçš„exportså±æ€§ï¼ˆå³module.exportsï¼‰æ˜¯å¯¹å¤–çš„æ¥å£ã€‚åŠ è½½æŸä¸ªæ¨¡å—ï¼Œå…¶å®æ˜¯åŠ è½½è¯¥æ¨¡å—çš„module.exportså±æ€§ã€‚requireæ–¹æ³•ç”¨äºåŠ è½½æ¨¡å—ã€‚</p><h4 id="ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨" aria-hidden="true">#</a> ä½¿ç”¨</h4><p>a.js</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>function add (a,b){
  return a+b
}

module.exports = add
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>b.js</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>const add = require(&#39;./a&#39;)

const sum = add(10,20)

console.log(sum);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å¼•å…¥å¤šä¸ª" tabindex="-1"><a class="header-anchor" href="#å¼•å…¥å¤šä¸ª" aria-hidden="true">#</a> å¼•å…¥å¤šä¸ª</h4><p>a.js</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>function add (a,b){
  return a+b
}

function mul (a,b){
  return a*b
}


module.exports = {
  add,
  mul
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>b.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span>add<span class="token punctuation">,</span>mul<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./a&#39;</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> sum <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> sum2 <span class="token operator">=</span> <span class="token function">mul</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sum<span class="token punctuation">,</span>sum2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å‰ç«¯ä¸serverç«¯çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#å‰ç«¯ä¸serverç«¯çš„åŒºåˆ«" aria-hidden="true">#</a> å‰ç«¯ä¸Serverç«¯çš„åŒºåˆ«</h3><p>serverå¼€å‘å’Œå‰ç«¯å¼€å‘çš„åŒºåˆ«ï¼š è¯­è¨€å’Œç¯å¢ƒå·¥ç¨‹æ€ç»´çš„ä¸åŒã€‚</p><p>å‰ç«¯å¼€å‘ï¼š æ¯ä¸ªå®¢æˆ·ç«¯ å¯¹æ¥ä¸€ä¸ªserverç«¯ï¼ˆå¯èƒ½ä¸æ­¢ä¸€å°æœåŠ¡å™¨ï¼Œå¯èƒ½æ˜¯ä¸€ä¸ªé›†ç¾¤ï¼‰ã€‚å‰ç«¯å¼€å‘çš„ä»£ç æ˜¯é€šè¿‡serverç«¯ä¸‹è½½åˆ°æœ¬åœ°ï¼ˆå®¢æˆ·ç«¯ï¼‰ï¼Œç„¶ååœ¨å®¢æˆ·ç«¯æµè§ˆå™¨æ‰§è¡Œçš„ã€‚</p><p>serverå¼€å‘ï¼š å®ƒè¦æ‰¿æ¥å¾ˆå¤šå®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå¾ˆå¤šè¯·æ±‚åˆ°äº†serverç«¯ï¼Œç„¶åserverç«¯å»å¤„ç†ã€‚</p><p>æ€»ç»“çš„åŒºåˆ«ï¼š</p><ol><li>æœåŠ¡ç¨³å®šæ€§ï¼ˆæœåŠ¡ç«¯ä¸å¯æŒ‚ï¼‰</li><li>è€ƒè™‘å†…å­˜å’ŒCPU ï¼ˆä¼˜åŒ–ã€æ‰©å±•ï¼‰</li><li>æ—¥å¿—è®°å½•ï¼ˆç¨‹åºè¿è¡Œçš„æŠ¥å‘Šï¼Œæ²¡æœ‰è¿™ä¸ªï¼Œå¯¹ç¨‹åºè¿è¡Œç›¸å½“äºç›²äººä¸€æ ·~ï¼‰</li><li>å®‰å…¨</li><li>é›†ç¾¤å’ŒæœåŠ¡æ‹†åˆ†</li></ol><h2 id="æŠ€æœ¯æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#æŠ€æœ¯æ–¹æ¡ˆ" aria-hidden="true">#</a> æŠ€æœ¯æ–¹æ¡ˆ</h2><h3 id="æ¥å£è®¾è®¡" tabindex="-1"><a class="header-anchor" href="#æ¥å£è®¾è®¡" aria-hidden="true">#</a> æ¥å£è®¾è®¡</h3><p><img src="https://blog-picgo-typora.oss-cn-hangzhou.aliyuncs.com/image-20220805084925165.png" alt="image-20220805084925165"></p><h2 id="httpæ¦‚è¿°" tabindex="-1"><a class="header-anchor" href="#httpæ¦‚è¿°" aria-hidden="true">#</a> httpæ¦‚è¿°</h2><p>é—®é¢˜ï¼š ä»æµè§ˆå™¨è¾“å…¥urlåˆ°é¡µé¢æ¸²æŸ“éƒ½å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</p><p>DNSè§£æè·å–åˆ°ipåœ°å€ -&gt; å»ºç«‹tcpè¿æ¥ -&gt; å‘é€httpè¯·æ±‚ -&gt; serveræ¥å—httpè¯·æ±‚ï¼Œå¹¶å¤„ç†è¯·æ±‚è¿”å›æ•°æ® -&gt; å®¢æˆ·ç«¯æ¥å—æ•°æ®å¹¶å¤„ç†æ•°æ®ï¼ˆæ¸²æŸ“é¡µé¢ï¼Œæ‰§è¡Œjsï¼‰ ä¸­é—´æ¶‰åŠåˆ°åˆ°IPåè®®ï¼ŒARPåè®®ï¼ŒOSPFåè®®</p><ol><li>IPåè®®ï¼šæŒ‡å®šå‡ºå‘åœ°ï¼ˆä½ çš„pcï¼‰å’Œç›®çš„åœ°ï¼ˆæœåŠ¡å™¨ï¼‰</li><li>ARPåè®®ï¼šæ‰¾åˆ°æ‰€æœ‰è·¯å¾„</li><li>OSPFåè®®ï¼šæ‰¾åˆ°æœ€ä¼˜è·¯å¾„è¯·æ±‚èµ„æº</li></ol><h2 id="æ­å»ºå¼€å‘ç¯å¢ƒ" tabindex="-1"><a class="header-anchor" href="#æ­å»ºå¼€å‘ç¯å¢ƒ" aria-hidden="true">#</a> æ­å»ºå¼€å‘ç¯å¢ƒ</h2><h3 id="å®‰è£…nodemon" tabindex="-1"><a class="header-anchor" href="#å®‰è£…nodemon" aria-hidden="true">#</a> å®‰è£…nodemon</h3><p>nodemon å¯ä»¥å®ç°è‡ªåŠ¨é‡å¯</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>npm i nodemon cross-env -D 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å®‰è£…å®Œæˆä¹‹ååœ¨package.jsonçš„scriptå‘½ä»¤ä¸­è¾“å…¥ä»¥ä¸‹å†…å®¹</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&quot;dev&quot;:&quot;cross-env NODE_ENV=dev nodemon ./bin/www.js&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¹‹åç›´æ¥åœ¨å‘½ä»¤è¡Œè¾“å…¥<code>npm run dev</code>å³å¯ã€‚</p><p><code>NODE_ENV=dev</code>æŒ‡çš„æ˜¯æ‰§è¡Œç¯èŠ‚æ˜¯å¼€å‘ç¯å¢ƒã€‚åœ¨ä»£ç ä¸­å¯ä»¥é€šè¿‡<code>p<wbr>rocess.env.NODE_ENV</code>è·å–åˆ°ç¯å¢ƒå˜é‡ã€‚</p><h2 id="node-jsæ¨¡å—" tabindex="-1"><a class="header-anchor" href="#node-jsæ¨¡å—" aria-hidden="true">#</a> Node.jsæ¨¡å—</h2><h3 id="è·å–query" tabindex="-1"><a class="header-anchor" href="#è·å–query" aria-hidden="true">#</a> è·å–query</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>const querystring = require(&#39;querystring&#39;)
req.query = querystring.parse(url.split(&#39;?&#39;)[0])
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ–‡ä»¶æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#æ–‡ä»¶æ“ä½œ" aria-hidden="true">#</a> æ–‡ä»¶æ“ä½œ</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>const fs = require(&#39;fs&#39;)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="è·å–æ–‡ä»¶è·¯å¾„" tabindex="-1"><a class="header-anchor" href="#è·å–æ–‡ä»¶è·¯å¾„" aria-hidden="true">#</a> è·å–æ–‡ä»¶è·¯å¾„</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>const path = require(&#39;path&#39;)
const fileName = path.resolve(__dirname,&#39;file&#39;,&#39;a.json&#39;)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>__diranameï¼šå½“å‰ç›®å½•ï¼Œ fileï¼šæ–‡ä»¶å¤¹ï¼Œ a.jsonï¼šæ–‡ä»¶</p><h2 id="æ•°æ®åº“æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#æ•°æ®åº“æ“ä½œ" aria-hidden="true">#</a> æ•°æ®åº“æ“ä½œ</h2><p>é¦–å…ˆéœ€è¦ä¸‹è½½ MySql å’Œ SQLWorkBenchã€‚</p><p>ä»¥ä¸‹ä¸ºSQLWorkBenchå†…æ“ä½œã€‚</p><h2 id="æŸ¥çœ‹æ•°æ®åº“" tabindex="-1"><a class="header-anchor" href="#æŸ¥çœ‹æ•°æ®åº“" aria-hidden="true">#</a> æŸ¥çœ‹æ•°æ®åº“</h2><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>show databases;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://blog-picgo-typora.oss-cn-hangzhou.aliyuncs.com/image-20220805085004732.png" alt="image-20220805085004732"></p><h3 id="ä½¿ç”¨æ•°æ®åº“" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨æ•°æ®åº“" aria-hidden="true">#</a> ä½¿ç”¨æ•°æ®åº“</h3><p>æˆ‘ä»¬æƒ³è¦æ“ä½œæ•°æ®åº“é¦–å…ˆè¦æ‰§è¡Œï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>use blog;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>blogæŒ‡çš„æ˜¯æ•°æ®åº“åç§°ã€‚</p><p>æ˜¾ç¤ºæ‰€æœ‰æ•°æ®åº“è¡¨ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>show tables;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="å¢åŠ æ•°æ®" tabindex="-1"><a class="header-anchor" href="#å¢åŠ æ•°æ®" aria-hidden="true">#</a> å¢åŠ æ•°æ®</h4><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>insert into users(username,`password`,realname) values(&#39;zhangsan&#39;,&#39;123&#39;,&#39;å¼ ä¸‰&#39;);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¦‚æœé‡åˆ°SQLå…³é”®å­—ï¼Œ æˆ‘ä»¬å¯ä»¥ç”¨åå¼•å·æŠŠå®ƒåŒ…èµ·æ¥ï¼Œ å¦‚:password</p><h4 id="æŸ¥è¯¢æ•°æ®åº“" tabindex="-1"><a class="header-anchor" href="#æŸ¥è¯¢æ•°æ®åº“" aria-hidden="true">#</a> æŸ¥è¯¢æ•°æ®åº“</h4><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>-- select * from users;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>selectæŒ‡çš„å°±æ˜¯æŸ¥è¯¢ï¼Œ <code>*</code>æŒ‡çš„æ˜¯æˆ‘æŠŠæ‰€æœ‰çš„åˆ—éƒ½æŸ¥å‡ºæ¥ã€‚ useræŒ‡çš„æ˜¯è¡¨åã€‚</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>select id,username from users;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¹Ÿå¯ä»¥åªæŸ¥è¯¢idï¼Œå’Œusernameã€‚</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>select * from users where username=&#39;zhangsan&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¢åŠ äº†æŸ¥è¯¢æ¡ä»¶ï¼Œ åªæŸ¥è¯¢usernameæ˜¯å¼ ä¸‰çš„æ•°æ®ã€‚</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>select * from users where username=&#39;zhangsan&#39; and `password`=&#39;123&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æŸ¥è¯¢username=&#39;zhangsan&#39;å¹¶ä¸”password=&#39;123&#39; çš„æ•°æ®ã€‚</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>select * from users where username=&#39;zhangsan&#39; or `password`=&#39;123&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æŸ¥è¯¢username=&#39;zhangsan&#39;æˆ–è€…password=&#39;123&#39; çš„æ•°æ®ã€‚</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>select * from users where username like &#39;%zhang%&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åªæ¨¡ç³ŠåŒ¹é…æŸ¥è¯¢usernameå­—æ®µæœ‰zhangçš„æ•°æ®ã€‚</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>select * from users where password like &#39;%1%&#39; order by id;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ ¹æ®idæ­£åºæ’åºã€‚</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>select * from users where password like &#39;%1%&#39; order by id desc;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ ¹æ®idå€’åºæ’åºã€‚</p><h4 id="æ›´æ–°æ•°æ®åº“" tabindex="-1"><a class="header-anchor" href="#æ›´æ–°æ•°æ®åº“" aria-hidden="true">#</a> æ›´æ–°æ•°æ®åº“</h4><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>update users set realname=&#39;æå››2&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æŠŠusersè¡¨çš„æ‰€æœ‰realnameéƒ½æ”¹æˆæå››2ã€‚</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>update users set realname=&#39;æå››2&#39; where username=&#39;lisi&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æŠŠusersè¡¨username=lisiçš„ç”¨æˆ·realnameæ”¹æˆæå››2</p><p>å¦‚æœé‡åˆ°æŠ¥é”™å¯ä»¥æ‰§è¡Œä»¥ä¸‹è¯­å¥ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>SET SQL_SAFE_UPDATES=0;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="åˆ é™¤æ•°æ®" tabindex="-1"><a class="header-anchor" href="#åˆ é™¤æ•°æ®" aria-hidden="true">#</a> åˆ é™¤æ•°æ®</h4><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>delete from users where username=&#39;lisi&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åˆ é™¤usernameä¸ºlisiçš„æ•°æ®ã€‚</p><p>ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬ä¸ä¼šçœŸæ­£çš„åˆ é™¤æ•°æ®ï¼Œ è€Œæ˜¯åœ¨è¡¨æ ¼å¢åŠ ä¸€ä¸ªå­—æ®µ<code>state</code>ï¼Œ ç”¨å®ƒæ¥è¿›è¡Œåˆ¤æ–­æ˜¯å¦æœ‰æ•°æ®ï¼Œ ä¹Ÿå°±æ˜¯ä¸€ä¸ªè½¯åˆ é™¤çš„æŠ€æœ¯ã€‚ï¼ˆstateè®¾ç½®ä¸º0æˆ–1æ§åˆ¶æ˜¯å¦åˆ é™¤ï¼‰ ä¸€èˆ¬å®ƒçš„é»˜è®¤å€¼è®¾ä¸º1ã€‚</p><p>è¿™æ ·åšçš„å¥½å¤„å°±æ˜¯å®ƒæ˜¯å¯ä»¥æ¢å¤çš„ã€‚</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>select * from users where state=&#39;1&#39;;
update users set state=&#39;0&#39; where username=&#39;lisi&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>å°†username=lisiçš„æ•°æ®stateæ”¹ä¸ºäº†0ï¼Œ ç¬¬ä¸€å¥æ˜¯æŸ¥è¯¢usersè¡¨å†…stateä¸º1çš„æ•°æ®ã€‚</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>select * from users where state&lt;&gt;&#39;0&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¦‚æœæˆ‘ä»¬æƒ³è¦ä½¿ç”¨ä¸ç­‰äºï¼Œ è¯·ä½¿ç”¨<code>&lt;&gt;</code>å°äºå·å’Œå¤§äºå·ç»„åˆï¼Œå¦‚ä¸Šã€‚</p><h2 id="node-jsæ“ä½œæ•°æ®åº“" tabindex="-1"><a class="header-anchor" href="#node-jsæ“ä½œæ•°æ®åº“" aria-hidden="true">#</a> Node.jsæ“ä½œæ•°æ®åº“</h2><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦å®‰è£…ä¸€ä¸ªæ’ä»¶</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>npm i mysql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>index.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> mysql <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;mysql&#39;</span><span class="token punctuation">)</span>

<span class="token comment">//åˆ›å»ºè¿æ¥å¯¹è±¡</span>
<span class="token keyword">const</span> con <span class="token operator">=</span> mysql<span class="token punctuation">.</span><span class="token function">createConnection</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">&#39;localhost&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">&#39;root&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">&#39;yutong9909&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token string">&#39;3306&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">database</span><span class="token operator">:</span> <span class="token string">&#39;blog&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//å¼€å§‹è¿æ¥</span>
con<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">//æ‰§è¡Œ sql è¯­å¥</span>
<span class="token keyword">const</span> sql <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">insert into blogs(title,content,createtime,author) values(&#39;æ ‡é¢˜C&#39;,&#39;å†…å®¹C&#39;,1583031695880,&#39;zhangsan&#39;);</span><span class="token template-punctuation string">`</span></span>
con<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//å…³é—­è¿æ¥</span>
con<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://blog-picgo-typora.oss-cn-hangzhou.aliyuncs.com/image-20220805085046072.png" alt="image-20220805085046072"></p><p>è¿æ¥æ•°æ®åº“æŠ¥é”™</p><p>è§£å†³æ–¹æ¡ˆï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>use blog;
alter user &#39;root&#39;@&#39;localhost&#39; identified with mysql_native_password by &#39;123456&#39;;
flush privileges;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="cookie" tabindex="-1"><a class="header-anchor" href="#cookie" aria-hidden="true">#</a> cookie</h2><h4 id="ä»€ä¹ˆæ˜¯cookie" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯cookie" aria-hidden="true">#</a> ä»€ä¹ˆæ˜¯cookieï¼Ÿ</h4><ul><li>å­˜å‚¨åœ¨æµè§ˆå™¨çš„ä¸€æ®µå­—ç¬¦ä¸²ï¼ˆæœ€å¤§5kbï¼‰</li><li>è·¨åŸŸä¸å…±äº«</li><li>æ ¼å¼å¦‚ K1=V1;K2=V2;K3=V3;å› æ­¤å¯ä»¥å­˜å‚¨ç»“æ„åŒ–æ•°æ®ã€‚</li><li>æ¯æ¬¡å‘é€httpè¯·æ±‚ï¼Œ ä¼šå°†è¯·æ±‚åŸŸçš„cookieä¸€èµ·å‘é€ç»™server</li><li>serverå¯ä»¥ä¿®æ”¹cookieå¹¶è¿”å›ç»™</li><li>æµè§ˆå™¨ä¸­ä¹Ÿå¯ä»¥é€šè¿‡JavaScriptä¿®æ”¹cookieï¼ˆæœ‰é™åˆ¶ï¼‰</li></ul><p><img src="https://blog-picgo-typora.oss-cn-hangzhou.aliyuncs.com/image-20220805085114341.png" alt="image-20220805085114341"></p><h4 id="cookieå’Œtokençš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#cookieå’Œtokençš„åŒºåˆ«" aria-hidden="true">#</a> cookieå’Œtokençš„åŒºåˆ«ï¼Ÿ</h4><p>cookie æ˜¯ http åè®®çš„è§„èŒƒï¼Œä¸€ç§æ ‡å‡†ï¼Œå³ä¸€ä¸ªå·¥å…·ï¼Œä½ æ‹¿ cookie å¹²å˜›éƒ½å¯ä»¥ï¼Œä¾‹å¦‚è¯¾ç¨‹ä¸­æˆ‘ä»¬ç”¨ cookie å®ç°ç™»å½•ã€‚token æ˜¯ä¸€ç§ä¸šåŠ¡ä¸Šçš„æœ¯è¯­ï¼Œå¯ä»¥ç†è§£ä¸ºå¯†ç ã€ç§˜é’¥ç­‰ï¼Œä¸åŒä¸šåŠ¡ä¸­ token çš„æ ¼å¼ã€ä½¿ç”¨æ–¹å¼ä¹Ÿä¸åŒã€‚ä½ å¯ä»¥ä½¿ç”¨å¾ˆå¤šç§æ–¹å¼æ¥å®ç° token ï¼Œä¾‹å¦‚ cookie ï¼Œhttp header ï¼Œurl å‚æ•°ä¸­ï¼Œæˆ–è€… req.body ä¸­ã€‚</p><h4 id="æ“ä½œcookie" tabindex="-1"><a class="header-anchor" href="#æ“ä½œcookie" aria-hidden="true">#</a> æ“ä½œcookie</h4><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>res.setHeader(&#39;Set-Cookie&#39;,`username=${data.username}; path=/; httpOnly; expires=${getCookieExpires()}`)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>path=/ä»£è¡¨åœ¨æ‰€æœ‰è·¯ç”±ä¸‹éƒ½å¯ä»¥è®¿é—®cookie. httpOnlyè¡¨ç¤ºæ­¤cookieä¸å¯åœ¨å®¢æˆ·ç«¯æ“ä½œã€‚ expires=${getCookieExpires()}è®¾ç½®äº†cookieè¿‡æœŸæ—¶é—´</p><p>è¿‡æœŸæ—¶é—´å‡½æ•°</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>//è·å– cookie çš„è¿‡æœŸæ—¶é—´
const getCookieExpires = () =&gt; {
	const d = new Date()
	d.setTime(d.getTime() + (24 * 60 * 60 * 1000))
	return d.toGMTString()
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="session" tabindex="-1"><a class="header-anchor" href="#session" aria-hidden="true">#</a> session</h2><p>å¦‚æœæˆ‘ä»¬åªç”¨cookieå°±ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œ cookieå­˜å‚¨çš„ä¸ªäººä¿¡æ¯éƒ½æ˜¯æš´éœ²åœ¨å¤–é¢çš„ï¼Œ åˆ«äººå¯ä»¥çœ‹åˆ°ã€‚ï¼ˆå¦‚ä½ çš„æ‰‹æœºå·ï¼Œ é‚®ç®±ï¼Œç”¨æˆ·åï¼Œå¯†ç ç­‰ï¼‰ã€‚è€Œä¸”ä½ å…¶ä»–å¹³å°çš„ç”¨æˆ·ååŠå¯†ç ä¹Ÿæœ‰å¯èƒ½æ˜¯ä¸€æ ·çš„ï¼Œ è¿™æ ·çš„è¯ä¸€æ—¦æ³„éœ²å°±ååˆ†å±é™©ã€‚</p><p>ç¬¬äºŒä¸ªcookieå­˜å‚¨çš„ä¿¡æ¯ä¹Ÿæ˜¯éå¸¸æ˜¾ç°çš„ï¼Œ å¤§çº¦ä¸º4kbã€‚å¤ªå¤šçš„ä¿¡æ¯ä¹Ÿæœ‰å¯èƒ½æ”¾ä¸å¼€ã€‚</p><h4 id="å¦‚ä½•è§£å†³" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•è§£å†³" aria-hidden="true">#</a> å¦‚ä½•è§£å†³ï¼Ÿ</h4><p>æˆ‘ä»¬å¯ä»¥åœ¨cookieä¸­å­˜å‚¨useridï¼Œuseridå¯ä»¥æ˜¯ä¸€ä¸ªéšæœºæ•°ä¹‹ç±»çš„æ•°å­—ï¼Œ éå¸¸éå¸¸ä¸ç›¸å…³çš„æ•°å­—ã€‚ serverç«¯å¯¹åº”usernameã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªå¯¹è±¡æˆ–è€…é›†åˆå»æŸ¥ï¼Œ æŸ¥å‡ºè¿™ä¸ªç”¨æˆ·åæ¥ã€‚</p><p><code>session</code> æ˜¯ä¸€ä¸ªç»Ÿç§°ï¼Œ å®ƒçš„è§£å†³æ–¹æ¡ˆå°±æ˜¯ç”¨serverç«¯å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ã€‚</p><p><img src="https://blog-picgo-typora.oss-cn-hangzhou.aliyuncs.com/image-20220805085144884.png" alt="image-20220805085144884"></p><p>å¦‚ä¸Šå›¾ï¼š æˆ‘ä»¬åªåœ¨æµè§ˆå™¨ä¸­æ”¾ä¸€ä¸ªæ¯«æ— æ„ä¹‰çš„useridå°±å¯ä»¥äº†ï¼Œ å³ä¾¿ç”¨æˆ·è¢«æˆªè·ï¼Œ ä»–ä¹Ÿä¸çŸ¥é“useridæ˜¯ä»€ä¹ˆæ„æ€ã€‚ç„¶ååˆ°æˆ‘ä»¬çš„serverä¸­å‘¢ï¼Ÿ é¦–å…ˆæˆ‘ä»¬çš„serveræ˜¯è¶³å¤Ÿå®‰å…¨çš„ï¼Œå› ä¸ºä»–ä¸ä¼šæ¥å›ä¼ è¾“ã€‚ åªè¦åšå¥½è¶³å¤Ÿçš„é™åˆ¶ï¼Œ å®‰å…¨å°±å¯ä»¥äº†ã€‚serverç«¯çš„ç©ºé—´ä¹Ÿæ˜¯è¶³å¤Ÿå¤§çš„ï¼Œ é‡Œé¢å¯ä»¥å­˜å‚¨å¾ˆå¤šçš„ä¿¡æ¯ã€‚</p><h2 id="redis" tabindex="-1"><a class="header-anchor" href="#redis" aria-hidden="true">#</a> redis</h2><p>åªç”¨sessionä¼šå‡ºç°ä¸¤ä¸ªé—®é¢˜ï¼š</p><ol><li>è¿›ç¨‹å†…å­˜æœ‰é™ï¼Œ è®¿é—®é‡è¿‡å¤§ï¼Œ å†…å­˜æ¿€å¢æ€ä¹ˆåŠï¼Ÿ</li><li>æ­£å¼ä¸Šçº¿è¿è¡Œæ˜¯å¤šçº¿ç¨‹ï¼Œ è¿›ç¨‹ä¹‹é—´å†…å­˜æ— æ³•å…±äº«</li></ol><h4 id="è§£å†³æ–¹æ¡ˆradis" tabindex="-1"><a class="header-anchor" href="#è§£å†³æ–¹æ¡ˆradis" aria-hidden="true">#</a> è§£å†³æ–¹æ¡ˆradis</h4><ul><li>web server æœ€å¸¸ç”¨çš„ç¼“å­˜æ•°æ®åº“ï¼Œ æ•°æ®å­˜æ”¾åœ¨å†…å­˜ä¸­</li><li>ç›¸æ¯” mysqlï¼Œ è®¿é—®é€Ÿåº¦å¿«ï¼ˆå†…å­˜å’Œç¡¬ç›˜ä¸æ˜¯ä¸€ä¸ªæ•°é‡çº§çš„ï¼‰</li><li>ä½†æ˜¯æˆæœ¬æ›´é«˜ï¼Œ å¯å­˜å‚¨çš„æ•°æ®é‡æ›´å°ï¼ˆå†…å­˜çš„ç¡¬ä¼¤ï¼‰</li><li>å°†web server å’Œ redis æ‹†åˆ†ä¸ºä¸¤ä¸ªå•ç‹¬çš„æœåŠ¡</li><li>åŒæ–¹éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œ éƒ½æ˜¯å¯æ‰©å±•çš„ï¼ˆä¾‹å¦‚éƒ½æ‰©å±•æˆé›†ç¾¤ï¼‰</li><li>ï¼ˆåŒ…æ‹¬ mysql ï¼Œ ä¹Ÿæ˜¯ä¸€ä¸ªå•ç‹¬çš„æœåŠ¡ï¼Œ ä¹Ÿå¯æ‰©å±•ï¼‰</li></ul><p><img src="https://blog-picgo-typora.oss-cn-hangzhou.aliyuncs.com/image-20220805085202784.png" alt="image-20220805085202784"></p><h4 id="ä¸ºä½•sessioné€‚åˆç”¨-redis" tabindex="-1"><a class="header-anchor" href="#ä¸ºä½•sessioné€‚åˆç”¨-redis" aria-hidden="true">#</a> ä¸ºä½•sessioné€‚åˆç”¨ redis?</h4><ul><li>session è®¿é—®é¢‘ç¹ï¼Œ å¯¹æ€§èƒ½è¦æ±‚æé«˜ã€‚</li><li>session å¯ä¸è€ƒè™‘æ–­ç”µä¸¢å¤±æ•°æ®çš„é—®é¢˜ï¼ˆå†…å­˜çš„ç¡¬ä¼¤ï¼‰</li><li>session æ•°æ®é‡ä¸ä¼šå¤ªå¤§ï¼ˆç›¸æ¯”äºmysqlä¸­å­˜å‚¨çš„æ•°æ®ï¼‰</li></ul><h4 id="ä¸ºä½•ç½‘ç«™æ•°æ®ä¸é€‚åˆç”¨redis" tabindex="-1"><a class="header-anchor" href="#ä¸ºä½•ç½‘ç«™æ•°æ®ä¸é€‚åˆç”¨redis" aria-hidden="true">#</a> ä¸ºä½•ç½‘ç«™æ•°æ®ä¸é€‚åˆç”¨redisï¼Ÿ</h4><ul><li>æ“ä½œé¢‘ç‡ä¸æ˜¯å¤ªé«˜ï¼ˆç›¸æ¯”äºsessionæ“ä½œï¼‰</li><li>æ–­ç”µä¸èƒ½ä¸¢å¤±ï¼Œ å¿…é¡»ä¿ç•™</li><li>æ•°æ®é‡å¤ªå¤§ï¼Œ å†…å­˜æˆæœ¬å¤ªé«˜</li></ul><h3 id="rediså®‰è£…" tabindex="-1"><a class="header-anchor" href="#rediså®‰è£…" aria-hidden="true">#</a> rediså®‰è£…</h3><p>https://www.runoob.com/redis/redis-install.html</p><p>å¯å‚è€ƒæ­¤ç½‘ç«™å®‰è£…é…ç½®ã€‚</p><h4 id="å¯åŠ¨" tabindex="-1"><a class="header-anchor" href="#å¯åŠ¨" aria-hidden="true">#</a> å¯åŠ¨</h4><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>redis-server.exe
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="node-jsè¿æ¥redis" tabindex="-1"><a class="header-anchor" href="#node-jsè¿æ¥redis" aria-hidden="true">#</a> Node.jsè¿æ¥redis</h4><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦å®‰è£…ä¸€ä¸ªredisåŒ…ã€‚</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>npm i redis --save
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="nignxä»£ç†-å’Œå‰ç«¯è”è°ƒ" tabindex="-1"><a class="header-anchor" href="#nignxä»£ç†-å’Œå‰ç«¯è”è°ƒ" aria-hidden="true">#</a> nignxä»£ç†ï¼ˆå’Œå‰ç«¯è”è°ƒï¼‰</h2><p>ä¸€èˆ¬å‰ç«¯çš„æ¥å£å·ä¼šä¸serveræ¥å£å¹¶ä¸ä¸€æ ·ï¼Œ è¿™æ—¶å€™æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ¥å£è¿›è¡Œä»£ç†ï¼Œ ä½¿ä»–ä»¬è®¿é—®ç›¸åŒçš„æ¥å£ã€‚</p><h3 id="nignxä»‹ç»" tabindex="-1"><a class="header-anchor" href="#nignxä»‹ç»" aria-hidden="true">#</a> nignxä»‹ç»</h3><ul><li>é«˜æ€§èƒ½çš„webæœåŠ¡å™¨ï¼Œ å¼€æºå…è´¹</li><li>ä¸€èˆ¬ç”¨äºåšé™æ€æœåŠ¡ï¼Œè´Ÿè½½å‡è¡¡</li><li>è¿˜æœ‰åå‘ä»£ç†</li></ul><h4 id="ä»€ä¹ˆå«åšé™æ€æœåŠ¡å‘¢" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆå«åšé™æ€æœåŠ¡å‘¢" aria-hidden="true">#</a> ä»€ä¹ˆå«åšé™æ€æœåŠ¡å‘¢ï¼Ÿ</h4><p>æ¯”å¦‚è¯´æˆ‘ä»¬åšäº†ä¸€ä¸ªCDNï¼Œ å°±æ˜¯é‚£ç§ç½‘ä¸Šæ”¾å›¾ç‰‡ï¼Œæ”¾cssæ–‡ä»¶ï¼Œæ”¾jsæ–‡ä»¶ï¼Œ æˆ–è€…æ”¾é™æ€çš„é›†ç¾¤æ–‡ä»¶ï¼Œ htmlæ–‡ä»¶ã€‚åªè¦æ˜¯æœåŠ¡ç«¯ä¸éœ€è¦è§£æç›´æ¥è¿”å›é‚£ç§é™æ€æ–‡ä»¶éƒ½å¯ä»¥ç”¨nginxåšä¸€ä¸ªé«˜æ€§èƒ½çš„é™æ€æœåŠ¡ã€‚</p><h3 id="è´Ÿè½½å‡è¡¡" tabindex="-1"><a class="header-anchor" href="#è´Ÿè½½å‡è¡¡" aria-hidden="true">#</a> è´Ÿè½½å‡è¡¡</h3><p>æ¯”å¦‚è¯´æˆ‘ä»¬æœ‰ä¸€ä¸ªserverçš„é›†ç¾¤ï¼Œé›†ç¾¤æœ‰5å°æœºå™¨ã€‚å…¶ä¸­ä¸€å°æ˜¯ä¸»æœºå™¨ï¼Œæµé‡éƒ½åœ¨ä¸»æœºå™¨ä¸Šã€‚å‰©ä¸‹çš„é‚£å‡ å°æ€ä¹ˆå»å‡åˆ†æµé‡ï¼Œæ€ä¹ˆå»åˆ†æ‘Šï¼Œ æ€ä¹ˆè®©æ¯ä¸ªæœºå™¨èƒ½å¹³æ‘Šå„ç§æµé‡ã€‚ä»¥è‡³äºæˆ‘ä»¬æ•´ä¸ªé›†ç¾¤çš„è´Ÿè½½èƒ½åˆ°æœ€é«˜ã€‚è¿™ä¹Ÿå¯ä»¥é€šè¿‡nginxé…ç½®ã€‚ å®ƒå†…éƒ¨çš„ä¸€ä¸ªæ¨¡å—å¯ä»¥åšåˆ°è¿™äº›ã€‚å®ƒå¯ä»¥åšä¸€ä¸ªå…¥å£ï¼Œ æµé‡æ¥äº†å®ƒåˆ†é…åˆ°ä¸åŒçš„æœºå™¨ä¸Šå»ï¼Œå¹³å‡åˆ†é…ã€‚</p><p><img src="https://blog-picgo-typora.oss-cn-hangzhou.aliyuncs.com/image-20220805085222095.png" alt="image-20220805085222095"></p><h4 id="åå‘ä»£ç†" tabindex="-1"><a class="header-anchor" href="#åå‘ä»£ç†" aria-hidden="true">#</a> åå‘ä»£ç†</h4><p>æ‰€è°“åå‘ä»£ç†å°±æ˜¯å®ƒæ˜¯å¯¹å®¢æˆ·ç«¯ä¸å¯è§çš„ä»£ç†ï¼Œå°±å«åå‘ä»£ç†ã€‚</p><p>serverç«¯å…¨éƒ¨æ¶µç›–äº†ï¼Œå®¢æˆ·ç«¯æ§åˆ¶ä¸äº†ï¼Œå¯¹å®¢æˆ·ç«¯æ¥è¯´å®ƒæ˜¯ä¸€ä¸ªé»‘ç›’ï¼Œè¿™æ ·å°±å«åšåå‘ä»£ç†ã€‚</p><h4 id="æ­£å‘ä»£ç†" tabindex="-1"><a class="header-anchor" href="#æ­£å‘ä»£ç†" aria-hidden="true">#</a> æ­£å‘ä»£ç†</h4><p>å’Œåå‘ä»£ç†ç›¸åçš„æ˜¯æ­£å‘ä»£ç†ï¼Œ æ¯”å¦‚æˆ‘ä»¬å…¬å¸çš„å†…ç½‘ï¼Œ æˆ‘ä»¬åœ¨å®¶é‡Œè®¿é—®ä¸äº†ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æœ¬åœ°è£…ä¸€ä¸ªä»£ç†å·¥å…·ï¼Œç„¶åæ‰èƒ½è®¿é—®ã€‚è¿™å±äºä¸€ä¸ªæ­£å‘ä»£ç†ã€‚æµè§ˆå™¨å®¢æˆ·ç«¯èƒ½å¤Ÿæ§åˆ¶çš„ä»£ç†ã€‚</p><h4 id="nginxä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#nginxä½¿ç”¨" aria-hidden="true">#</a> nginxä½¿ç”¨</h4><p>é¦–å…ˆéœ€è¦è¿›è¡Œå®‰è£…ï¼Œ <a href="http://nginx.org/en/download.html" target="_blank" rel="noopener noreferrer">niginxï¼šä¸‹è½½<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>æµ‹è¯•é…ç½®æ–‡ä»¶æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>nginx -t
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¯åŠ¨nginx</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>start nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>é‡å¯nginx</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>nginx.exe -s reload
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åœæ­¢</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>nginx -s stop
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>é‡æ–°æ‰“å¼€æ—¥å¿—æ–‡ä»¶</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>nginx.exe -s reopen
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æŸ¥çœ‹nginxç‰ˆæœ¬</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>nginx -v
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h5 id="é…ç½®" tabindex="-1"><a class="header-anchor" href="#é…ç½®" aria-hidden="true">#</a> é…ç½®</h5><p>æ‰“å¼€nginx-1.16.1\conf\nginx.confæ–‡ä»¶è¿›è¡Œé…ç½®</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>	    location / {
            proxy_pass: http://localhost:8001;
        }
		location /api/ {
			proxy_pass: http://lcoalhost:8000;
			proxy_set_header HOST $host;
		}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>/è¡¨ç¤ºæ ¹ç›®å½•ï¼Œ ä»£ç†åˆ°8001ã€‚ 8001æ˜¯å‰ç«¯ç«¯å£ /apiæ ‡è¯†apiæ¥å£ ä»£ç†åˆ°8000. 8000æ˜¯serverç«¯ç«¯å£</p><p>åç«¯ç«¯å£ä»£ç†éœ€è¦æŠŠhostä¼ è¿›å»ï¼Œ å› ä¸ºæ­¤æ—¶ä»–çš„hostä¸ä¸€æ ·äº†ã€‚</p><p>æ­¤æ—¶åœ¨è®¿é—®http://localhost:8080/ï¼ˆå‰ç«¯ï¼‰å’Œ http://localhost:8080/api/blog/listï¼ˆserverç«¯ï¼‰å°±å¯ä»¥äº†</p><h2 id="å®‰å…¨" tabindex="-1"><a class="header-anchor" href="#å®‰å…¨" aria-hidden="true">#</a> å®‰å…¨</h2><h3 id="sqlæ³¨å…¥" tabindex="-1"><a class="header-anchor" href="#sqlæ³¨å…¥" aria-hidden="true">#</a> sqlæ³¨å…¥</h3><p>æœ€åŸå§‹ï¼Œæœ€ç®€å•çš„æ”»å‡»ï¼Œ ä»æœ‰äº†web2.0å°±æœ‰äº†sqlæ³¨å…¥æ”»å‡»ã€‚</p><p>æ”»å‡»æ–¹å¼ï¼š è¾“å…¥ä¸€ä¸ªsqlç‰‡æ®µï¼Œ æœ€ç»ˆæ‹¼æ¥æˆä¸€æ®µæ”»å‡»ä»£ç </p><p>é¢„é˜²æªæ–½ï¼š ä½¿ç”¨mysqlçš„escape å‡½æ•°å¤„ç†è¾“å…¥å†…å®¹å³å¯</p><p>å¦‚ä¸‹ï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> mysql <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;mysql&#39;</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    exec<span class="token punctuation">,</span>
    <span class="token literal-property property">escape</span><span class="token operator">:</span> mysql<span class="token punctuation">.</span>escape
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½¿ç”¨ï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> exec<span class="token punctuation">,</span> escape <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;../db/mysql&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">login</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">username<span class="token punctuation">,</span> password</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    username <span class="token operator">=</span> <span class="token function">escape</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span>
    password <span class="token operator">=</span> <span class="token function">escape</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span>
    <span class="token keyword">const</span> sql <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
        select username, realname from users where username=&#39;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>username<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&#39; and password=&#39;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>password<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&#39;
    </span><span class="token template-punctuation string">`</span></span>
    <span class="token keyword">return</span> <span class="token function">exec</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">rows</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> rows<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    login
<span class="token punctuation">}</span>
</code></pre><div class="highlight-lines"><div class="highlight-line">Â </div><br><div class="highlight-line">Â </div><div class="highlight-line">Â </div><br><br><br><br><br><br><br><br><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="xssæ”»å‡»" tabindex="-1"><a class="header-anchor" href="#xssæ”»å‡»" aria-hidden="true">#</a> xssæ”»å‡»</h3><p>æ‰€è°“xssæ”»å‡»æŒ‡çš„å°±æ˜¯åœ¨ç½‘é¡µä¸­å†™å…¥ä¸€æ®µjsä»£ç ä»¥è·å–ç”¨æˆ·ä¿¡æ¯ã€‚</p><p>å¦‚æˆ‘æ–°å»ºäº†ä¸€ç¯‡åšå®¢ï¼Œ åœ¨åšå®¢å†…å®¹ä¸­æœ‰ä»¥ä¸‹ä¸€æ®µjsä»£ç ï¼Œ</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&lt;script&gt;console.log(document.cookie);&lt;/script&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç„¶åæˆ‘åˆ›å»ºæˆåŠŸåï¼Œ åˆ«äººçœ‹åˆ°è¿™ç¯‡åšå®¢æˆ‘å°±èƒ½è·å–å®ƒçš„cookieä¿¡æ¯ï¼Œ å¹¶å‘é€åˆ°æˆ‘çš„æœåŠ¡å™¨ã€‚</p><h4 id="é¢„é˜²" tabindex="-1"><a class="header-anchor" href="#é¢„é˜²" aria-hidden="true">#</a> é¢„é˜²</h4><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦å®‰è£…ä¸€ä¸ªæ’ä»¶</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>npm i xss
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç›´æ¥åœ¨ä»£ç ä¸­å¼•å…¥ä½¿ç”¨</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>const xss = require(&#39;xss&#39;)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä½¿ç”¨ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>title = xss(escape(title)) 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¯ä»¥å…ˆä½¿ç”¨xssååœ¨ä½¿ç”¨escapeå‡½æ•°ã€‚</p><h3 id="å¯†ç åŠ å¯†" tabindex="-1"><a class="header-anchor" href="#å¯†ç åŠ å¯†" aria-hidden="true">#</a> å¯†ç åŠ å¯†</h3><ul><li>ä¸‡ä¸€æ•°æ®åº“è¢«æ”»ç ´ï¼Œ æœ€ä¸åº”è¯¥æ³„éœ²çš„å°±æ˜¯ç”¨æˆ·ä¿¡æ¯ã€‚</li><li>æ”»å‡»æ–¹å¼ï¼š è·å–ç”¨æˆ·åå’Œå¯†ç ï¼Œ å†å»å°è¯•ç™»å½•å…¶ä»–ç³»ç»Ÿ</li><li>é¢„é˜²æªæ–½ï¼š å°†å¯†ç åŠ å¯†ï¼Œ å³ä¾¿æ‹¿åˆ°å¯†ç ä¹Ÿä¸çŸ¥é“æ˜æ–‡</li></ul><p>cryp.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> crypto <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;crypto&#39;</span><span class="token punctuation">)</span>

<span class="token comment">//å¯†åŒ™</span>
<span class="token keyword">const</span> <span class="token constant">SECRET_KEY</span> <span class="token operator">=</span> <span class="token string">&#39;WJiol_8776#&#39;</span>

<span class="token comment">//md5 åŠ å¯†</span>
<span class="token keyword">function</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token parameter">content</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> md5 <span class="token operator">=</span> crypto<span class="token punctuation">.</span><span class="token function">createHash</span><span class="token punctuation">(</span><span class="token string">&#39;md5&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> md5<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">digest</span><span class="token punctuation">(</span><span class="token string">&#39;hex&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">//åŠ å¯†å‡½æ•°</span>
<span class="token keyword">function</span> <span class="token function">genPassword</span><span class="token punctuation">(</span><span class="token parameter">password</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">password=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>password<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;key=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">SECRET_KEY</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
    <span class="token keyword">return</span> <span class="token function">md5</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    genPassword
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç™»å½•æ—¶ä½¿ç”¨ï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> genPassword <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;../utils/cryp&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//ç”ŸæˆåŠ å¯†å¯†ç </span>
password <span class="token operator">=</span> <span class="token function">genPassword</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span>
password <span class="token operator">=</span> <span class="token function">escape</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token comment">//é˜²æ­¢xssæ”»å‡»</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç½‘ç«™è¿è¡Œæµç¨‹å›¾" tabindex="-1"><a class="header-anchor" href="#ç½‘ç«™è¿è¡Œæµç¨‹å›¾" aria-hidden="true">#</a> ç½‘ç«™è¿è¡Œæµç¨‹å›¾</h3><p><img src="https://blog-picgo-typora.oss-cn-hangzhou.aliyuncs.com/image-20220805085249591.png" alt="image-20220805085249591"></p><h2 id="express" tabindex="-1"><a class="header-anchor" href="#express" aria-hidden="true">#</a> express</h2><h3 id="å®‰è£…" tabindex="-1"><a class="header-anchor" href="#å®‰è£…" aria-hidden="true">#</a> å®‰è£…</h3><p>é¦–å…ˆéœ€è¦å®‰è£…è„šæ‰‹æ¶</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>npm i express-generator -g
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åˆ›å»ºé¡¹ç›®ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>express blog-express
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿›å…¥ç›®å½•å®‰è£…npmåŒ…</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>cd blog-express
npm i
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯åŠ¨</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>npm start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="ç™»å½•" tabindex="-1"><a class="header-anchor" href="#ç™»å½•" aria-hidden="true">#</a> ç™»å½•</h3><p>ä½¿ç”¨ express-session å’Œ connect-redis</p><p>req.sessionä¿å­˜ç™»å½•ä¿¡æ¯ï¼Œ ç™»é™†æ ¡éªŒåšæˆ express ä¸­é—´ä»¶</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>npm i express-session
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="ä½¿ç”¨-1" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨-1" aria-hidden="true">#</a> ä½¿ç”¨</h4><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>const session = require(&#39;express-session&#39;);

app.use(session({
  secret: &#39;WJiol#23123_&#39;,
  cookie: {
    // path: &#39;/&#39;,  //é»˜è®¤é…ç½®
    // httpOnly: true,    //é»˜è®¤é…ç½®
    maxAge: 24 * 60 * 60 * 1000
  }
}))
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ä½¿ç”¨redis" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨redis" aria-hidden="true">#</a> ä½¿ç”¨redis</h3><p>é¦–å…ˆå®‰è£…ä»¥ä¸‹ä¸¤ä¸ªæ’ä»¶</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>npm i redis connect-redis --save
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>app.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> session <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;express-session&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> RedisStore <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;connect-redis&#39;</span><span class="token punctuation">)</span><span class="token punctuation">(</span>session<span class="token punctuation">)</span>

<span class="token keyword">const</span> redisClient <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./db/redis&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> sessionStore <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RedisStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">client</span><span class="token operator">:</span> redisClient
<span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">secret</span><span class="token operator">:</span> <span class="token string">&#39;WJiol#23123_&#39;</span><span class="token punctuation">,</span><span class="token comment">//ç§˜é’¥ï¼Œä¸å¯æš´éœ²</span>
  <span class="token literal-property property">resave</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token literal-property property">saveUninitialized</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">cookie</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">maxAge</span><span class="token operator">:</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">store</span><span class="token operator">:</span> sessionStore<span class="token comment">//rediså­˜å‚¨</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="highlight-lines"><br><div class="highlight-line">Â </div><div class="highlight-line">Â </div><div class="highlight-line">Â </div><div class="highlight-line">Â </div><div class="highlight-line">Â </div><br><br><br><br><br><br><br><div class="highlight-line">Â </div><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>redis.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> redis <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;redis&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token constant">REDIS_CONF</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;../conf/db&#39;</span><span class="token punctuation">)</span>

<span class="token comment">//åˆ›å»ºå®¢æˆ·ç«¯</span>
<span class="token keyword">const</span> redisClient <span class="token operator">=</span>  redis<span class="token punctuation">.</span><span class="token function">createClient</span><span class="token punctuation">(</span><span class="token constant">REDIS_CONF</span><span class="token punctuation">.</span>port<span class="token punctuation">,</span> <span class="token constant">REDIS_CONF</span><span class="token punctuation">.</span>host<span class="token punctuation">)</span>
redisClient<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;error&#39;</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> redisClient
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="è®°å½•æ—¥å¿—" tabindex="-1"><a class="header-anchor" href="#è®°å½•æ—¥å¿—" aria-hidden="true">#</a> è®°å½•æ—¥å¿—</h3><p>ä½¿ç”¨è„šæ‰‹æ¶æ¨èçš„morgan</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>const ENV = p<wbr>rocess.env.NODE_ENV
if (ENV !== &#39;production&#39;) {
  //å¼€å‘æµ‹è¯•ç¯å¢ƒ
  app.use(logger(&#39;dev&#39;));
} else {
  // çº¿ä¸Šç¯å¢ƒ
  const logFileName = path.join(__dirname,&#39;logs&#39;,&#39;access.log&#39;)
  const writeStream = fs.createWriteStream(logFileName, {
    flags: &#39;a&#39;
  })
  app.use(logger(&#39;combined&#39;, {
    stream: writeStream
  }));
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="expressä¸­é—´ä»¶åŸç†" tabindex="-1"><a class="header-anchor" href="#expressä¸­é—´ä»¶åŸç†" aria-hidden="true">#</a> expressä¸­é—´ä»¶åŸç†</h3><p><img src="https://blog-picgo-typora.oss-cn-hangzhou.aliyuncs.com/image-20220805085316017.png" alt="image-20220805085316017"></p><h2 id="koa2" tabindex="-1"><a class="header-anchor" href="#koa2" aria-hidden="true">#</a> KOA2</h2><h3 id="async-awaitè¦ç‚¹" tabindex="-1"><a class="header-anchor" href="#async-awaitè¦ç‚¹" aria-hidden="true">#</a> async/awaitè¦ç‚¹</h3><ol><li>await åé¢å¯ä»¥è¿½åŠ  promiseå¯¹è±¡ï¼Œ è·å– resolve çš„å€¼</li><li>await å¿…é¡»åŒ…è£¹åœ¨ async å‡½æ•°é‡Œé¢</li><li>async å‡½æ•°æ‰§è¡Œè¿”å›çš„ä¹Ÿæ˜¯ä¸€ä¸ªpromiseå¯¹è±¡</li><li>try-catch æˆªè· promise ä¸­ reject çš„å€¼</li></ol><h3 id="å®‰è£…-1" tabindex="-1"><a class="header-anchor" href="#å®‰è£…-1" aria-hidden="true">#</a> å®‰è£…</h3><p>é¦–å…ˆå®‰è£…è„šæ‰‹æ¶å·¥å…·</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>npm i koa-generator -g
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>koa2 blog-koa2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="ç™»å½•-1" tabindex="-1"><a class="header-anchor" href="#ç™»å½•-1" aria-hidden="true">#</a> ç™»å½•</h3><p>åŸºäº koa-generic-session å’Œ koa-redis</p><p>éœ€è¦å®‰è£…3ä¸ªæ’ä»¶</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>npm i koa-generic-session koa-redis redis
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>app.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> session <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;koa-generic-session&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> redisStore <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;koa-redis&#39;</span><span class="token punctuation">)</span>

<span class="token comment">//session é…ç½®</span>
app<span class="token punctuation">.</span>keys <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;WJiol#23123_&#39;</span><span class="token punctuation">]</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">//é…ç½®cookie</span>
  <span class="token literal-property property">cookie</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">httpOnly</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">maxAge</span><span class="token operator">:</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">//é…ç½® redis</span>
  <span class="token literal-property property">store</span><span class="token operator">:</span> <span class="token function">redisStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">all</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">REDIS_CONF</span><span class="token punctuation">.</span>host<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">REDIS_CONF</span><span class="token punctuation">.</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// routes</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>index<span class="token punctuation">.</span><span class="token function">routes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> index<span class="token punctuation">.</span><span class="token function">allowedMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>users<span class="token punctuation">.</span><span class="token function">routes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> users<span class="token punctuation">.</span><span class="token function">allowedMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>blog<span class="token punctuation">.</span><span class="token function">routes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> blog<span class="token punctuation">.</span><span class="token function">allowedMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">routes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">allowedMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>sessionä¸€å®šè¦åœ¨routeså‰è¿›è¡Œé…ç½®</p><h3 id="koa2è®°å½•æ—¥å¿—" tabindex="-1"><a class="header-anchor" href="#koa2è®°å½•æ—¥å¿—" aria-hidden="true">#</a> koa2è®°å½•æ—¥å¿—</h3><p>å®‰è£…æ’ä»¶</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>npm i koa-morgan --save
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¼•å…¥</p><p>app.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> morgan <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;koa-morgan&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>app.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token constant">ENV</span> <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">ENV</span> <span class="token operator">!==</span> <span class="token string">&#39;production&#39;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">//å¼€å‘æµ‹è¯•ç¯å¢ƒ</span>
  app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">morgan</span><span class="token punctuation">(</span><span class="token string">&#39;dev&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token comment">//çº¿ä¸Šç¯å¢ƒ</span>
  <span class="token keyword">const</span> logFileName <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">&#39;logs&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;access.log&#39;</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> writeStream <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span>logFileName<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">flags</span><span class="token operator">:</span> <span class="token string">&#39;a&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">morgan</span><span class="token punctuation">(</span><span class="token string">&#39;combined&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">stream</span><span class="token operator">:</span> writeStream
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ä¸Šçº¿ä¸é…ç½®" tabindex="-1"><a class="header-anchor" href="#ä¸Šçº¿ä¸é…ç½®" aria-hidden="true">#</a> ä¸Šçº¿ä¸é…ç½®</h2><h3 id="pm2" tabindex="-1"><a class="header-anchor" href="#pm2" aria-hidden="true">#</a> pm2</h3><h4 id="ä¸‹è½½å®‰è£…" tabindex="-1"><a class="header-anchor" href="#ä¸‹è½½å®‰è£…" aria-hidden="true">#</a> ä¸‹è½½å®‰è£…</h4><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>npm install pm2 -g
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æŸ¥çœ‹ç‰ˆæœ¬</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>pm2 --version
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="å¸¸ç”¨å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#å¸¸ç”¨å‘½ä»¤" aria-hidden="true">#</a> å¸¸ç”¨å‘½ä»¤</h4><p>å¤šç§å¯åŠ¨æ–¹å¼ï¼Œ åé¢è·Ÿé…ç½®æ–‡ä»¶</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>pm2 start ...
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>pm2è¿›ç¨‹åˆ—è¡¨</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>pm2 list
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>é‡å¯è¿›ç¨‹</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>pm2 restart 0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æˆ–è€…</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>pm2 restart app
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åé¢è·Ÿidæˆ–è€…è¿›ç¨‹å</p><p>åœæ­¢è¿›ç¨‹</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>pm2 stop app/id
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åˆ é™¤è¿›ç¨‹</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>pm2 delete app/id
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æŸ¥çœ‹åŸºæœ¬ä¿¡æ¯</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>pm2 info app/id
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æŸ¥çœ‹è¿›ç¨‹æ—¥å¿—</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>pm2 log app/id
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç›‘æ§cpuå’Œå†…å­˜ä¿¡æ¯</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>pm2 monit app/id
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="å¸¸ç”¨é…ç½®" tabindex="-1"><a class="header-anchor" href="#å¸¸ç”¨é…ç½®" aria-hidden="true">#</a> å¸¸ç”¨é…ç½®</h4><p>pm2.conf.json</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{
    &quot;apps&quot;: {
        &quot;name&quot;: &quot;pm2-test-server&quot;,
        &quot;script&quot;: &quot;bin/www&quot;,
        &quot;watch&quot;: true,
        &quot;ignore_watch&quot;: [
            &quot;node_modules&quot;,
            &quot;logs&quot;
        ],
        &quot;instances&quot;: 4,
        &quot;error_file&quot;: &quot;logs/err.log&quot;,
        &quot;out_file&quot;: &quot;logs/out.log&quot;,
        &quot;log_date_format&quot;: &quot;YYYY-MM-DD HH:mm:ss&quot;
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>name: pm2-test-server appåç§°</p><p>script: app.js å¯åŠ¨æ–‡ä»¶</p><p>watch: true ä¸Šçº¿è‡ªåŠ¨é‡å¯ã€‚ å»ºè®®è®¾ç½®ä¸ºfalseï¼Œ å†è‡ªå·±æ‰‹åŠ¨é‡å¯</p><p>innore_watch ï¼š [ &quot;logs&quot; ] å³ä½¿logsæ–‡ä»¶å¤¹å†…æœ‰æ–‡ä»¶æ”¹åŠ¨ä¹Ÿä¸ç›‘å¬ï¼Œ ä¸é‡å¯</p><p>&quot;instances&quot;: 4, ä½¿ç”¨4æ ¸è¿è¡Œ</p><p>error_file : &quot;logs/err.log&quot; é”™è¯¯æ—¥å¿—å­˜æ”¾ / console.error()</p><p>out_file : &quot;logs/out.log&quot; æ—¥å¿—å­˜æ”¾ / console.log()</p><p>log_date_format :&quot;YYYY-MM-DD HH:mm:ss&quot; æ¯æ¡æ—¥å¿—å¢åŠ æ—¶é—´æˆ³</p></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://gitee.com/l544402029/blog/edit/gh-pages/Node.js/Node.jsä»é›¶å¼€å‘Web Serveråšå®¢é¡¹ç›® å‰ç«¯æ™‹å‡å…¨æ ˆå·¥ç¨‹å¸ˆå¿…å¤‡.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">Last update: </span><span class="info">9/14/2022, 2:06:01 PM</span></div><div class="meta-item contributors"><span class="label">Contributors: </span><!--[--><!--[--><span class="contributor" title="email: 544402029@qq.com">åˆ˜ä¿Šå³°</span><!--]--><!--]--></div></footer><!----><div class="giscus-wrapper input-top" style="display:block;"><div style="text-align:center">Loading...</div></div><!----><!--]--></main><!--]--><!----><!--]--></div><!--]--><!----><!--]--></div>
    <script type="module" src="/blog/assets/app.aa7e9e30.js" defer></script>
  </body>
</html>
