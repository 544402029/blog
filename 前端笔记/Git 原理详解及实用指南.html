<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Git | 沧海的雨季</title>
    <meta name="generator" content="VuePress 1.9.7">
    <script>var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?87e6dfa24d2735e29aae05a54966e81f";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();</script>
    <meta name="description" content="记录日常所得">
    
    <link rel="preload" href="/blog/assets/css/0.styles.cba9e905.css" as="style"><link rel="preload" href="/blog/assets/js/app.c6689be3.js" as="script"><link rel="preload" href="/blog/assets/js/2.a77d46fd.js" as="script"><link rel="preload" href="/blog/assets/js/15.f4ca3a1f.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.c7528b21.js"><link rel="prefetch" href="/blog/assets/js/11.8cbcf77d.js"><link rel="prefetch" href="/blog/assets/js/12.cd02317c.js"><link rel="prefetch" href="/blog/assets/js/13.efabb685.js"><link rel="prefetch" href="/blog/assets/js/14.5566a3bc.js"><link rel="prefetch" href="/blog/assets/js/16.02503c6d.js"><link rel="prefetch" href="/blog/assets/js/17.74f5b3d5.js"><link rel="prefetch" href="/blog/assets/js/18.f7a1b77c.js"><link rel="prefetch" href="/blog/assets/js/19.d00c3bf8.js"><link rel="prefetch" href="/blog/assets/js/20.a61d7d74.js"><link rel="prefetch" href="/blog/assets/js/21.f693f569.js"><link rel="prefetch" href="/blog/assets/js/22.1612c1b2.js"><link rel="prefetch" href="/blog/assets/js/23.c960a985.js"><link rel="prefetch" href="/blog/assets/js/24.9fd7f047.js"><link rel="prefetch" href="/blog/assets/js/25.158acbdd.js"><link rel="prefetch" href="/blog/assets/js/26.bc9c17e7.js"><link rel="prefetch" href="/blog/assets/js/27.4771dcf6.js"><link rel="prefetch" href="/blog/assets/js/28.bf7d62c1.js"><link rel="prefetch" href="/blog/assets/js/29.70400d23.js"><link rel="prefetch" href="/blog/assets/js/3.aefac9c2.js"><link rel="prefetch" href="/blog/assets/js/30.4359e31c.js"><link rel="prefetch" href="/blog/assets/js/31.af0fa4e7.js"><link rel="prefetch" href="/blog/assets/js/32.8c126d58.js"><link rel="prefetch" href="/blog/assets/js/33.754101f8.js"><link rel="prefetch" href="/blog/assets/js/34.b972a66f.js"><link rel="prefetch" href="/blog/assets/js/35.907ff232.js"><link rel="prefetch" href="/blog/assets/js/36.e89beda7.js"><link rel="prefetch" href="/blog/assets/js/37.4cdf0931.js"><link rel="prefetch" href="/blog/assets/js/38.2ef46892.js"><link rel="prefetch" href="/blog/assets/js/39.469da015.js"><link rel="prefetch" href="/blog/assets/js/4.d1a04ef9.js"><link rel="prefetch" href="/blog/assets/js/40.c91b937d.js"><link rel="prefetch" href="/blog/assets/js/41.9ac4a9eb.js"><link rel="prefetch" href="/blog/assets/js/42.ec7fd701.js"><link rel="prefetch" href="/blog/assets/js/43.58b85b2b.js"><link rel="prefetch" href="/blog/assets/js/44.12e737f9.js"><link rel="prefetch" href="/blog/assets/js/5.199b7f05.js"><link rel="prefetch" href="/blog/assets/js/6.42014918.js"><link rel="prefetch" href="/blog/assets/js/7.c80cd2c1.js"><link rel="prefetch" href="/blog/assets/js/8.4f18af86.js"><link rel="prefetch" href="/blog/assets/js/9.d2520947.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.cba9e905.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">沧海的雨季</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试题库" class="dropdown-title"><span class="title">面试题库</span> <span class="arrow down"></span></button> <button type="button" aria-label="面试题库" class="mobile-dropdown-title"><span class="title">面试题库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/面试题库/面试真题2022.html" class="nav-link">
  面试真题2022
</a></li><li class="dropdown-item"><!----> <a href="/blog/面试题库/通信类.html" class="nav-link">
  通信类
</a></li><li class="dropdown-item"><!----> <a href="/blog/面试题库/HTML.html" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/blog/面试题库/CSS.html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/blog/面试题库/JavaScript.html" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/blog/面试题库/笔试题.html" class="nav-link">
  笔试题
</a></li><li class="dropdown-item"><!----> <a href="/blog/面试题库/Vue.html" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/blog/面试题库/Vue3.html" class="nav-link">
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/blog/面试题库/Webpack.html" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/blog/面试题库/Node.js.html" class="nav-link">
  Node.js
</a></li><li class="dropdown-item"><!----> <a href="/blog/面试题库/其它.html" class="nav-link">
  其它
</a></li><li class="dropdown-item"><!----> <a href="/blog/面试题库/vue的diff算法.html" class="nav-link">
  vue的diff算法
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="常用代码片段" class="dropdown-title"><span class="title">常用代码片段</span> <span class="arrow down"></span></button> <button type="button" aria-label="常用代码片段" class="mobile-dropdown-title"><span class="title">常用代码片段</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/常用代码片段/CSS常用代码片段.html" class="nav-link">
  CSS常用代码片段
</a></li><li class="dropdown-item"><!----> <a href="/blog/常用代码片段/JS常用代码片段.html" class="nav-link">
  JS常用代码片段
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端笔记" class="dropdown-title"><span class="title">前端笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端笔记" class="mobile-dropdown-title"><span class="title">前端笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/前端笔记/深入理解 ES6.html" class="nav-link">
  深入理解ES6
</a></li><li class="dropdown-item"><!----> <a href="/blog/前端笔记/正则表达式.html" class="nav-link">
  正则表达式
</a></li><li class="dropdown-item"><!----> <a href="/blog/前端笔记/JavaScript正则迷你书.html" class="nav-link">
  JavaScript正则迷你书
</a></li><li class="dropdown-item"><!----> <a href="/blog/前端笔记/JavaScript 设计模式核⼼原理与应⽤实践.html" class="nav-link">
  JavaScript 设计模式核⼼原理与应⽤实践
</a></li><li class="dropdown-item"><!----> <a href="/blog/前端笔记/TypeScript.html" class="nav-link">
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/blog/前端笔记/linux命令.html" class="nav-link">
  linux命令
</a></li><li class="dropdown-item"><!----> <a href="/blog/前端笔记/HTTP协议原理+实践 Web开发工程师必学.html" class="nav-link">
  HTTP协议原理
</a></li><li class="dropdown-item"><!----> <a href="/blog/前端笔记/图解HTTP.html" class="nav-link">
  图解HTTP
</a></li><li class="dropdown-item"><!----> <a href="/blog/前端笔记/后台通用提效解决方案.html" class="nav-link">
  后台通用提效解决方案
</a></li><li class="dropdown-item"><!----> <a href="/blog/前端笔记/Git.html" class="nav-link">
  Git
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue" class="dropdown-title"><span class="title">Vue</span> <span class="arrow down"></span></button> <button type="button" aria-label="Vue" class="mobile-dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/vue/vue使用.html" class="nav-link">
  Vue使用
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="小程序" class="dropdown-title"><span class="title">小程序</span> <span class="arrow down"></span></button> <button type="button" aria-label="小程序" class="mobile-dropdown-title"><span class="title">小程序</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/小程序/微信小程序.html" class="nav-link">
  微信小程序
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Node.js" class="dropdown-title"><span class="title">Node.js</span> <span class="arrow down"></span></button> <button type="button" aria-label="Node.js" class="mobile-dropdown-title"><span class="title">Node.js</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/Node.js/Node.js从零开发Web Server博客项目 前端晋升全栈工程师必备.html" class="nav-link">
  Node.js从零开发Web Server博客项目
</a></li><li class="dropdown-item"><!----> <a href="/blog/Node.js/Node.js+KOA2 从0到1打造超好用Web框架一步到位 掌握KOA2服务端开发.html" class="nav-link">
  Node.js+KOA2 从0到1打造超好用Web框架一步到位
</a></li><li class="dropdown-item"><!----> <a href="/blog/Node.js/Vue全家桶+SSR+Koa2全栈开发美团网.html" class="nav-link">
  Vue全家桶+SSR+Koa2全栈开发美团网
</a></li><li class="dropdown-item"><!----> <a href="/blog/Node.js/Koa2新浪博客.html" class="nav-link">
  Koa2新浪博客
</a></li></ul></div></div> <a href="https://gitee.com/l544402029/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    gitee
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试题库" class="dropdown-title"><span class="title">面试题库</span> <span class="arrow down"></span></button> <button type="button" aria-label="面试题库" class="mobile-dropdown-title"><span class="title">面试题库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/面试题库/面试真题2022.html" class="nav-link">
  面试真题2022
</a></li><li class="dropdown-item"><!----> <a href="/blog/面试题库/通信类.html" class="nav-link">
  通信类
</a></li><li class="dropdown-item"><!----> <a href="/blog/面试题库/HTML.html" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/blog/面试题库/CSS.html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/blog/面试题库/JavaScript.html" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/blog/面试题库/笔试题.html" class="nav-link">
  笔试题
</a></li><li class="dropdown-item"><!----> <a href="/blog/面试题库/Vue.html" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/blog/面试题库/Vue3.html" class="nav-link">
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/blog/面试题库/Webpack.html" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/blog/面试题库/Node.js.html" class="nav-link">
  Node.js
</a></li><li class="dropdown-item"><!----> <a href="/blog/面试题库/其它.html" class="nav-link">
  其它
</a></li><li class="dropdown-item"><!----> <a href="/blog/面试题库/vue的diff算法.html" class="nav-link">
  vue的diff算法
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="常用代码片段" class="dropdown-title"><span class="title">常用代码片段</span> <span class="arrow down"></span></button> <button type="button" aria-label="常用代码片段" class="mobile-dropdown-title"><span class="title">常用代码片段</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/常用代码片段/CSS常用代码片段.html" class="nav-link">
  CSS常用代码片段
</a></li><li class="dropdown-item"><!----> <a href="/blog/常用代码片段/JS常用代码片段.html" class="nav-link">
  JS常用代码片段
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端笔记" class="dropdown-title"><span class="title">前端笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端笔记" class="mobile-dropdown-title"><span class="title">前端笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/前端笔记/深入理解 ES6.html" class="nav-link">
  深入理解ES6
</a></li><li class="dropdown-item"><!----> <a href="/blog/前端笔记/正则表达式.html" class="nav-link">
  正则表达式
</a></li><li class="dropdown-item"><!----> <a href="/blog/前端笔记/JavaScript正则迷你书.html" class="nav-link">
  JavaScript正则迷你书
</a></li><li class="dropdown-item"><!----> <a href="/blog/前端笔记/JavaScript 设计模式核⼼原理与应⽤实践.html" class="nav-link">
  JavaScript 设计模式核⼼原理与应⽤实践
</a></li><li class="dropdown-item"><!----> <a href="/blog/前端笔记/TypeScript.html" class="nav-link">
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/blog/前端笔记/linux命令.html" class="nav-link">
  linux命令
</a></li><li class="dropdown-item"><!----> <a href="/blog/前端笔记/HTTP协议原理+实践 Web开发工程师必学.html" class="nav-link">
  HTTP协议原理
</a></li><li class="dropdown-item"><!----> <a href="/blog/前端笔记/图解HTTP.html" class="nav-link">
  图解HTTP
</a></li><li class="dropdown-item"><!----> <a href="/blog/前端笔记/后台通用提效解决方案.html" class="nav-link">
  后台通用提效解决方案
</a></li><li class="dropdown-item"><!----> <a href="/blog/前端笔记/Git.html" class="nav-link">
  Git
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue" class="dropdown-title"><span class="title">Vue</span> <span class="arrow down"></span></button> <button type="button" aria-label="Vue" class="mobile-dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/vue/vue使用.html" class="nav-link">
  Vue使用
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="小程序" class="dropdown-title"><span class="title">小程序</span> <span class="arrow down"></span></button> <button type="button" aria-label="小程序" class="mobile-dropdown-title"><span class="title">小程序</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/小程序/微信小程序.html" class="nav-link">
  微信小程序
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Node.js" class="dropdown-title"><span class="title">Node.js</span> <span class="arrow down"></span></button> <button type="button" aria-label="Node.js" class="mobile-dropdown-title"><span class="title">Node.js</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/Node.js/Node.js从零开发Web Server博客项目 前端晋升全栈工程师必备.html" class="nav-link">
  Node.js从零开发Web Server博客项目
</a></li><li class="dropdown-item"><!----> <a href="/blog/Node.js/Node.js+KOA2 从0到1打造超好用Web框架一步到位 掌握KOA2服务端开发.html" class="nav-link">
  Node.js+KOA2 从0到1打造超好用Web框架一步到位
</a></li><li class="dropdown-item"><!----> <a href="/blog/Node.js/Vue全家桶+SSR+Koa2全栈开发美团网.html" class="nav-link">
  Vue全家桶+SSR+Koa2全栈开发美团网
</a></li><li class="dropdown-item"><!----> <a href="/blog/Node.js/Koa2新浪博客.html" class="nav-link">
  Koa2新浪博客
</a></li></ul></div></div> <a href="https://gitee.com/l544402029/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    gitee
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Git</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AE%B0/Git%20%E5%8E%9F%E7%90%86%E8%AF%A6%E8%A7%A3%E5%8F%8A%E5%AE%9E%E7%94%A8%E6%8C%87%E5%8D%97.html#git常用命令" class="sidebar-link">Git常用命令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AE%B0/Git%20%E5%8E%9F%E7%90%86%E8%AF%A6%E8%A7%A3%E5%8F%8A%E5%AE%9E%E7%94%A8%E6%8C%87%E5%8D%97.html#常用命令" class="sidebar-link">常用命令</a></li><li class="sidebar-sub-header"><a href="/blog/%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AE%B0/Git%20%E5%8E%9F%E7%90%86%E8%AF%A6%E8%A7%A3%E5%8F%8A%E5%AE%9E%E7%94%A8%E6%8C%87%E5%8D%97.html#配置信息" class="sidebar-link">配置信息</a></li></ul></li><li><a href="/blog/%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AE%B0/Git%20%E5%8E%9F%E7%90%86%E8%AF%A6%E8%A7%A3%E5%8F%8A%E5%AE%9E%E7%94%A8%E6%8C%87%E5%8D%97.html#rebase" class="sidebar-link">rebase</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AE%B0/Git%20%E5%8E%9F%E7%90%86%E8%AF%A6%E8%A7%A3%E5%8F%8A%E5%AE%9E%E7%94%A8%E6%8C%87%E5%8D%97.html#rebase-在新位置重新提交" class="sidebar-link">rebase——在新位置重新提交</a></li></ul></li><li><a href="/blog/%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AE%B0/Git%20%E5%8E%9F%E7%90%86%E8%AF%A6%E8%A7%A3%E5%8F%8A%E5%AE%9E%E7%94%A8%E6%8C%87%E5%8D%97.html#刚刚提交的代码-发现写错了怎么办" class="sidebar-link">刚刚提交的代码，发现写错了怎么办？</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AE%B0/Git%20%E5%8E%9F%E7%90%86%E8%AF%A6%E8%A7%A3%E5%8F%8A%E5%AE%9E%E7%94%A8%E6%8C%87%E5%8D%97.html#比错还错-想直接丢弃刚写的提交" class="sidebar-link">比错还错，想直接丢弃刚写的提交？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AE%B0/Git%20%E5%8E%9F%E7%90%86%E8%AF%A6%E8%A7%A3%E5%8F%8A%E5%AE%9E%E7%94%A8%E6%8C%87%E5%8D%97.html#reset-hard-丢弃最新的提交" class="sidebar-link">reset --hard 丢弃最新的提交</a></li></ul></li><li><a href="/blog/%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AE%B0/Git%20%E5%8E%9F%E7%90%86%E8%AF%A6%E8%A7%A3%E5%8F%8A%E5%AE%9E%E7%94%A8%E6%8C%87%E5%8D%97.html#小结" class="sidebar-link">小结</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AE%B0/Git%20%E5%8E%9F%E7%90%86%E8%AF%A6%E8%A7%A3%E5%8F%8A%E5%AE%9E%E7%94%A8%E6%8C%87%E5%8D%97.html#reset-的本质-不止可以撤销提交" class="sidebar-link">reset 的本质——不止可以撤销提交</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AE%B0/Git%20%E5%8E%9F%E7%90%86%E8%AF%A6%E8%A7%A3%E5%8F%8A%E5%AE%9E%E7%94%A8%E6%8C%87%E5%8D%97.html#reset-的本质-移动-head-以及它所指向的-branch" class="sidebar-link">reset 的本质：移动 HEAD 以及它所指向的 branch</a></li><li class="sidebar-sub-header"><a href="/blog/%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AE%B0/Git%20%E5%8E%9F%E7%90%86%E8%AF%A6%E8%A7%A3%E5%8F%8A%E5%AE%9E%E7%94%A8%E6%8C%87%E5%8D%97.html#reset-hard-重置工作目录" class="sidebar-link">reset --hard：重置工作目录</a></li><li class="sidebar-sub-header"><a href="/blog/%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AE%B0/Git%20%E5%8E%9F%E7%90%86%E8%AF%A6%E8%A7%A3%E5%8F%8A%E5%AE%9E%E7%94%A8%E6%8C%87%E5%8D%97.html#reset-soft-保留工作目录" class="sidebar-link">reset --soft：保留工作目录</a></li><li class="sidebar-sub-header"><a href="/blog/%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AE%B0/Git%20%E5%8E%9F%E7%90%86%E8%AF%A6%E8%A7%A3%E5%8F%8A%E5%AE%9E%E7%94%A8%E6%8C%87%E5%8D%97.html#reset-不加参数-保留工作目录-并清空暂存区" class="sidebar-link">reset 不加参数：保留工作目录，并清空暂存区</a></li></ul></li><li><a href="/blog/%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AE%B0/Git%20%E5%8E%9F%E7%90%86%E8%AF%A6%E8%A7%A3%E5%8F%8A%E5%AE%9E%E7%94%A8%E6%8C%87%E5%8D%97.html#小结-2" class="sidebar-link">小结</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="git"><a href="#git" class="header-anchor">#</a> Git</h1> <blockquote><p>本文为阅读  <a href="https://juejin.cn/book/6844733697996881928" target="_blank" rel="noopener noreferrer">《Git 原理详解及实用指南》<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 和 <a href="https://www.imooc.com/read/51#catalog" target="_blank" rel="noopener noreferrer">《Git原理详解与实操指南》<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 时所记录笔记，如有兴趣可阅读正版。</p></blockquote> <h2 id="git常用命令"><a href="#git常用命令" class="header-anchor">#</a> Git常用命令</h2> <h3 id="常用命令"><a href="#常用命令" class="header-anchor">#</a> 常用命令</h3> <h4 id="初始化仓库"><a href="#初始化仓库" class="header-anchor">#</a> 初始化仓库</h4> <div class="language- extra-class"><pre class="language-text"><code>git init
</code></pre></div><h4 id="把远程仓库取到本地"><a href="#把远程仓库取到本地" class="header-anchor">#</a> 把远程仓库取到本地</h4> <div class="language- extra-class"><pre class="language-text"><code>git clone 你刚复制的地址
</code></pre></div><h4 id="查看仓库提交历史"><a href="#查看仓库提交历史" class="header-anchor">#</a> 查看仓库提交历史</h4> <h5 id="查看历史"><a href="#查看历史" class="header-anchor">#</a> 查看历史</h5> <div class="language- extra-class"><pre class="language-text"><code>git log
</code></pre></div><h5 id="查看详细改动历史"><a href="#查看详细改动历史" class="header-anchor">#</a> 查看详细改动历史</h5> <div class="language- extra-class"><pre class="language-text"><code>git log -p
</code></pre></div><h5 id="查看大致改动历史"><a href="#查看大致改动历史" class="header-anchor">#</a> 查看大致改动历史</h5> <div class="language- extra-class"><pre class="language-text"><code>git log --stat
</code></pre></div><h5 id="查看当前-commit"><a href="#查看当前-commit" class="header-anchor">#</a> 查看当前 <code>commit</code></h5> <div class="language- extra-class"><pre class="language-text"><code>git show
</code></pre></div><h5 id="查看任意-commit"><a href="#查看任意-commit" class="header-anchor">#</a> 查看任意 <code>commit</code></h5> <p>在 <code>show</code> 后面加上这个 <code>commit</code> 的引用（<code>branch</code> 或 <code>HEAD</code> 标记）或它的 <code>SHA-1</code> 码：</p> <div class="language- extra-class"><pre class="language-text"><code>git show 5e68b0d8
</code></pre></div><h5 id="查看指定-commit-中的指定文件"><a href="#查看指定-commit-中的指定文件" class="header-anchor">#</a> 查看指定 commit 中的指定文件</h5> <p>在 <code>commit</code> 的引用或 <code>SHA-1</code> 后输入文件名：</p> <div class="language- extra-class"><pre class="language-text"><code>git show 5e68b0d8 shopping\ list.txt
</code></pre></div><h5 id="查看未提交的内容"><a href="#查看未提交的内容" class="header-anchor">#</a> 查看未提交的内容</h5> <h6 id="比对暂存区和上一条提交"><a href="#比对暂存区和上一条提交" class="header-anchor">#</a> 比对暂存区和上一条提交</h6> <p>使用 <code>git diff --staged</code> 可以显示暂存区和上一条提交之间的不同。换句话说，这条指令可以让你看到「如果你立即输入 <code>git commit</code>，你将会提交什么」：</p> <div class="language- extra-class"><pre class="language-text"><code>git diff --staged
</code></pre></div><h6 id="比对工作目录和暂存区"><a href="#比对工作目录和暂存区" class="header-anchor">#</a> 比对工作目录和暂存区</h6> <p>使用 <code>git diff</code> （不加选项参数）可以显示工作目录和暂存区之间的不同。换句话说，这条指令可以让你看到「如果你现在把所有文件都 <code>add</code>，你会向暂存区中增加哪些内容」：</p> <div class="language- extra-class"><pre class="language-text"><code>git diff
</code></pre></div><h6 id="比对工作目录和上一条提交"><a href="#比对工作目录和上一条提交" class="header-anchor">#</a> 比对工作目录和上一条提交</h6> <p>使用 <code>git diff HEAD</code> 可以显示工作目录和上一条提交之间的不同，它是上面这二者的内容相加。换句话说，这条指令可以让你看到「如果你现在把所有文件都 <code>add</code> 然后 <code>git commit</code>，你将会提交什么」（不过需要注意，没有被 Git 记录在案的文件（即从来没有被 add 过 的文件，untracked files 并不会显示出来。为什么？因为对 Git 来说它并不存在啊）。</p> <div class="language- extra-class"><pre class="language-text"><code>git diff HEAD
</code></pre></div><p>实质上，如果你把 <code>HEAD</code> 换成别的 <code>commit</code>，也可以显示当前工作目录和这条 <code>commit</code> 的区别。</p> <h4 id="查看工作目录当前状态"><a href="#查看工作目录当前状态" class="header-anchor">#</a> 查看工作目录当前状态</h4> <div class="language- extra-class"><pre class="language-text"><code>git status
</code></pre></div><h4 id="添加到暂存区"><a href="#添加到暂存区" class="header-anchor">#</a> 添加到暂存区</h4> <h5 id="添加某个文件"><a href="#添加某个文件" class="header-anchor">#</a> 添加某个文件</h5> <div class="language- extra-class"><pre class="language-text"><code>git add shopping\ list.txt
</code></pre></div><h5 id="添加全部文件"><a href="#添加全部文件" class="header-anchor">#</a> 添加全部文件</h5> <div class="language- extra-class"><pre class="language-text"><code>git add .
</code></pre></div><h4 id="提交"><a href="#提交" class="header-anchor">#</a> 提交</h4> <div class="language- extra-class"><pre class="language-text"><code>git commit
</code></pre></div><h4 id="推送到远程仓库"><a href="#推送到远程仓库" class="header-anchor">#</a> 推送到远程仓库</h4> <p>只能推送 <code>clone</code> 或者 <code>pull</code> 下来的分支</p> <div class="language- extra-class"><pre class="language-text"><code>git push
</code></pre></div><h5 id="本地创建分支推送到远程仓库"><a href="#本地创建分支推送到远程仓库" class="header-anchor">#</a> 本地创建分支推送到远程仓库</h5> <p>如果是本地创建分支推送到远程仓库，那么需要指定远程仓库的名称(别名) <code>origin</code> 以及远程仓库中目标 <code>branch</code> 的名字（目标分支需要与本地分支名称相同）。</p> <div class="language- extra-class"><pre class="language-text"><code>git push origin feature1
</code></pre></div><blockquote><p>你可以通过 <code>git config</code> 指令来设置 <code>push.default</code> 的值来改变 <code>push</code> 的行为逻辑，例如可以设置为「所有分支都可以用 <code>git push</code> 来直接 push，目标自动指向 <code>origin</code> 仓库的同名分支」（对应的 <code>push.default</code> 值：<code>current</code>），或者别的什么行为逻辑，你甚至可以设置为每次执行 <code>git push</code> 时就自动把所有本地分支全部同步到远程仓库（虽然这可能有点耗时和危险）。如果希望详细了解，你可以到<a href="https://link.juejin.cn/?target=https%3A%2F%2Fgit-scm.com%2Fdocs%2Fgit-config%23git-config-pushdefault" target="_blank" rel="noopener noreferrer">这里<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>看看。</p></blockquote> <h5 id="强制推送"><a href="#强制推送" class="header-anchor">#</a> 强制推送</h5> <div class="language- extra-class"><pre class="language-text"><code>git push origin feature1 -f
</code></pre></div><h4 id="拉取远程仓库"><a href="#拉取远程仓库" class="header-anchor">#</a> 拉取远程仓库</h4> <div class="language- extra-class"><pre class="language-text"><code>git pull
</code></pre></div><h4 id="创建分支"><a href="#创建分支" class="header-anchor">#</a> 创建分支</h4> <div class="language- extra-class"><pre class="language-text"><code>git branch feature1
</code></pre></div><h4 id="切换-分支"><a href="#切换-分支" class="header-anchor">#</a> 切换 分支</h4> <div class="language- extra-class"><pre class="language-text"><code>git checkout feature1
</code></pre></div><h4 id="创建并切换-分支"><a href="#创建并切换-分支" class="header-anchor">#</a> 创建并切换 分支</h4> <div class="language- extra-class"><pre class="language-text"><code>git checkout -b feature1
</code></pre></div><h4 id="删除分支"><a href="#删除分支" class="header-anchor">#</a> 删除分支</h4> <h5 id="删除本地分支"><a href="#删除本地分支" class="header-anchor">#</a> 删除本地分支</h5> <div class="language- extra-class"><pre class="language-text"><code>git branch -d feature1
</code></pre></div><ol><li><code>HEAD</code> 指向的 <code>branch</code> 不能删除。如果要删除 <code>HEAD</code> 指向的 <code>branch</code>，需要先用 <code>checkout</code> 把 <code>HEAD</code> 指向其他地方。</li> <li>由于 Git 中的 <code>branch</code> 只是一个引用，所以删除 <code>branch</code> 的操作也只会删掉这个引用，并不会删除任何的 <code>commit</code>。（不过如果一个 <code>commit</code> 不在任何一个 <code>branch</code> 的「路径」上，或者换句话说，如果没有任何一个 <code>branch</code> 可以回溯到这条 <code>commit</code>（也许可以称为野生 <code>commit</code>？），那么在一定时间后，它会被 Git 的回收机制删除掉。）</li> <li>出于安全考虑，没有被合并到 <code>master</code> 过的 <code>branch</code> 在删除时会失败（因为怕你误删掉「未完成」的 <code>branch</code> 啊）：</li></ol> <p><img src="https://blog-picgo-typora.oss-cn-hangzhou.aliyuncs.com/image-20220819090528371.png" alt="image-20220819090528371"></p> <p>这种情况如果你确认是要删除这个 <code>branch</code> （例如某个未完成的功能被团队确认永久毙掉了，不再做了），可以把 <code>-d</code> 改成 <code>-D</code>，小写换成大写，就能删除了。</p> <p><img src="https://blog-picgo-typora.oss-cn-hangzhou.aliyuncs.com/image-20220819090558290.png" alt="image-20220819090558290"></p> <h5 id="删除远程分支"><a href="#删除远程分支" class="header-anchor">#</a> 删除远程分支</h5> <p>用 -d 参数把远程仓库的 branch 也删了</p> <div class="language- extra-class"><pre class="language-text"><code>git push origin -d feature1
</code></pre></div><h4 id="合并分支"><a href="#合并分支" class="header-anchor">#</a> 合并分支</h4> <div class="language- extra-class"><pre class="language-text"><code>git merge branch1
</code></pre></div><h4 id="取消合并"><a href="#取消合并" class="header-anchor">#</a> 取消合并</h4> <div class="language- extra-class"><pre class="language-text"><code>git merge --abort
</code></pre></div><h4 id="储藏工作目录的改动"><a href="#储藏工作目录的改动" class="header-anchor">#</a> 储藏工作目录的改动</h4> <h5 id="储藏"><a href="#储藏" class="header-anchor">#</a> 储藏</h5> <div class="language- extra-class"><pre class="language-text"><code>git stash
</code></pre></div><h5 id="取出"><a href="#取出" class="header-anchor">#</a> 取出</h5> <div class="language- extra-class"><pre class="language-text"><code>git stash pop
</code></pre></div><blockquote><p>注意：没有被 track 的文件（即从来没有被 add 过的文件不会被 stash 起来，因为 Git 会忽略它们。如果想把这些文件也一起 stash，可以加上 <code>-u</code> 参数，它是 <code>--include-untracked</code> 的简写。就像这样：</p></blockquote> <h4 id="查看移动历史"><a href="#查看移动历史" class="header-anchor">#</a> 查看移动历史</h4> <p><code>reflog</code> 默认查看 <code>HEAD</code> 的移动历史，除此之外，也可以手动加上名称来查看其他引用的移动历史，例如某个 <code>branch</code>：</p> <div class="language- extra-class"><pre class="language-text"><code>git reflog master
</code></pre></div><h3 id="配置信息"><a href="#配置信息" class="header-anchor">#</a> 配置信息</h3> <h4 id="git账号密码保存"><a href="#git账号密码保存" class="header-anchor">#</a> Git账号密码保存</h4> <p>如果觉得一遍遍地输入密码很烦，可以输入执行这行代码把密码保存起来。</p> <div class="language- extra-class"><pre class="language-text"><code>git config credential.helper store
</code></pre></div><p>在这之后你只需要再输入一次密码， Git 就会把你的密码保存下来，这之后就再也不用输入了。但是「安全性低」，因为这条指令会让 Git 把你的密码以明文形式保存在你的电脑上。</p> <h4 id="查看昵称"><a href="#查看昵称" class="header-anchor">#</a> 查看昵称</h4> <div class="language- extra-class"><pre class="language-text"><code>git config user.name
</code></pre></div><h4 id="查看邮箱"><a href="#查看邮箱" class="header-anchor">#</a> 查看邮箱</h4> <div class="language- extra-class"><pre class="language-text"><code>git config user.email
</code></pre></div><h4 id="配置昵称"><a href="#配置昵称" class="header-anchor">#</a> 配置昵称</h4> <div class="language- extra-class"><pre class="language-text"><code>git config --global user.name &quot;你的昵称&quot;
</code></pre></div><h2 id="rebase"><a href="#rebase" class="header-anchor">#</a> rebase</h2> <p>不喜欢使用 <code>merge</code> 可以考虑使用此种方式进行提交</p> <h3 id="rebase-在新位置重新提交"><a href="#rebase-在新位置重新提交" class="header-anchor">#</a> rebase——在新位置重新提交</h3> <p><code>rebase</code> 的意思是，给你的 <code>commit</code> 序列重新设置基础点（也就是父 <code>commit</code>）。展开来说就是，把你指定的 <code>commit</code> 以及它所在的 <code>commit</code> 串，以指定的目标 <code>commit</code> 为基础，依次重新提交一次。例如下面这个 <code>merge</code>：</p> <div class="language- extra-class"><pre class="language-text"><code>git merge branch1
</code></pre></div><p><img src="https://blog-picgo-typora.oss-cn-hangzhou.aliyuncs.com/15fdea7b6646a1f3_tplv-t2oaga2asx-zoom-in-crop-mark_3024_0_0_0.webp" alt="15fdea7b6646a1f3_tplv-t2oaga2asx-zoom-in-crop-mark_3024_0_0_0"></p> <p>如果把 <code>merge</code> 换成 <code>rebase</code>，可以这样操作：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> checkout branch1
<span class="token function">git</span> rebase master
</code></pre></div><p><img src="https://blog-picgo-typora.oss-cn-hangzhou.aliyuncs.com/1600abd620a8e28c_tplv-t2oaga2asx-zoom-in-crop-mark_3024_0_0_0.webp" alt="1600abd620a8e28c_tplv-t2oaga2asx-zoom-in-crop-mark_3024_0_0_0"></p> <p>另外，在 <code>rebase</code> 之后，记得切回 <code>master</code> 再 <code>merge</code> 一下，把 <code>master</code> 移到最新的 <code>commit</code>：</p> <div class="language- extra-class"><pre class="language-text"><code>git checkout master
git merge branch1
</code></pre></div><p><img src="https://blog-picgo-typora.oss-cn-hangzhou.aliyuncs.com/160149e054fe485c_tplv-t2oaga2asx-zoom-in-crop-mark_3024_0_0_0.webp" alt="160149e054fe485c_tplv-t2oaga2asx-zoom-in-crop-mark_3024_0_0_0"></p> <blockquote><p>为什么要从 <code>branch1</code> 来 <code>rebase</code>，然后再切回 <code>master</code> 再 <code>merge</code> 一下这么麻烦，而不是直接在 <code>master</code> 上执行 <code>rebase</code>？</p> <p>从图中可以看出，<code>rebase</code> 后的 <code>commit</code> 虽然内容和 <code>rebase</code> 之前相同，但它们已经是不同的 <code>commits</code> 了。如果直接从 <code>master</code> 执行 <code>rebase</code> 的话，就会是下面这样：</p> <p><img src="https://blog-picgo-typora.oss-cn-hangzhou.aliyuncs.com/16014b5a6919c0b7_tplv-t2oaga2asx-zoom-in-crop-mark_3024_0_0_0.webp" alt="16014b5a6919c0b7_tplv-t2oaga2asx-zoom-in-crop-mark_3024_0_0_0"></p> <p>这就导致 <code>master</code> 上之前的两个最新 <code>commit</code> 被剔除了。如果这两个 <code>commit</code> 之前已经在中央仓库存在，这就会导致没法 <code>push</code> 了：</p> <p>所以，为了避免和远端仓库发生冲突，一般不要从 <code>master</code> 向其他 <code>branch</code> 执行 <code>rebase</code> 操作。而如果是 <code>master</code> 以外的 <code>branch</code> 之间的 <code>rebase</code>（比如 <code>branch1</code> 和 <code>branch2</code> 之间），就不必这么多费一步，直接 <code>rebase</code> 就好。</p></blockquote> <p>需要说明的是，<code>rebase</code> 是站在需要被 <code>rebase</code> 的 <code>commit</code> 上进行操作，这点和 <code>merge</code> 是不同的。</p> <h2 id="刚刚提交的代码-发现写错了怎么办"><a href="#刚刚提交的代码-发现写错了怎么办" class="header-anchor">#</a> 刚刚提交的代码，发现写错了怎么办？</h2> <p>刚提交了一个代码，发现有几个字写错了：</p> <p><img src="https://blog-picgo-typora.oss-cn-hangzhou.aliyuncs.com/15fdf01882286d88~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.webp" alt="img"></p> <p>怎么修复？</p> <p>当场再写一个修复这几个错别字的 <code>commit</code>？可以是可以，不过还有一个更加优雅和简单的解决方法：<code>commit -—amend</code>。</p> <p>&quot;amend&quot; 是「修正」的意思。在提交时，如果加上 <code>--amend</code> 参数，Git 不会在当前 <code>commit</code> 上增加 <code>commit</code>，而是会把当前 <code>commit</code> 里的内容和暂存区（stageing area）里的内容合并起来后创建一个新的 <code>commit</code>，<strong>用这个新的 <code>commit</code> 把当前 <code>commit</code> 替换掉</strong>。所以 <code>commit --amend</code> 做的事就是它的字面意思：对最新一条 <code>commit</code> 进行修正。</p> <p>具体地，对于上面这个错误，你就可以把文件中的错别字修改好之后，输入：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> <span class="token function">add</span> 笑声.txt
<span class="token function">git</span> commit --amend
</code></pre></div><p>Git 会把你带到提交信息编辑界面。可以看到，提交信息默认是当前提交的提交信息。你可以修改或者保留它，然后保存退出。然后，你的最新 <code>commit</code> 就被更新了。</p> <p><img src="https://blog-picgo-typora.oss-cn-hangzhou.aliyuncs.com/15fdf0187f2f4b2d_tplv-t2oaga2asx-zoom-in-crop-mark_3024_0_0_0.webp" alt="15fdf0187f2f4b2d_tplv-t2oaga2asx-zoom-in-crop-mark_3024_0_0_0"></p> <p>需要注意的：</p> <ol><li><p><code>commit --amend</code> 并不是直接修改原 <code>commit</code> 的内容，而是生成一条新的 <code>commit</code>, 替换掉原 <code>commit</code> 。</p></li> <li><p><code>git commit --amend</code> 只针对提交到本地仓库的有效,  需要git push -f才能推送至远程仓库。</p></li> <li><p>慎用此功能，一般情况下在当前 <code>commit</code> 修改提交即可。</p></li></ol> <h2 id="比错还错-想直接丢弃刚写的提交"><a href="#比错还错-想直接丢弃刚写的提交" class="header-anchor">#</a> 比错还错，想直接丢弃刚写的提交？</h2> <p>有的时候，刚写完的 <code>commit</code> 写得实在太烂，连自己的都看不下去，与其修改它还不如丢掉重写。这种情况，就可以用 <code>reset</code> 来丢弃最新的提交。</p> <h3 id="reset-hard-丢弃最新的提交"><a href="#reset-hard-丢弃最新的提交" class="header-anchor">#</a> reset --hard 丢弃最新的提交</h3> <p>比如你刚写了一个 <code>commit</code>：</p> <p><img src="https://blog-picgo-typora.oss-cn-hangzhou.aliyuncs.com/15fe19c8a6101d7f~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.webp" alt="img"></p> <p><img src="https://blog-picgo-typora.oss-cn-hangzhou.aliyuncs.com/15fe19c8a2f08fa1~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.webp" alt="img"></p> <p>写完回头看了看，你觉得「不行这得重新写」。那么你可以用 <code>reset --hard</code> 来撤销这条 <code>commit</code>。</p> <div class="language-css extra-class"><pre class="language-css"><code>git reset --hard HEAD^
</code></pre></div><blockquote><p>HEAD 表示 HEAD^ 往回数一个位置的 <code>commit</code> ，上节刚说过，记得吧？</p></blockquote> <p><code>HEAD^</code> 表示你要恢复到哪个 <code>commit</code>。因为你要撤销最新的一个 <code>commit</code>，所以你需要恢复到它的父 <code>commit</code> ，也就是 <code>HEAD^</code>。那么在这行之后，你的最新一条就被撤销了：</p> <p><img src="https://blog-picgo-typora.oss-cn-hangzhou.aliyuncs.com/15fe19c8a3235853~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.webp" alt="img"></p> <p>不过，就像图上显示的，你被撤销的那条提交并没有消失，只是你不再用到它了。如果你在撤销它之前记下了它的 <code>SHA-1</code> 码，那么你还可以通过 <code>SHA-1</code> 来找到他它。</p> <h2 id="小结"><a href="#小结" class="header-anchor">#</a> 小结</h2> <p>这一节的内容是撤销最新的提交，方式是通过 <code>reset --hard</code>：</p> <div class="language-css extra-class"><pre class="language-css"><code>git reset --hard 目标commit
</code></pre></div><h2 id="reset-的本质-不止可以撤销提交"><a href="#reset-的本质-不止可以撤销提交" class="header-anchor">#</a> reset 的本质——不止可以撤销提交</h2> <p>前面讲到，在最新的 <code>commit</code> 写错时，可以用 <code>reset --hard</code> 来把 <code>commit</code> 撤销：</p> <div class="language-css extra-class"><pre class="language-css"><code>git reset --hard HEAD^
</code></pre></div><blockquote><p>用这行代码可以撤销掉当前 <code>commit</code></p></blockquote> <p>在这节里，就对 <code>reset</code> 多说点，说说它的本质，说说它在撤销提交之外的用途。</p> <h3 id="reset-的本质-移动-head-以及它所指向的-branch"><a href="#reset-的本质-移动-head-以及它所指向的-branch" class="header-anchor">#</a> reset 的本质：移动 HEAD 以及它所指向的 branch</h3> <p>实质上，<code>reset</code> 这个指令虽然可以用来撤销 <code>commit</code> ，但它的实质行为并不是撤销，而是移动 <code>HEAD</code> ，并且「捎带」上 <code>HEAD</code> 所指向的 <code>branch</code>（如果有的话）。也就是说，<code>reset</code> 这个指令的行为其实和它的字面意思 &quot;reset&quot;（重置）十分相符：它是用来重置 <code>HEAD</code> 以及它所指向的 <code>branch</code> 的位置的。</p> <p>而 <code>reset --hard HEAD^</code> 之所以起到了撤销 <code>commit</code> 的效果，是因为它把 <code>HEAD</code> 和它所指向的 <code>branch</code> 一起移动到了当前 <code>commit</code> 的父 <code>commit</code> 上，从而起到了「撤销」的效果：</p> <p><img src="https://blog-picgo-typora.oss-cn-hangzhou.aliyuncs.com/15fe19c8a3235853~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.webp" alt="img"></p> <blockquote><p>Git 的历史只能往回看，不能向未来看，所以把 <code>HEAD</code> 和 <code>branch</code> 往回移动，就能起到撤回 <code>commit</code> 的效果。</p></blockquote> <p>所以同理，<code>reset --hard</code> 不仅可以撤销提交，还可以用来把 <code>HEAD</code> 和 <code>branch</code> 移动到其他的任何地方。</p> <div class="language-css extra-class"><pre class="language-css"><code>git reset --hard branch2
</code></pre></div><p><img src="https://blog-picgo-typora.oss-cn-hangzhou.aliyuncs.com/15fe333cb605b0de~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.webp" alt="img"></p> <p>不过……<code>reset</code> 后面总是跟着的那个 <code>--hard</code> 是什么意思呢？</p> <p><code>reset</code> 指令可以重置 <code>HEAD</code> 和 <code>branch</code> 的位置，不过在重置它们的同时，对工作目录可以选择不同的操作，而对工作目录的操作的不同，就是通过 <code>reset</code> 后面跟的参数来确定的。</p> <h3 id="reset-hard-重置工作目录"><a href="#reset-hard-重置工作目录" class="header-anchor">#</a> reset --hard：重置工作目录</h3> <p><code>reset --hard</code> 会在重置 <code>HEAD</code> 和 <code>branch</code> 的同时，重置工作目录里的内容。当你在 <code>reset</code> 后面加了 <code>--hard</code> 参数时，你的工作目录里的内容会被完全重置为和 <code>HEAD</code> 的新位置相同的内容。换句话说，就是你的未提交的修改会被全部擦掉。</p> <p>例如你在上次 <code>commit</code> 之后又对文件做了一些改动：</p> <div class="language-lua extra-class"><pre class="language-lua"><code>git status
</code></pre></div><p><img src="https://blog-picgo-typora.oss-cn-hangzhou.aliyuncs.com/15fe333cb5a0e894~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.webp" alt="img"></p> <p>然后，你执行了 <code>reset</code> 并附上了 <code>--hard</code> 参数：</p> <div class="language-css extra-class"><pre class="language-css"><code>git reset --hard HEAD^
</code></pre></div><p>你的 <code>HEAD</code> 和当前 <code>branch</code> 切到上一条 <code>commit</code> 的同时，你工作目录里的新改动也一起全都消失了，不管它们是否被放进暂存区：</p> <div class="language-lua extra-class"><pre class="language-lua"><code>git status
</code></pre></div><p><img src="https://blog-picgo-typora.oss-cn-hangzhou.aliyuncs.com/15fe333cb5dbef68~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.webp" alt="img"></p> <p>可以看到，在 <code>reset --hard</code> 后，所有的改动都被擦掉了。</p> <h3 id="reset-soft-保留工作目录"><a href="#reset-soft-保留工作目录" class="header-anchor">#</a> reset --soft：保留工作目录</h3> <p><code>reset --soft</code> 会在重置 <code>HEAD</code> 和 <code>branch</code> 时，保留工作目录和暂存区中的内容，并把重置 <code>HEAD</code> 所带来的新的差异放进暂存区。</p> <p>什么是「重置 <code>HEAD</code> 所带来的新的差异」？就是这里：</p> <p><img src="https://blog-picgo-typora.oss-cn-hangzhou.aliyuncs.com/15fe333cb5c6a249~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.webp" alt="img"></p> <p>由于 <code>HEAD</code> 从 <code>4</code> 移动到了 <code>3</code>，而且在 <code>reset</code> 的过程中工作目录的内容没有被清理掉，所以 <code>4</code> 中的改动在 <code>reset</code> 后就也成了工作目录新增的「工作目录和 <code>HEAD</code> 的差异」。这就是上面一段中所说的「重置 <code>HEAD</code> 所带来的差异」。</p> <p>所以在同样的情况下：</p> <div class="language-lua extra-class"><pre class="language-lua"><code>git status
</code></pre></div><p><img src="https://blog-picgo-typora.oss-cn-hangzhou.aliyuncs.com/15fe333cb5a0e894~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.webp" alt="img"></p> <p>假设此时当前 <code>commit</code> 的改动内容是新增了 <code>laughters.txt</code> 文件：</p> <div class="language-sql extra-class"><pre class="language-sql"><code>git <span class="token keyword">show</span> <span class="token comment">--stat</span>
</code></pre></div><p><img src="https://blog-picgo-typora.oss-cn-hangzhou.aliyuncs.com/15fe333cb7cdd727~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.webp" alt="img"></p> <p>如果这时你执行：</p> <div class="language-css extra-class"><pre class="language-css"><code>git reset --soft HEAD^
</code></pre></div><p>那么除了 <code>HEAD</code> 和它所指向的 <code>branch1</code> 被移动到 <code>HEAD^</code> 之外，原先 <code>HEAD</code> 处 <code>commit</code> 的改动（也就是那个 <code>laughters.txt</code> 文件）也会被放进暂存区：</p> <div class="language-lua extra-class"><pre class="language-lua"><code>git status
</code></pre></div><p><img src="https://blog-picgo-typora.oss-cn-hangzhou.aliyuncs.com/15fe333cb7e6e40b~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.webp" alt="img"></p> <p>这就是 <code>--soft</code> 和 <code>--hard</code> 的区别：<code>--hard</code> 会清空工作目录的改动，而 <code>--soft</code> 则会保留工作目录的内容，并把因为保留工作目录内容所带来的新的文件差异放进暂存区。</p> <h3 id="reset-不加参数-保留工作目录-并清空暂存区"><a href="#reset-不加参数-保留工作目录-并清空暂存区" class="header-anchor">#</a> reset 不加参数：保留工作目录，并清空暂存区</h3> <p><code>reset</code> 如果不加参数，那么默认使用 <code>--mixed</code> 参数。它的行为是：保留工作目录，并且清空暂存区。也就是说，工作目录的修改、暂存区的内容以及由 <code>reset</code> 所导致的新的文件差异，都会被放进工作目录。简而言之，就是「把所有差异都混合（mixed）放在工作目录中」。</p> <p>还以同样的情况为例：</p> <div class="language-lua extra-class"><pre class="language-lua"><code>git status
</code></pre></div><p><img src="https://blog-picgo-typora.oss-cn-hangzhou.aliyuncs.com/15fe333cb5a0e894~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.webp" alt="img"></p> <blockquote><p>修改了 <code>games.txt</code> 和 <code>shopping list.txt</code>，并把 <code>games.txt</code> 放进了暂存区。</p></blockquote> <div class="language-sql extra-class"><pre class="language-sql"><code>git <span class="token keyword">show</span> <span class="token comment">--stat</span>
</code></pre></div><p><img src="https://blog-picgo-typora.oss-cn-hangzhou.aliyuncs.com/15fe333cb7cdd727~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.webp" alt="img"></p> <blockquote><p>最新的 <code>commit</code> 中新增了 <code>laughters.txt</code> 文件。</p></blockquote> <p>这时如果你执行无参数的 <code>reset</code>：</p> <div class="language-perl extra-class"><pre class="language-perl"><code>git reset HEAD<span class="token operator">^</span>
</code></pre></div><p>工作目录的内容和 <code>--soft</code> 一样会被保留，但和 <code>--soft</code> 的区别在于，它会把暂存区清空：</p> <div class="language-lua extra-class"><pre class="language-lua"><code>git status
</code></pre></div><p><img src="https://blog-picgo-typora.oss-cn-hangzhou.aliyuncs.com/15fe333d086f9754~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.webp" alt="img"></p> <h2 id="小结-2"><a href="#小结-2" class="header-anchor">#</a> 小结</h2> <p>本节内容讲了 <code>reset</code> 指令的本质：重置 <code>HEAD</code> 以及它所指向的 <code>branch</code> 的位置。同时，介绍了 <code>reset</code> 的三种参数：</p> <ol><li><code>--hard</code>：重置位置的同时，清空工作目录的所有改动；</li> <li><code>--soft</code>：重置位置的同时，保留工作目录和暂存区的内容，并把重置 <code>HEAD</code> 的位置所导致的新的文件差异放进暂存区。</li> <li><code>--mixed</code>（默认）：重置位置的同时，保留工作目录的内容，并清空暂存区。</li></ol> <p>除了上面这三种参数，还有一些没有列出的较为不常用的参数；另外除了我讲的功能外，<code>reset</code> 其实也还有一些别的功能和用法。不过 <code>reset</code> 最关键的功能、用法和本质原理就是上面这些了，想了解更多的话，可以去官网了解一下。</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://gitee.com/l544402029/blog/edit/gh-pages/前端笔记/Git 原理详解及实用指南.md" target="_blank" rel="noopener noreferrer">编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">最后更新时间:</span> <span class="time">8/22/2022, 5:09:45 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.c6689be3.js" defer></script><script src="/blog/assets/js/2.a77d46fd.js" defer></script><script src="/blog/assets/js/15.f4ca3a1f.js" defer></script>
  </body>
</html>
