import{_ as n,o as s,c as a,a as t}from"./app.7508405c.js";const p={},e=t(`<h1 id="vue-\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#vue-\u4F7F\u7528" aria-hidden="true">#</a> vue \u4F7F\u7528</h1><h2 id="\u642D\u5EFA\u9879\u76EE" tabindex="-1"><a class="header-anchor" href="#\u642D\u5EFA\u9879\u76EE" aria-hidden="true">#</a> \u642D\u5EFA\u9879\u76EE</h2><p>\u9996\u5148\u9700\u8981\u5B89\u88C5 node\uFF0Cgit</p><p>\u521B\u5EFA\u7801\u4E91\u4ED3\u5E93</p><h4 id="\u751F\u6210\u516C\u94A5" tabindex="-1"><a class="header-anchor" href="#\u751F\u6210\u516C\u94A5" aria-hidden="true">#</a> \u751F\u6210\u516C\u94A5</h4><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>ssh-keygen -t rsa -C &quot;544402029@qq.com&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u548C\u7801\u4E91\u6CE8\u518C\u90AE\u7BB1\u5730\u5740\u4E00\u6837</p><h4 id="\u83B7\u53D6\u516C\u94A5" tabindex="-1"><a class="header-anchor" href="#\u83B7\u53D6\u516C\u94A5" aria-hidden="true">#</a> \u83B7\u53D6\u516C\u94A5</h4><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>cat ~/.ssh/id_rsa.pub
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="\u6DFB\u52A0\u516C\u94A5" tabindex="-1"><a class="header-anchor" href="#\u6DFB\u52A0\u516C\u94A5" aria-hidden="true">#</a> \u6DFB\u52A0\u516C\u94A5</h4><p><img src="https://blog-picgo-typora.oss-cn-hangzhou.aliyuncs.com/image-20220805090910386.png" alt="image-20220805090910386"></p><h4 id="\u514B\u9686\u4ED3\u5E93" tabindex="-1"><a class="header-anchor" href="#\u514B\u9686\u4ED3\u5E93" aria-hidden="true">#</a> \u514B\u9686\u4ED3\u5E93</h4><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>git clone git@gitee.com:l544402029/Travel.git
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="\u521B\u5EFA-vue" tabindex="-1"><a class="header-anchor" href="#\u521B\u5EFA-vue" aria-hidden="true">#</a> \u521B\u5EFA vue</h4><p>\u5B89\u88C5\u811A\u624B\u67B6</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>npm install -g @vue/cli
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u521B\u5EFA vue \u9879\u76EE</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>vue create Travel
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="\u63A8\u9001\u5230\u8FDC\u7A0B\u4ED3\u5E93" tabindex="-1"><a class="header-anchor" href="#\u63A8\u9001\u5230\u8FDC\u7A0B\u4ED3\u5E93" aria-hidden="true">#</a> \u63A8\u9001\u5230\u8FDC\u7A0B\u4ED3\u5E93</h4><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>git add .
git commit -m &#39;init project&#39;
git push
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="mvvm-\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#mvvm-\u6A21\u5F0F" aria-hidden="true">#</a> MVVM \u6A21\u5F0F</h2><h3 id="mvp-\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#mvp-\u6A21\u5F0F" aria-hidden="true">#</a> MVP \u6A21\u5F0F</h3><p><img src="https://blog-picgo-typora.oss-cn-hangzhou.aliyuncs.com/image-20220805090929624.png" alt="image-20220805090929624"></p><p>\u9996\u5148\u6211\u4EEC\u8981\u4E86\u89E3\u4E00\u4E0B MVP \u6A21\u5F0F\uFF0C \u4EE3\u7801\u5206\u4E3A\u4E09\u5C42\u3002 Model \u5C42\uFF08\u4E5F\u5C31\u662F\u6211\u4EEC\u6240\u8BF4\u7684\u6570\u636E\u5C42\uFF09\uFF0C Presenter \u5448\u73B0\u5C42(\u4E1A\u52A1\u903B\u8F91\u76F8\u5173\u7684\u63A7\u5236\u5C42)\uFF0C View \u5C42\uFF08\u89C6\u56FE\u5C42\uFF0C\u9875\u9762\u4E0A\u7684 DOM \u5C55\u793A\uFF09\u3002</p><p>\u5F53\u6211\u4EEC\u89C6\u56FE\u4E0A\u7684\u6309\u94AE\u88AB\u70B9\u51FB\u65F6\uFF0C \u63A7\u5236\u5668\u91CC\u7684\u4EE3\u7801\u4F1A\u6267\u884C\uFF0C \u63A7\u5236\u5668\u91CC\u9762\u7684\u4EE3\u7801\u8D1F\u8D23\u4E86\u6240\u6709\u7684\u4E1A\u52A1\u903B\u8F91\u3002\u63A7\u5236\u5668\u53EF\u4EE5\u53BB\u8C03\u7528\u6A21\u578B\u5C42\u53BB\u53D1<code>ajax</code>\u8BF7\u6C42\uFF0C\u6216\u8005\u63A7\u5236\u5668\u5904\u7406\u4E1A\u52A1\u903B\u8F91\u4E4B\u540E\uFF0C \u63A7\u5236\u5668\u4F1A\u901A\u8FC7<code>DOM</code>\u64CD\u4F5C\u518D\u6765\u6539\u53D8\u89C6\u56FE\u3002</p><p>\u4F7F\u7528 MVP \u6A21\u5F0F\u6211\u4EEC\u5927\u90E8\u5206\u4EE3\u7801\u90FD\u662F\u64CD\u4F5C DOM\u3002\u53EF\u4EE5\u8BF4\u662F\u9762\u5411 DOM \u5F00\u53D1\u3002</p><h3 id="mvvm-\u6A21\u5F0F-1" tabindex="-1"><a class="header-anchor" href="#mvvm-\u6A21\u5F0F-1" aria-hidden="true">#</a> MVVM \u6A21\u5F0F</h3><p><img src="https://blog-picgo-typora.oss-cn-hangzhou.aliyuncs.com/image-20220805090942901.png" alt="image-20220805090942901"></p><p>MVVM \u6A21\u5F0F\u4E5F\u6709 Model \u5C42\u6765\u5B58\u50A8\u6570\u636E\uFF0C \u6709 View\uFF08\u89C6\u56FE\u5C42\uFF09\u6765\u663E\u793A\u6570\u636E\uFF0C \u4F46\u662F\u6CA1\u6709 Presenter\uFF08\u63A7\u5236\u5668\uFF09\u5C42\uFF0C \u5B83\u6709\u4E00\u4E2A ViewModel \u5C42\u3002ViewModel \u5C42\u4E0D\u9700\u8981\u6211\u4EEC\u81EA\u5DF1\u7F16\u5199\uFF0C \u5B83\u662F vue \u81EA\u5E26\u7684\u3002</p><p>\u4F7F\u7528 MVVM \u6A21\u5F0F\uFF0C \u6211\u4EEC\u4E0D\u9700\u8981\u5173\u6CE8 ViewModel \u5C42\uFF0C \u5B83\u662F vue \u5185\u7F6E\u7684\u3002\u6211\u4EEC\u53EA\u9700\u8981\u5173\u6CE8 View \u5C42\u548C Model \u5C42\u3002\u5BF9\u4E8E MVVM \u6A21\u5F0F\uFF0C \u7F16\u7801\u7684\u91CD\u70B9\u4E00\u90E8\u5206\u662F\u5728 View \u5C42\uFF0C \u4E00\u90E8\u5206\u662F\u5728 Model \u5C42\u3002 \u4F7F\u7528\u8FD9\u79CD\u6A21\u5F0F\u5927\u90E8\u5206\u662F\u5728\u64CD\u4F5C\u6570\u636E\uFF0C DOM \u64CD\u4F5C\u5927\u5927\u51CF\u5C11\uFF0C \u51CF\u5C11\u4E86\u4EE3\u7801\u91CF\uFF0C \u53EF\u662F\u8BF4\u662F\u9762\u5411\u6570\u636E\u5F00\u53D1\u3002</p><p>\u5728\u6211\u4EEC\u66F4\u6539\u89C6\u56FE\u6216\u8005\u64CD\u4F5C\u6570\u636E\u7684\u65F6\u5019\uFF0Cvm \u5C42\u4F1A\u5BF9\u76F8\u5E94\u6570\u636E\u6216\u8005\u89C6\u56FE\u8FDB\u884C\u66F4\u65B0\uFF0C\u4E0D\u8FDB\u884C dom \u64CD\u4F5C\uFF0C\u5728 vm \u5C42\u4E2D\u7684\u5B9E\u73B0\u4E3B\u8981\u4F7F\u7528\u4E86 es5 \u7684<code>Object.defineProperty()</code>\u548C\u865A\u62DF dom \u7684\u4E00\u4E2A\u673A\u5236\u3002</p><h4 id="\u5173\u952E\u70B9" tabindex="-1"><a class="header-anchor" href="#\u5173\u952E\u70B9" aria-hidden="true">#</a> \u5173\u952E\u70B9\uFF1A</h4><ol><li>mvvm \u548C mvp \u90FD\u662F\u524D\u7AEF\u7684\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u90FD\u662F\u524D\u540E\u7AEF\u5206\u79BB\u540E\u6240\u7279\u6709\u7684\u6A21\u5F0F</li><li>\u524D\u540E\u7AEF\u5206\u79BB\u524D\u662F mvc \u6A21\u5F0F\uFF0C\u4E3B\u8981\u4E1A\u52A1\u903B\u8F91\u96C6\u4E2D\u5728\u540E\u7AEF\uFF0C\u8FDE\u9875\u9762\u7684\u6E32\u67D3\u90FD\u662F\u5728\u540E\u7AEF</li><li>mvvm \u548C mvp \u5176\u5B9E\u90FD\u662F\u53D6\u4EE3\u4E86 mvc \u4E2D\u7684 v\uFF0C\u5373\u540E\u7AEF\u4E0D\u9700\u8981\u6E32\u67D3\u9875\u9762\u4E86\uFF0C\u800C\u662F\u628A\u9700\u8981\u6E32\u67D3\u7ED9\u9875\u9762\u7684\u6570\u636E\u4EE5 json \u5F62\u5F0F\u4F20\u7ED9\u524D\u7AEF mvvm \u6216 mvp \u4E2D\u7684 m\uFF0Cvm \u6216 p \u518D\u628A\u8FD9\u4E9B\u6570\u636E\u4F20\u7ED9 v \u8FDB\u884C\u9875\u9762\u6E32\u67D3</li><li>\u7531\u4E8E\u524D\u7AEF\u6E32\u67D3\u4F1A\u964D\u4F4E SEO\uFF0C\u6240\u4EE5\u7F51\u7AD9\u9996\u9875\u53EF\u4EE5\u91C7\u53D6\u540E\u7AEF\u6E32\u67D3</li></ol><h2 id="\u7EC4\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u7EC4\u4EF6" aria-hidden="true">#</a> \u7EC4\u4EF6</h2><p>\u7EC4\u4EF6\u7CFB\u7EDF\u662F Vue \u7684\u53E6\u4E00\u4E2A\u91CD\u8981\u6982\u5FF5\uFF0C\u56E0\u4E3A\u5B83\u662F\u4E00\u79CD\u62BD\u8C61\uFF0C\u5141\u8BB8\u6211\u4EEC\u4F7F\u7528\u5C0F\u578B\u3001\u72EC\u7ACB\u548C\u901A\u5E38\u53EF\u590D\u7528\u7684\u7EC4\u4EF6\u6784\u5EFA\u5927\u578B\u5E94\u7528\u3002</p><h3 id="\u7EC4\u4EF6\u95F4\u4F20\u503C" tabindex="-1"><a class="header-anchor" href="#\u7EC4\u4EF6\u95F4\u4F20\u503C" aria-hidden="true">#</a> \u7EC4\u4EF6\u95F4\u4F20\u503C</h3><h4 id="\u5B50\u7EC4\u4EF6\u5411\u7236\u7EC4\u4EF6\u4F20\u503C" tabindex="-1"><a class="header-anchor" href="#\u5B50\u7EC4\u4EF6\u5411\u7236\u7EC4\u4EF6\u4F20\u503C" aria-hidden="true">#</a> \u5B50\u7EC4\u4EF6\u5411\u7236\u7EC4\u4EF6\u4F20\u503C</h4><p><img src="https://blog-picgo-typora.oss-cn-hangzhou.aliyuncs.com/image-20220805091003354.png" alt="image-20220805091003354"></p><p>\u5728\u5B50\u7EC4\u4EF6\u63A5\u53D7\u7236\u7EC4\u4EF6\u4F20\u8FC7\u6765\u7684\u503C\u65F6\uFF0C \u53EA\u80FD\u7528\u4F46\u662F\u4E0D\u80FD\u6765\u4FEE\u6539\u3002 \u4E4B\u6240\u4EE5\u6709\u8FD9\u6837\u4E00\u4E2A\u5355\u5411\u6570\u636E\u6D41\u7684\u6982\u5FF5\uFF0C \u662F\u56E0\u4E3A\u7236\u7EC4\u4EF6\u4F20\u8FC7\u6765\u7684\u503C\u6709\u53EF\u80FD\u88AB\u5176\u4ED6\u7EC4\u4EF6\u4F7F\u7528\u3002\u4F60\u4FEE\u6539\u4E86\u8FD9\u4E2A\u5B50\u7EC4\u4EF6\u7684\u6570\u636E\uFF0C \u4E0D\u4EC5\u5F71\u54CD\u8FD9\u4E2A\u7EC4\u4EF6\uFF0C \u6709\u53EF\u80FD\u5BF9\u5176\u4ED6\u7EC4\u4EF6\u9020\u6210\u5F71\u54CD\u3002</p><h4 id="\u975E\u7236\u5B50\u7EC4\u4EF6\u4F20\u503C" tabindex="-1"><a class="header-anchor" href="#\u975E\u7236\u5B50\u7EC4\u4EF6\u4F20\u503C" aria-hidden="true">#</a> \u975E\u7236\u5B50\u7EC4\u4EF6\u4F20\u503C</h4><p><img src="https://blog-picgo-typora.oss-cn-hangzhou.aliyuncs.com/image-20220805091026417.png" alt="image-20220805091026417"></p><h3 id="vue-\u5B9E\u4F8B" tabindex="-1"><a class="header-anchor" href="#vue-\u5B9E\u4F8B" aria-hidden="true">#</a> vue \u5B9E\u4F8B</h3><h4 id="\u6570\u636E\u4E0E\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#\u6570\u636E\u4E0E\u65B9\u6CD5" aria-hidden="true">#</a> \u6570\u636E\u4E0E\u65B9\u6CD5</h4><p>\u5F53\u6570\u636E\u6539\u53D8\u65F6\uFF0C\u89C6\u56FE\u4F1A\u8FDB\u884C\u91CD\u6E32\u67D3\u3002<strong>\u503C\u5F97\u6CE8\u610F\u7684\u662F\u53EA\u6709\u5F53\u5B9E\u4F8B\u88AB\u521B\u5EFA\u65F6\u5C31\u5DF2\u7ECF\u5B58\u5728\u4E8E data \u4E2D\u7684\u5C5E\u6027\u624D\u662F\u54CD\u5E94\u5F0F\u7684\u3002</strong> \u4E5F\u5C31\u662F\u8BF4\u5982\u679C\u4F60\u6DFB\u52A0\u4E00\u4E2A\u65B0\u7684\u5C5E\u6027\u5C06\u4E0D\u4F1A\u89E6\u53D1\u4EFB\u4F55\u89C6\u56FE\u7684\u66F4\u65B0\u3002</p><p>\u5982\u679C\u4F60\u77E5\u9053\u4F60\u4F1A\u5728\u665A\u4E9B\u65F6\u5019\u9700\u8981\u4E00\u4E2A\u5C5E\u6027\uFF0C\u4F46\u662F\u4E00\u5F00\u59CB\u5B83\u4E3A\u7A7A\u6216\u4E0D\u5B58\u5728\uFF0C\u90A3\u4E48\u4F60\u4EC5\u9700\u8981\u8BBE\u7F6E\u4E00\u4E9B\u521D\u59CB\u503C\u3002</p><h4 id="\u751F\u547D\u5468\u671F" tabindex="-1"><a class="header-anchor" href="#\u751F\u547D\u5468\u671F" aria-hidden="true">#</a> \u751F\u547D\u5468\u671F</h4><p>\u751F\u547D\u5468\u671F\u51FD\u6570\u5C31\u662F vue \u5B9E\u4F8B\u5728\u67D0\u4E00\u4E2A\u65F6\u95F4\u70B9\u81EA\u52A8\u6267\u884C\u7684\u51FD\u6570\u3002</p><p>\u751F\u547D\u5468\u671F\u94A9\u5B50\u7684 this \u4E0A\u4E0B\u6587\u6307\u5411\u8C03\u7528\u5B83\u7684 Vue \u5B9E\u4F8B\u3002</p><div class="custom-container danger"><p class="custom-container-title">\u6CE8\u610F</p><p>\u4E0D\u8981\u5728\u9009\u9879\u5C5E\u6027\u6216\u56DE\u8C03\u4E0A\u4F7F\u7528\u7BAD\u5934\u51FD\u6570\uFF0C\u6BD4\u5982 created: () =&gt; console.log(this.a) \u6216 vm.$watch(&#39;a&#39;, newValue =&gt; this.myMethod())\u3002\u56E0\u4E3A\u7BAD\u5934\u51FD\u6570\u5E76\u6CA1\u6709 this\uFF0Cthis \u4F1A\u4F5C\u4E3A\u53D8\u91CF\u4E00\u76F4\u5411\u4E0A\u7EA7\u8BCD\u6CD5\u4F5C\u7528\u57DF\u67E5\u627E\uFF0C\u76F4\u81F3\u627E\u5230\u4E3A\u6B62\uFF0C\u7ECF\u5E38\u5BFC\u81F4 Uncaught TypeError: Cannot read property of undefined \u6216 Uncaught TypeError: this.myMethod is not a function \u4E4B\u7C7B\u7684\u9519\u8BEF\u3002</p></div><h4 id="\u8BA1\u7B97\u5C5E\u6027-\u65B9\u6CD5\u548C\u4FA6\u542C\u5668" tabindex="-1"><a class="header-anchor" href="#\u8BA1\u7B97\u5C5E\u6027-\u65B9\u6CD5\u548C\u4FA6\u542C\u5668" aria-hidden="true">#</a> \u8BA1\u7B97\u5C5E\u6027\uFF0C \u65B9\u6CD5\u548C\u4FA6\u542C\u5668</h4><h5 id="\u8BA1\u7B97\u5C5E\u6027" tabindex="-1"><a class="header-anchor" href="#\u8BA1\u7B97\u5C5E\u6027" aria-hidden="true">#</a> \u8BA1\u7B97\u5C5E\u6027</h5><p><img src="https://blog-picgo-typora.oss-cn-hangzhou.aliyuncs.com/image-20220805091100765.png" alt="image-20220805091100765"></p><p>\u8BA1\u7B97\u5C5E\u6027\u62E5\u6709\u7F13\u5B58\u673A\u5236\uFF0C \u5728\u8BA1\u7B97\u6240\u9700\u8981\u7684\u7684\u53D8\u91CF\u6CA1\u6709\u53D8\u5316\u65F6\u4F1A\u4E00\u76F4\u4F7F\u7528\uFF0C \u4E0D\u4F1A\u8FDB\u884C\u66F4\u65B0\u3002 \u53EA\u6709\u5F53\u9700\u8981\u7684\u53D8\u91CF\u53D1\u751F\u53D8\u5316\u624D\u4F1A\u8FDB\u884C\u66F4\u65B0\u3002</p><p>\u8BA1\u7B97\u5C5E\u6027\uFF0C\u65B9\u6CD5\uFF0C \u4FA6\u542C\u5668\u90FD\u53EF\u4EE5\u4F7F\u7528\u7684\u60C5\u51B5\uFF0C \u6211\u4EEC\u5E94\u8BE5\u4F18\u5148\u4F7F\u7528\u8BA1\u7B97\u5C5E\u6027, \u6027\u80FD\u66F4\u9AD8\u3002</p><h5 id="\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#\u65B9\u6CD5" aria-hidden="true">#</a> \u65B9\u6CD5</h5><p><img src="https://blog-picgo-typora.oss-cn-hangzhou.aliyuncs.com/image-20220805091114399.png" alt="image-20220805091114399"></p><p>\u65B9\u6CD5\u6CA1\u6709\u7F13\u5B58\u673A\u5236\uFF0C \u6BCF\u6B21\u90FD\u4F1A\u8FDB\u884C\u66F4\u65B0\u3002</p><h5 id="\u4FA6\u542C\u5668" tabindex="-1"><a class="header-anchor" href="#\u4FA6\u542C\u5668" aria-hidden="true">#</a> \u4FA6\u542C\u5668</h5><p><img src="https://blog-picgo-typora.oss-cn-hangzhou.aliyuncs.com/image-20220805091137999.png" alt="image-20220805091137999"></p><p>\u4FA6\u542C\u5668\u4F1A\u5728\u76D1\u542C\u7684\u53D8\u91CF\u53D1\u751F\u53D8\u5316\u65F6\u66F4\u65B0\u6570\u636E\u3002</p><h4 id="vue-\u6761\u4EF6\u6E32\u67D3" tabindex="-1"><a class="header-anchor" href="#vue-\u6761\u4EF6\u6E32\u67D3" aria-hidden="true">#</a> vue \u6761\u4EF6\u6E32\u67D3</h4><h5 id="key-\u503C\u7684\u4F5C\u7528" tabindex="-1"><a class="header-anchor" href="#key-\u503C\u7684\u4F5C\u7528" aria-hidden="true">#</a> key \u503C\u7684\u4F5C\u7528</h5><p><img src="https://blog-picgo-typora.oss-cn-hangzhou.aliyuncs.com/image-20220805091153167.png" alt="image-20220805091153167"></p><p>\u5982\u679C\u52A0\u4E0A<code>key</code>\u503C\uFF0C vue \u5C31\u77E5\u9053\u5B83\u662F\u9875\u9762\u4E0A\u552F\u4E00\u7684\u5143\u7D20\u3002 \u5982\u679C\u4E24\u4E2A\u5143\u7D20<code>key</code>\u503C\u4E0D\u540C\uFF0C \u4ED6\u5C31\u4E0D\u4F1A\u590D\u7528\u4E4B\u524D\u7684\u5143\u7D20\u3002</p><h2 id="\u6A21\u677F\u8BED\u6CD5" tabindex="-1"><a class="header-anchor" href="#\u6A21\u677F\u8BED\u6CD5" aria-hidden="true">#</a> \u6A21\u677F\u8BED\u6CD5</h2><h4 id="\u52A8\u6001\u53C2\u6570" tabindex="-1"><a class="header-anchor" href="#\u52A8\u6001\u53C2\u6570" aria-hidden="true">#</a> \u52A8\u6001\u53C2\u6570</h4><p>\u5728 DOM \u4E2D\u4F7F\u7528\u6A21\u677F\u65F6 (\u76F4\u63A5\u5728\u4E00\u4E2A HTML \u6587\u4EF6\u91CC\u64B0\u5199\u6A21\u677F)\uFF0C\u8FD8\u9700\u8981\u907F\u514D\u4F7F\u7528\u5927\u5199\u5B57\u7B26\u6765\u547D\u540D\u952E\u540D\uFF0C\u56E0\u4E3A\u6D4F\u89C8\u5668\u4F1A\u628A attribute \u540D\u5168\u90E8\u5F3A\u5236\u8F6C\u4E3A\u5C0F\u5199\uFF1A</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!--
\u5728 DOM \u4E2D\u4F7F\u7528\u6A21\u677F\u65F6\u8FD9\u6BB5\u4EE3\u7801\u4F1A\u88AB\u8F6C\u6362\u4E3A \`v-bind:[someattr]\`\u3002
\u9664\u975E\u5728\u5B9E\u4F8B\u4E2D\u6709\u4E00\u4E2A\u540D\u4E3A\u201Csomeattr\u201D\u7684 property\uFF0C\u5426\u5219\u4EE3\u7801\u4E0D\u4F1A\u5DE5\u4F5C\u3002
--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name"><span class="token namespace">v-bind:</span>[someAttr]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>value<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> ... <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u5217\u8868\u6E32\u67D3" tabindex="-1"><a class="header-anchor" href="#\u5217\u8868\u6E32\u67D3" aria-hidden="true">#</a> \u5217\u8868\u6E32\u67D3</h2><p>\u6709\u65F6\u4F60\u53EF\u80FD\u9700\u8981\u4E3A\u5DF2\u6709\u5BF9\u8C61\u8D4B\u503C\u591A\u4E2A\u65B0\u5C5E\u6027\uFF0C\u6BD4\u5982\u4F7F\u7528 Object.assign() \u6216 _.extend()\u3002\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u4F60\u5E94\u8BE5\u7528\u4E24\u4E2A\u5BF9\u8C61\u7684\u5C5E\u6027\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\u5BF9\u8C61\u3002\u6240\u4EE5\uFF0C\u5982\u679C\u4F60\u60F3\u6DFB\u52A0\u65B0\u7684\u54CD\u5E94\u5F0F\u5C5E\u6027\uFF0C\u4E0D\u8981\u50CF\u8FD9\u6837\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>userProfile<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">27</span><span class="token punctuation">,</span>
  <span class="token literal-property property">favoriteColor</span><span class="token operator">:</span> <span class="token string">&quot;Vue Green&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F60\u5E94\u8BE5\u8FD9\u6837\u505A\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>vm<span class="token punctuation">.</span>userProfile <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> vm<span class="token punctuation">.</span>userProfile<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">27</span><span class="token punctuation">,</span>
  <span class="token literal-property property">favoriteColor</span><span class="token operator">:</span> <span class="token string">&quot;Vue Green&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u9047\u5230\u8BF7\u6C42\u5730\u5740\u662F<code>/api</code>\u53EF\u4EE5\u81EA\u52A8\u8F6C\u53D1\u5230<code>/static/mock</code>\u3002</p><h2 id="\u9879\u76EE\u8054\u8C03" tabindex="-1"><a class="header-anchor" href="#\u9879\u76EE\u8054\u8C03" aria-hidden="true">#</a> \u9879\u76EE\u8054\u8C03</h2><p>\u628A\u540E\u7AEF\u8BF7\u6C42\u7684\u5730\u5740\u586B\u5199\u5728\u8FD9\u91CC\u5373\u53EF</p><p><img src="https://blog-picgo-typora.oss-cn-hangzhou.aliyuncs.com/image-20220805091210702.png" alt="image-20220805091210702"></p><h2 id="mixin" tabindex="-1"><a class="header-anchor" href="#mixin" aria-hidden="true">#</a> mixin</h2><p>\u5982\u679C\u6211\u4EEC\u7684\u4E1A\u52A1\u4EE3\u7801\u5185\u6709\u5F88\u591A\u76F8\u540C\u7684\u903B\u8F91\u4EE3\u7801\uFF0C \u8FD9\u65F6\u5019\u6211\u4EEC\u53EF\u4EE5\u8003\u8651\u4F7F\u7528 mixin\uFF0C \u5B83\u53EF\u4EE5\u505A\u5230\u8BA9\u6211\u4EEC\u5199\u4E00\u5957\u4EE3\u7801\u5728\u591A\u4E2A\u5730\u65B9\u4F7F\u7528\u3002</p><p>\u521B\u5EFA mixin.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> mapGetters<span class="token punctuation">,</span> mapMutations<span class="token punctuation">,</span> mapActions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> playMode <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;common/js/config&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> shuffle <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;common/js/util&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> playlistMixin <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;playlist&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handlePlaylist</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>playlist<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">activated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handlePlaylist</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>playlist<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">watch</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">playlist</span><span class="token punctuation">(</span><span class="token parameter">newVal</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handlePlaylist</span><span class="token punctuation">(</span>newVal<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">handlePlaylist</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;component must implement handlePlaylist method&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u5728\u4E1A\u52A1\u4EE3\u7801\u5185\u5F15\u5165\u6B64\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u5728\u4E1A\u52A1\u4EE3\u7801\u5185\u5F15\u5165\u6B64\u6587\u4EF6" aria-hidden="true">#</a> \u5728\u4E1A\u52A1\u4EE3\u7801\u5185\u5F15\u5165\u6B64\u6587\u4EF6</h4><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code>import {playlistMixin} from &#39;common/js/mixin&#39; export default { mixins:
[playlistMixin], }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u6837\u505A\u5C31\u53EF\u4EE5\u628A\u4E1A\u52A1\u4EE3\u7801\u548C playlistMixin \u8FDB\u884C\u878D\u5408\u3002 \u5982\u679C\u7EC4\u4EF6\u5185\u6709\u76F8\u540C\u65B9\u6CD5\uFF0C \u4F1A\u8986\u76D6\u6389 mixin \u4E2D\u7684\u65B9\u6CD5\u3002</p><h2 id="vuex" tabindex="-1"><a class="header-anchor" href="#vuex" aria-hidden="true">#</a> vuex</h2><p>\u9996\u5148\u6211\u4EEC\u53EF\u4EE5\u5728 store \u6587\u4EF6\u5939\u4E0B\u521B\u5EFA index.js \u4F5C\u4E3A\u603B\u5165\u53E3\u3002 \u5F15\u5165 4 \u4E2A\u6587\u4EF6\u3002action.js, getter.js, mutation.js, state.js\u3002</p><p>\u5176\u4E2D state \u7528\u6765\u5B58\u653E\u6570\u636E\uFF0C getter \u7528\u6765\u83B7\u53D6\u6570\u636E\uFF0C \u5B83\u76F8\u5F53\u4E8E\u662F\u4E00\u4E2A\u8BA1\u7B97\u5C5E\u6027\u3002 mutation \u4FEE\u6539\u6570\u636E\uFF0C action \u53EF\u4EE5\u5F02\u6B65\u7684\u64CD\u4F5C\u6570\u636E\uFF0C \u8FD8\u53EF\u4EE5\u6253\u5305 mutation \u7684\u4FEE\u6539\u3002</p><p><img src="https://blog-picgo-typora.oss-cn-hangzhou.aliyuncs.com/image-20220805091225777.png" alt="image-20220805091225777"></p><h3 id="\u5B9A\u4E49" tabindex="-1"><a class="header-anchor" href="#\u5B9A\u4E49" aria-hidden="true">#</a> \u5B9A\u4E49</h3><p>index.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> actions <span class="token keyword">from</span> <span class="token string">&quot;./action&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> getters <span class="token keyword">from</span> <span class="token string">&quot;./getters&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> state <span class="token keyword">from</span> <span class="token string">&quot;./state&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> mutations <span class="token keyword">from</span> <span class="token string">&quot;./mutations&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> createLogger <span class="token keyword">from</span> <span class="token string">&quot;vuex/dist/logger&quot;</span><span class="token punctuation">;</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> debug <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">&quot;production&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  state<span class="token punctuation">,</span>
  getters<span class="token punctuation">,</span>
  actions<span class="token punctuation">,</span>
  mutations<span class="token punctuation">,</span>
  <span class="token literal-property property">strict</span><span class="token operator">:</span> debug<span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> debug <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token function">createLogger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>state.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> playMode <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;common/js/config&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> loadSearch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;common/js/cache&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">singer</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">playing</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token literal-property property">fullScreen</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token literal-property property">playlist</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">sequenceList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> playMode<span class="token punctuation">.</span>sequence<span class="token punctuation">,</span>
  <span class="token literal-property property">currentIndex</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token literal-property property">disc</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">topList</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">searchHistory</span><span class="token operator">:</span> <span class="token function">loadSearch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">playHistory</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">favoriteList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> state<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>getter.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">singer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>singer<span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">playing</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>playing<span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">fullScreen</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>fullScreen<span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">playlist</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>playlist<span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">sequenceList</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>sequenceList<span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">mode</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>mode<span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">currentIndex</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>currentIndex<span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">currentSong</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> state<span class="token punctuation">.</span>playlist<span class="token punctuation">[</span>state<span class="token punctuation">.</span>currentIndex<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">playHistory</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> state<span class="token punctuation">.</span>playHistory<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">song</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Song</span><span class="token punctuation">(</span>song<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">favoriteList</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> state<span class="token punctuation">.</span>favoriteList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">song</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Song</span><span class="token punctuation">(</span>song<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">disc</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>disc<span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">topList</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>topList<span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">searchHistory</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>searchHistory<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E00\u822C\u4FEE\u6539\u6570\u636E\uFF0C \u6211\u4EEC\u4F1A\u521B\u5EFA\u4E00\u4E2A js \u6587\u4EF6\u4E13\u95E8\u5B58\u653E\u4FEE\u6539\u6570\u636E\u7684\u53D8\u91CF\u540D\uFF0C \u9632\u6B62\u51FA\u9519\u3002</p><p>mutation-types.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">SET_SINGER</span> <span class="token operator">=</span> <span class="token string">&quot;SET_SINGER&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">SET_PLAYING_STATE</span> <span class="token operator">=</span> <span class="token string">&quot;SET_PLAYING_STATE&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">SET_FULL_SCREEN</span> <span class="token operator">=</span> <span class="token string">&quot;SET_FULL_SCREEN&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">SET_PLAYLIST</span> <span class="token operator">=</span> <span class="token string">&quot;SET_PLAYLIST&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">SET_SEQUENCE_LIST</span> <span class="token operator">=</span> <span class="token string">&quot;SET_SEQUENCE_LIST&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">SET_PLAY_MODE</span> <span class="token operator">=</span> <span class="token string">&quot;SET_PLAY_MODE&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">SET_CURRENT_INDEX</span> <span class="token operator">=</span> <span class="token string">&quot;SET_CURRENT_INDEX&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">SET_PLAY_HISTORY</span> <span class="token operator">=</span> <span class="token string">&quot;SET_PLAY_HISTORY&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">SET_FAVORITE_LIST</span> <span class="token operator">=</span> <span class="token string">&quot;SET_FAVORITE_LIST&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">SET_DISC</span> <span class="token operator">=</span> <span class="token string">&quot;SET_DISC&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">SET_TOP_LIST</span> <span class="token operator">=</span> <span class="token string">&quot;SET_TOP_LIST&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">SET_SEARCH_HISTORY</span> <span class="token operator">=</span> <span class="token string">&quot;SET_SEARCH_HISTORY&quot;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>mutations.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> types <span class="token keyword">from</span> <span class="token string">&quot;./mutation-types&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> mutations <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>types<span class="token punctuation">.</span><span class="token constant">SET_SINGER</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> singer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    state<span class="token punctuation">.</span>singer <span class="token operator">=</span> singer<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>types<span class="token punctuation">.</span><span class="token constant">SET_PLAYING_STATE</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> flag</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    state<span class="token punctuation">.</span>playing <span class="token operator">=</span> flag<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>types<span class="token punctuation">.</span><span class="token constant">SET_SEQUENCE_LIST</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> flag</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    state<span class="token punctuation">.</span>playing <span class="token operator">=</span> flag<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>types<span class="token punctuation">.</span><span class="token constant">SET_FULL_SCREEN</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> flag</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    state<span class="token punctuation">.</span>fullScreen <span class="token operator">=</span> flag<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>types<span class="token punctuation">.</span><span class="token constant">SET_PLAYLIST</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> list</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    state<span class="token punctuation">.</span>playlist <span class="token operator">=</span> list<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>types<span class="token punctuation">.</span><span class="token constant">SET_SEQUENCE_LIST</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> list</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    state<span class="token punctuation">.</span>sequenceList <span class="token operator">=</span> list<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>types<span class="token punctuation">.</span><span class="token constant">SET_PLAY_MODE</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> mode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    state<span class="token punctuation">.</span>mode <span class="token operator">=</span> mode<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>types<span class="token punctuation">.</span><span class="token constant">SET_CURRENT_INDEX</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    state<span class="token punctuation">.</span>currentIndex <span class="token operator">=</span> index<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>types<span class="token punctuation">.</span><span class="token constant">SET_PLAY_HISTORY</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> history</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    state<span class="token punctuation">.</span>playHistory <span class="token operator">=</span> history<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>types<span class="token punctuation">.</span><span class="token constant">SET_FAVORITE_LIST</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> list</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    state<span class="token punctuation">.</span>favoriteList <span class="token operator">=</span> list<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>types<span class="token punctuation">.</span><span class="token constant">SET_DISC</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> disc</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    state<span class="token punctuation">.</span>disc <span class="token operator">=</span> disc<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>types<span class="token punctuation">.</span><span class="token constant">SET_TOP_LIST</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> topList</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    state<span class="token punctuation">.</span>topList <span class="token operator">=</span> topList<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>types<span class="token punctuation">.</span><span class="token constant">SET_SEARCH_HISTORY</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> history</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> mutations<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>action.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> types <span class="token keyword">from</span> <span class="token string">&quot;./mutation-types&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> playMode <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;common/js/config&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> shuffle <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;common/js/util&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  saveSearch<span class="token punctuation">,</span>
  clearSearch<span class="token punctuation">,</span>
  deleteSearch<span class="token punctuation">,</span>
  savePlay<span class="token punctuation">,</span>
  saveFavorite<span class="token punctuation">,</span>
  deleteFavorite<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;common/js/cache&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token parameter">list<span class="token punctuation">,</span> song</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> list<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> item<span class="token punctuation">.</span>id <span class="token operator">===</span> song<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">selectPlay</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> commit<span class="token punctuation">,</span> state <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> list<span class="token punctuation">,</span> index <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">commit</span><span class="token punctuation">(</span>types<span class="token punctuation">.</span><span class="token constant">SET_SEQUENCE_LIST</span><span class="token punctuation">,</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>state<span class="token punctuation">.</span>mode <span class="token operator">===</span> playMode<span class="token punctuation">.</span>random<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> randomList <span class="token operator">=</span> <span class="token function">shuffle</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">commit</span><span class="token punctuation">(</span>types<span class="token punctuation">.</span><span class="token constant">SET_PLAYLIST</span><span class="token punctuation">,</span> randomList<span class="token punctuation">)</span><span class="token punctuation">;</span>
    index <span class="token operator">=</span> <span class="token function">findIndex</span><span class="token punctuation">(</span>randomList<span class="token punctuation">,</span> list<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">commit</span><span class="token punctuation">(</span>types<span class="token punctuation">.</span><span class="token constant">SET_PLAYLIST</span><span class="token punctuation">,</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">commit</span><span class="token punctuation">(</span>types<span class="token punctuation">.</span><span class="token constant">SET_CURRENT_INDEX</span><span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">commit</span><span class="token punctuation">(</span>types<span class="token punctuation">.</span><span class="token constant">SET_FULL_SCREEN</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">commit</span><span class="token punctuation">(</span>types<span class="token punctuation">.</span><span class="token constant">SET_PLAYING_STATE</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">randomPlay</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> commit <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> list <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">commit</span><span class="token punctuation">(</span>types<span class="token punctuation">.</span><span class="token constant">SET_PLAY_MODE</span><span class="token punctuation">,</span> playMode<span class="token punctuation">.</span>random<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">commit</span><span class="token punctuation">(</span>types<span class="token punctuation">.</span><span class="token constant">SET_SEQUENCE_LIST</span><span class="token punctuation">,</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> randomList <span class="token operator">=</span> <span class="token function">shuffle</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">commit</span><span class="token punctuation">(</span>types<span class="token punctuation">.</span><span class="token constant">SET_PLAYLIST</span><span class="token punctuation">,</span> randomList<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">commit</span><span class="token punctuation">(</span>types<span class="token punctuation">.</span><span class="token constant">SET_CURRENT_INDEX</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">commit</span><span class="token punctuation">(</span>types<span class="token punctuation">.</span><span class="token constant">SET_FULL_SCREEN</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">commit</span><span class="token punctuation">(</span>types<span class="token punctuation">.</span><span class="token constant">SET_PLAYING_STATE</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">insertSong</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> commit<span class="token punctuation">,</span> state <span class="token punctuation">}</span><span class="token punctuation">,</span> song</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> playlist <span class="token operator">=</span> state<span class="token punctuation">.</span>playlist<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> sequenceList <span class="token operator">=</span> state<span class="token punctuation">.</span>sequenceList<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> currentIndex <span class="token operator">=</span> state<span class="token punctuation">.</span>currentIndex<span class="token punctuation">;</span>
  <span class="token comment">// \u8BB0\u5F55\u5F53\u524D\u6B4C\u66F2</span>
  <span class="token keyword">let</span> currentSong <span class="token operator">=</span> playlist<span class="token punctuation">[</span>currentIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment">// \u67E5\u627E\u5F53\u524D\u5217\u8868\u4E2D\u662F\u5426\u6709\u5F85\u63D2\u5165\u7684\u6B4C\u66F2\u5E76\u8FD4\u56DE\u5176\u7D22\u5F15</span>
  <span class="token keyword">let</span> fpIndex <span class="token operator">=</span> <span class="token function">findIndex</span><span class="token punctuation">(</span>playlist<span class="token punctuation">,</span> song<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// \u56E0\u4E3A\u662F\u63D2\u5165\u6B4C\u66F2\uFF0C\u6240\u4EE5\u7D22\u5F15+1</span>
  currentIndex<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token comment">// \u63D2\u5165\u8FD9\u9996\u6B4C\u5230\u5F53\u524D\u7D22\u5F15\u4F4D\u7F6E</span>
  playlist<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>currentIndex<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> song<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// \u5982\u679C\u5DF2\u7ECF\u5305\u542B\u4E86\u8FD9\u9996\u6B4C</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>fpIndex <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u5982\u679C\u5F53\u524D\u63D2\u5165\u7684\u5E8F\u53F7\u5927\u4E8E\u5217\u8868\u4E2D\u7684\u5E8F\u53F7</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>currentIndex <span class="token operator">&gt;</span> fpIndex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      playlist<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>fpIndex<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      currentIndex<span class="token operator">--</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      playlist<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>fpIndex <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">let</span> currentSIndex <span class="token operator">=</span> <span class="token function">findIndex</span><span class="token punctuation">(</span>sequenceList<span class="token punctuation">,</span> currentSong<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>

  <span class="token keyword">let</span> fsIndex <span class="token operator">=</span> <span class="token function">findIndex</span><span class="token punctuation">(</span>sequenceList<span class="token punctuation">,</span> song<span class="token punctuation">)</span><span class="token punctuation">;</span>

  sequenceList<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>currentSIndex<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> song<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>fsIndex <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>currentSIndex <span class="token operator">&gt;</span> fsIndex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      sequenceList<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>fsIndex<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      sequenceList<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>fsIndex <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">commit</span><span class="token punctuation">(</span>types<span class="token punctuation">.</span><span class="token constant">SET_PLAYLIST</span><span class="token punctuation">,</span> playlist<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">commit</span><span class="token punctuation">(</span>types<span class="token punctuation">.</span><span class="token constant">SET_SEQUENCE_LIST</span><span class="token punctuation">,</span> sequenceList<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">commit</span><span class="token punctuation">(</span>types<span class="token punctuation">.</span><span class="token constant">SET_CURRENT_INDEX</span><span class="token punctuation">,</span> currentIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">commit</span><span class="token punctuation">(</span>types<span class="token punctuation">.</span><span class="token constant">SET_FULL_SCREEN</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">commit</span><span class="token punctuation">(</span>types<span class="token punctuation">.</span><span class="token constant">SET_PLAYING_STATE</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">saveSearchHistory</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> commit <span class="token punctuation">}</span><span class="token punctuation">,</span> query</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">commit</span><span class="token punctuation">(</span>types<span class="token punctuation">.</span><span class="token constant">SET_SEARCH_HISTORY</span><span class="token punctuation">,</span> <span class="token function">saveSearch</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">deleteSearchHistory</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> commit <span class="token punctuation">}</span><span class="token punctuation">,</span> query</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">commit</span><span class="token punctuation">(</span>types<span class="token punctuation">.</span><span class="token constant">SET_SEARCH_HISTORY</span><span class="token punctuation">,</span> <span class="token function">deleteSearch</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">clearSearchHistory</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> commit <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">commit</span><span class="token punctuation">(</span>types<span class="token punctuation">.</span><span class="token constant">SET_SEARCH_HISTORY</span><span class="token punctuation">,</span> <span class="token function">clearSearch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528" aria-hidden="true">#</a> \u4F7F\u7528</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>import {mapGetters, mapMutations} from &#39;vuex&#39;


		...mapGetters([
			&#39;fullScreen&#39;,
			&#39;playlist&#39;,
			&#39;currentSong&#39;,
			&#39;playing&#39;,
			&#39;currentIndex&#39;,
			&#39;mode&#39;,
			&#39;sequenceList&#39;
		]),

	  back() {
        this.setFullScreen(false)
      },


      ...mapMutations({
        setFullScreen:&#39;SET_FULL_SCREEN&#39;,
        setPlayingState:&#39;SET_PLAYING_STATE&#39;,
        setCurrentIndex: &#39;SET_CURRENT_INDEX&#39;,
        setPlayMode: &#39;SET_PLAY_MODE&#39;,
        setPlaylist: &#39;SET_PLAYLIST&#39;
      })

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>action</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>	import {mapActions} from &#39;vuex&#39;

	  this.selectPlay({
          list: this.songs,
          index
        })

      ...mapActions([
        &#39;selectPlay&#39;,
        &#39;randomPlay&#39;
      ])
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,106),o=[e];function c(i,l){return s(),a("div",null,o)}const r=n(p,[["render",c],["__file","vue\u4F7F\u7528.html.vue"]]);export{r as default};
